{"version":3,"file":"khmer-chess-ai.umd.js","mappings":"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","sources":["webpack://khmer-chess-ai/webpack/universalModuleDefinition","webpack://khmer-chess-ai/./src/KhmerChessAI.js","webpack://khmer-chess-ai/./src/index.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/KhmerChess.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/HVPont.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/MoveHelper.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/Rectangle.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/boardHelper.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/constant.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/genMask.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/index.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/jsis.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/index.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/Captured.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/KPGN.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/Move.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/Player.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/Result.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/Timer.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/index.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/other/EventHandler.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/other/base64Helper.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/other/index.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/other/table.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/Board.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/CountUp.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/Graveyard.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/KAttacked.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/KqJumped.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/Piece.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/PieceIndex.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/Point.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/REN.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/constant.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/index.js","webpack://khmer-chess-ai/webpack/bootstrap","webpack://khmer-chess-ai/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net k4us.net@gmail.com\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */\r\nvar khmer_chess_1 = require(\"khmer-chess\");\r\nvar package_json_1 = __importDefault(require(\"../package.json\"));\r\nvar KhmerChessAI = /** @class */ (function () {\r\n    function KhmerChessAI(_a) {\r\n        var khmerChess = _a.khmerChess, turn = _a.turn;\r\n        this.khmerChess = khmerChess ? khmerChess : new khmer_chess_1.KhmerChess();\r\n        this.turn = turn;\r\n    }\r\n    Object.defineProperty(KhmerChessAI.prototype, \"isAITurn\", {\r\n        get: function () {\r\n            return this.khmerChess.turn === this.turn;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    KhmerChessAI.prototype.pickRandomItem = function (arr) {\r\n        if (!arr.length) {\r\n            return null;\r\n        }\r\n        var rand = Math.floor(Math.random() * arr.length);\r\n        return arr[rand];\r\n    };\r\n    KhmerChessAI.prototype.attemptMove = function () {\r\n        if (this.khmerChess.turn === this.turn) {\r\n            var pieceIndices = this.khmerChess.getCanMoves();\r\n            var pickIndex = this.pickRandomItem(pieceIndices);\r\n            if (pickIndex) {\r\n                var pick = this.pickRandomItem(pickIndex.canMovePoints);\r\n                if (!pick) {\r\n                    return null;\r\n                }\r\n                return {\r\n                    fromIndex: pickIndex.point.index,\r\n                    toIndex: pick.index,\r\n                };\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    KhmerChessAI.turnColors = {\r\n        black: khmer_chess_1.PIECE_COLOR_BLACK,\r\n        white: khmer_chess_1.PIECE_COLOR_WHITE,\r\n    };\r\n    KhmerChessAI.title = package_json_1.default.name;\r\n    KhmerChessAI.version = package_json_1.default.version;\r\n    return KhmerChessAI;\r\n}());\r\nexports.default = KhmerChessAI;\r\nconsole.log(khmer_chess_1.KhmerChess.title + \":\" + khmer_chess_1.KhmerChess.version + \" + \" + KhmerChessAI.title + \":\" + KhmerChessAI.version);\r\n//# sourceMappingURL=KhmerChessAI.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.KhmerChessAI = void 0;\r\nvar KhmerChessAI_1 = require(\"./KhmerChessAI\");\r\nObject.defineProperty(exports, \"KhmerChessAI\", { enumerable: true, get: function () { return __importDefault(KhmerChessAI_1).default; } });\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net k4us.net@gmail.com\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar package_json_1 = __importDefault(require(\"../package.json\"));\r\nvar constant_1 = require(\"./brain/constant\");\r\nvar KPGN_1 = __importDefault(require(\"./kpgn/KPGN\"));\r\nvar table_1 = __importDefault(require(\"./other/table\"));\r\nvar REN_1 = __importDefault(require(\"./ren/REN\"));\r\nvar KhmerChess = /** @class */ (function () {\r\n    function KhmerChess(renStr) {\r\n        var ren = REN_1.default.fromString(renStr);\r\n        this.kpgn = new KPGN_1.default(ren);\r\n    }\r\n    KhmerChess.prototype.loadKpng = function (option) {\r\n        this.kpgn.fromJson(option);\r\n    };\r\n    KhmerChess.prototype.resetBoard = function () {\r\n        this.kpgn.ren = REN_1.default.fromString();\r\n    };\r\n    KhmerChess.prototype.getCanMoves = function () {\r\n        var pieceIndices = this.kpgn.ren.genAllCanMoves();\r\n        return pieceIndices;\r\n    };\r\n    KhmerChess.prototype.getCanMovePointsByPoint = function (point) {\r\n        var canMovePoints = this.kpgn.ren.getCanMovePointsByPoint(point);\r\n        return canMovePoints;\r\n    };\r\n    KhmerChess.prototype.validateRENStr = function (renStr) {\r\n        try {\r\n            REN_1.default.fromString(renStr);\r\n            return { valid: true, error_number: 0, error: 'No errors.' };\r\n        }\r\n        catch (error) {\r\n            return { valid: false, error_number: 1, error: error.message };\r\n        }\r\n    };\r\n    KhmerChess.prototype.getRENStr = function () {\r\n        return this.kpgn.ren.toString();\r\n    };\r\n    Object.defineProperty(KhmerChess.prototype, \"piecesInBoardMultiArray\", {\r\n        get: function () {\r\n            return this.kpgn.ren.board.piecesMultiArray;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(KhmerChess.prototype, \"piecesInBoard\", {\r\n        get: function () {\r\n            return this.kpgn.ren.board.pieces;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(KhmerChess.prototype, \"piecesInGraveyard\", {\r\n        get: function () {\r\n            return this.kpgn.ren.graveyard.pieces;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // Khmer Portable Game Notation <file-name>.kpgn.json\r\n    KhmerChess.prototype.getKPGN = function () {\r\n        return this.kpgn.toJson();\r\n    };\r\n    KhmerChess.prototype.loadKpgn = function (kpgnJosn, options) {\r\n        this.kpgn = new KPGN_1.default(this.kpgn.ren);\r\n    };\r\n    KhmerChess.prototype.drawAscii = function () {\r\n        return (0, table_1.default)(this.kpgn.ren);\r\n    };\r\n    Object.defineProperty(KhmerChess.prototype, \"turn\", {\r\n        get: function () {\r\n            return this.kpgn.ren.turn;\r\n        },\r\n        set: function (turn) {\r\n            this.kpgn.ren.turn = turn;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    KhmerChess.prototype.move = function (moveFromIndex, moveToIndex) {\r\n        var move = this.kpgn.ren.move(moveFromIndex, moveToIndex);\r\n        this.kpgn.addMove(move);\r\n        return move;\r\n    };\r\n    /**\r\n     * Move all pieces to graveyard except kings\r\n     * -> 4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB\r\n     */\r\n    KhmerChess.prototype.clearBoard = function () {\r\n        this.kpgn.ren = REN_1.default.fromString('4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB');\r\n    };\r\n    KhmerChess.prototype.getHistories = function () {\r\n        return this.kpgn.moves;\r\n    };\r\n    KhmerChess.toKhmerNum = function (englishNum) {\r\n        var str = \"\" + englishNum;\r\n        var result = str.split('').map(function (c) {\r\n            return constant_1.VERTICAL_NOTE_LETTERS[constant_1.VERTICAL_NOTE_LETTERS_ENGLISH.indexOf(c)];\r\n        }).join('');\r\n        return result;\r\n    };\r\n    KhmerChess.title = package_json_1.default.name;\r\n    KhmerChess.version = package_json_1.default.version;\r\n    return KhmerChess;\r\n}());\r\nexports.default = KhmerChess;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=KhmerChess.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"./constant\");\r\nvar jsis_1 = __importDefault(require(\"./jsis\"));\r\nvar HVPont = /** @class */ (function () {\r\n    function HVPont(h, v) {\r\n        if (jsis_1.default.isUndefined(v)) {\r\n            h = h[0];\r\n            v = h[1];\r\n        }\r\n        this.h = h;\r\n        this.v = Number(v);\r\n    }\r\n    Object.defineProperty(HVPont.prototype, \"x\", {\r\n        get: function () {\r\n            return constant_1.HORIZONTAL_CODE_LETTERS.indexOf(this.h);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HVPont.prototype, \"y\", {\r\n        get: function () {\r\n            return this.v - 1;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HVPont.prototype, \"indexCode\", {\r\n        get: function () {\r\n            return \"\" + this.h + this.v;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return HVPont;\r\n}());\r\nexports.default = HVPont;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=HVPont.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\r\nvar boardHelper_1 = __importDefault(require(\"./boardHelper\"));\r\nvar constant_1 = require(\"./constant\");\r\nvar MoveHelper = /** @class */ (function () {\r\n    function MoveHelper() {\r\n    }\r\n    Object.defineProperty(MoveHelper.prototype, \"isWhiteTurn\", {\r\n        get: function () {\r\n            return Piece_1.default.isWhiteColor(this.currentTurn);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    MoveHelper.prototype.init = function (option) {\r\n        this.piecesString = option.piecesString;\r\n        this.currentTurn = option.currentTurn;\r\n        this.isQueenMoved = option.isQueenMoved;\r\n        this.isKingMoved = option.isKingMoved;\r\n        this.genCanMove = option.genCanMove;\r\n        this.genCanMoveForAnother = option.genCanMoveForAnother;\r\n        this.whiteMoves = [];\r\n        this.blackMoves = [];\r\n        this.whiteKingInDanger = null;\r\n        this.whiteKingWillInDanger = null;\r\n        this.blackKingInDanger = null;\r\n        this.blackKingWillInDanger = null;\r\n        this.winColor = null;\r\n        this.stuckColor = null;\r\n    };\r\n    MoveHelper.prototype.generateCanMoves = function () {\r\n        var _this = this;\r\n        var filter = boardHelper_1.default.filterPieceInBoard(this.piecesString);\r\n        this.whiteMoves = filter.whitePieces;\r\n        this.blackMoves = filter.blackPieces;\r\n        var genMoves = function (pieceIndices) {\r\n            pieceIndices.forEach(function (pieceIndex) {\r\n                var isHaveMoved = _this.isKingMoved;\r\n                if (pieceIndex.piece !== null) {\r\n                    if (pieceIndex.piece !== null && !pieceIndex.piece.isTypeKing) {\r\n                        isHaveMoved = pieceIndex.piece.isTypeQueen ? _this.isQueenMoved : false;\r\n                    }\r\n                    var canMovePoints = _this.genCanMovePointsByPiecePoint(pieceIndex.point, pieceIndex.piece, _this.piecesString, isHaveMoved);\r\n                    pieceIndex.canMovePoints = canMovePoints;\r\n                }\r\n            });\r\n        };\r\n        genMoves(this.whiteMoves);\r\n        genMoves(this.blackMoves);\r\n    };\r\n    MoveHelper.prototype.cleanPieceNoMove = function () {\r\n        var cleanMoves = function (pieces) {\r\n            var isTrue = true;\r\n            while (isTrue) {\r\n                isTrue = false;\r\n                for (var i = 0; i < pieces.length; i++) {\r\n                    var piece = pieces[i];\r\n                    if (!piece.canMovePoints.length) {\r\n                        pieces.splice(i, 1);\r\n                        isTrue = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        cleanMoves(this.whiteMoves);\r\n        cleanMoves(this.blackMoves);\r\n    };\r\n    MoveHelper.prototype.checkIfKingInDanger = function () {\r\n        this.whiteKingInDanger = boardHelper_1.default.getKingInDanger(constant_1.PIECE_COLOR_WHITE, this.piecesString);\r\n        this.whiteKingWillInDanger = boardHelper_1.default.getKingWillInDanger(constant_1.PIECE_COLOR_WHITE, this.piecesString);\r\n        this.blackKingInDanger = boardHelper_1.default.getKingInDanger(constant_1.PIECE_COLOR_BLACK, this.piecesString);\r\n        this.blackKingWillInDanger = boardHelper_1.default.getKingWillInDanger(constant_1.PIECE_COLOR_BLACK, this.piecesString);\r\n    };\r\n    MoveHelper.prototype.genWinLost = function () {\r\n        if (this.whiteKingInDanger && !this.whiteMoves.length) {\r\n            this.winColor = constant_1.PIECE_COLOR_BLACK;\r\n        }\r\n        else if (this.blackKingInDanger && !this.blackMoves.length) {\r\n            this.winColor = constant_1.PIECE_COLOR_WHITE;\r\n        }\r\n    };\r\n    MoveHelper.prototype.getStuck = function () {\r\n        if (this.winColor) {\r\n            return;\r\n        }\r\n        if (this.isWhiteTurn && !this.whiteMoves.length) {\r\n            this.stuckColor = constant_1.PIECE_COLOR_WHITE;\r\n        }\r\n        else if (!this.isWhiteTurn && !this.blackMoves.length) {\r\n            this.stuckColor = constant_1.PIECE_COLOR_BLACK;\r\n        }\r\n    };\r\n    MoveHelper.prototype.calcCanMove = function (option) {\r\n        this.init(option);\r\n        this.generateCanMoves();\r\n        this.cleanPieceNoMove();\r\n        var moves = [];\r\n        if (this.genCanMove) {\r\n            moves = this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\r\n        }\r\n        var anotherMoves = [];\r\n        if (this.genCanMoveForAnother) {\r\n            anotherMoves = !this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\r\n        }\r\n        return {\r\n            moves: moves,\r\n            anotherMoves: anotherMoves,\r\n        };\r\n    };\r\n    MoveHelper.prototype.calcState = function (option) {\r\n        this.init(option);\r\n        this.generateCanMoves();\r\n        this.cleanPieceNoMove();\r\n        this.checkIfKingInDanger();\r\n        this.genWinLost();\r\n        this.getStuck();\r\n        return {\r\n            blackKingInDanger: this.blackKingInDanger,\r\n            whiteKingInDanger: this.whiteKingInDanger,\r\n            blackKingWillInDanger: this.blackKingWillInDanger,\r\n            whiteKingWillInDanger: this.whiteKingWillInDanger,\r\n            winColor: this.winColor,\r\n            stuckColor: this.stuckColor,\r\n        };\r\n    };\r\n    MoveHelper.prototype.calCount = function (_a) {\r\n        var color = _a.color, piecesString = _a.piecesString, force = _a.force;\r\n        return boardHelper_1.default.checkCount(color, piecesString, force);\r\n    };\r\n    MoveHelper.prototype.genCanMovePointsByPiecePoint = function (point, piece, piecesString, isHasMoved) {\r\n        return boardHelper_1.default.genCanMovePointsByPiecePoint(point.index, piece, piecesString, isHasMoved);\r\n    };\r\n    return MoveHelper;\r\n}());\r\nexports.default = MoveHelper;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=MoveHelper.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"./constant\");\r\nvar Rectangle = /** @class */ (function () {\r\n    function Rectangle(x, y, width, height) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    Rectangle.prototype.isContainsPoint = function (point) {\r\n        var x = point.x, y = point.y;\r\n        var isContainsPoint = this.x <= x &&\r\n            (this.x + this.width) >= x &&\r\n            this.y <= y &&\r\n            (this.y + this.height) >= y;\r\n        return isContainsPoint;\r\n    };\r\n    Rectangle.isValidPoint = function (point) {\r\n        return new Rectangle(0, 0, constant_1.ROW_LAST_INDEX, constant_1.ROW_LAST_INDEX).isContainsPoint(point);\r\n    };\r\n    return Rectangle;\r\n}());\r\nexports.default = Rectangle;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Rectangle.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CountUpState = void 0;\r\nvar jsis_1 = __importDefault(require(\"./jsis\"));\r\nvar genMask_1 = __importDefault(require(\"./genMask\"));\r\nvar constant_1 = require(\"./constant\");\r\nvar Point_1 = __importDefault(require(\"../ren/Point\"));\r\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\r\nvar Rectangle_1 = __importDefault(require(\"./Rectangle\"));\r\nvar ren_1 = require(\"../ren\");\r\nvar mask = (0, genMask_1.default)();\r\nvar CountUpState = /** @class */ (function () {\r\n    function CountUpState(countingNumber, countingToNumber) {\r\n        this.countingNumber = countingNumber;\r\n        this.countingToNumber = countingToNumber;\r\n    }\r\n    return CountUpState;\r\n}());\r\nexports.CountUpState = CountUpState;\r\nvar BoardHelper = /** @class */ (function () {\r\n    function BoardHelper() {\r\n        this.convertMask = function (point1, index, color) {\r\n            var sign = Piece_1.default.isWhiteColor(color) ? 1 : -1;\r\n            var point2 = Point_1.default.fromIndex(index);\r\n            point1.x = point1.x * sign + point2.x;\r\n            point1.y = point1.y * sign + point2.y;\r\n            return Rectangle_1.default.isValidPoint(point1) ? point1.index : null;\r\n        };\r\n    }\r\n    BoardHelper.prototype.getCharPieceFromString = function (piecesString, index) {\r\n        if (Point_1.default.isIndexInBoard(index) && piecesString.length === constant_1.CELL_COUNT) {\r\n            return piecesString[index];\r\n        }\r\n        return constant_1.EMPTY_PIECE;\r\n    };\r\n    BoardHelper.prototype.getCharPieceInPos = function (index, piecesString) {\r\n        return this.getCharPieceFromString(piecesString, index);\r\n    };\r\n    BoardHelper.prototype.getPieceByIndex = function (index, piecesString) {\r\n        var charCode = this.getCharPieceInPos(index, piecesString);\r\n        return {\r\n            isValidPiece: Piece_1.default.isValidPiece(charCode),\r\n            piece: Piece_1.default.fromCharCode(charCode),\r\n        };\r\n    };\r\n    BoardHelper.prototype.getPieceCanMovePoses = function (index, piece) {\r\n        var _this = this;\r\n        var pieceIndices = [];\r\n        mask[piece.type].forEach(function (_pos) {\r\n            var newIndex = _this.convertMask(new Point_1.default(_pos[0], _pos[1]), index, piece.color);\r\n            if (newIndex !== null) {\r\n                pieceIndices.push(newIndex);\r\n            }\r\n        });\r\n        return pieceIndices;\r\n    };\r\n    BoardHelper.prototype.getPieceCanMovePosesValid = function (index, piece, piecesString) {\r\n        var _poses = this.getPieceCanMovePoses(index, piece);\r\n        var pieceIndices = [];\r\n        var n = _poses.length;\r\n        var thisPos = Point_1.default.fromIndex(index);\r\n        for (var i = 0; i < n; i++) {\r\n            var p = Point_1.default.fromIndex(_poses[i]);\r\n            var distPiece = this.getPieceByIndex(p.index, piecesString);\r\n            if (distPiece.isValidPiece) {\r\n                if (distPiece.piece && piece.color === distPiece.piece.color ||\r\n                    (piece.isTypeFish && p.x === thisPos.x)) {\r\n                    p = null;\r\n                }\r\n            }\r\n            else {\r\n                if (piece.isTypeFish && p.x !== thisPos.x) {\r\n                    p = null;\r\n                }\r\n            }\r\n            if (p !== null && piece.isTypeBoat) {\r\n                var _x = thisPos.x;\r\n                var _y = thisPos.y;\r\n                if (p.x === thisPos.x) {\r\n                    var _n = Math.abs(p.y - thisPos.y);\r\n                    var _s = thisPos.y < p.y ? 1 : -1;\r\n                    while (--_n > 0) {\r\n                        if (this.getPieceByIndex(Point_1.default.xyToIndex(_x, _y + _s * _n), piecesString).isValidPiece) {\r\n                            p = null;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                else if (p.y === thisPos.y) {\r\n                    var _n = Math.abs(p.x - thisPos.x);\r\n                    var _s = thisPos.x < p.x ? 1 : -1;\r\n                    while (--_n > 0) {\r\n                        if (this.getPieceByIndex(Point_1.default.xyToIndex(_x + _s * _n, _y), piecesString).isValidPiece) {\r\n                            p = null;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (!jsis_1.default.isNull(p)) {\r\n                pieceIndices.push(_poses[i]);\r\n            }\r\n        }\r\n        return pieceIndices;\r\n    };\r\n    BoardHelper.prototype.replacePiecesStringAtIndex = function (piecesString, charCode, index) {\r\n        return piecesString.substring(0, index) + charCode + piecesString.substring(index + 1);\r\n    };\r\n    BoardHelper.prototype.injectPiece = function (piecesString, index1, index2) {\r\n        var c = piecesString[index1];\r\n        if (!this.isCharPiecesInBoard(c, piecesString)) {\r\n            return null;\r\n        }\r\n        piecesString = this.replacePiecesStringAtIndex(piecesString, constant_1.EMPTY_PIECE, index1);\r\n        piecesString = this.replacePiecesStringAtIndex(piecesString, c, index2);\r\n        return piecesString;\r\n    };\r\n    BoardHelper.prototype.getKingWillInDanger = function (color, piecesString) {\r\n        var kingPos = piecesString.indexOf(new Piece_1.default(constant_1.PIECE_TYPE_KING, color).pieceCharCode);\r\n        var n = piecesString.length;\r\n        for (var i = 0; i < n; i++) {\r\n            var p = this.getPieceByIndex(i, piecesString);\r\n            if (p.piece !== null && p.isValidPiece && p.piece.color !== color &&\r\n                p.piece.isTypeBoat) {\r\n                var _poses = this.getPieceCanMovePoses(i, p.piece);\r\n                for (var j = 0; j < _poses.length; j++) {\r\n                    if (_poses[j] === kingPos) {\r\n                        return [Point_1.default.fromIndex(i), Point_1.default.fromIndex(kingPos)];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    BoardHelper.prototype.getKingInDanger = function (color, piecesString) {\r\n        var kingPos = piecesString.indexOf(new Piece_1.default(constant_1.PIECE_TYPE_KING, color).pieceCharCode);\r\n        var n = piecesString.length;\r\n        for (var i = 0; i < n; i++) {\r\n            var p = this.getPieceByIndex(i, piecesString);\r\n            if (p.piece !== null && p.isValidPiece && p.piece.color !== color) {\r\n                var _poses = this.getPieceCanMovePosesValid(i, p.piece, piecesString);\r\n                for (var j = 0; j < _poses.length; j++) {\r\n                    if (_poses[j] === kingPos) {\r\n                        return [Point_1.default.fromIndex(i), Point_1.default.fromIndex(kingPos)];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    BoardHelper.prototype.genCanMovePointsByPiecePoint = function (index, piece, piecesString, isHasMoved) {\r\n        var _poses = this.getPieceCanMovePosesValid(index, piece, piecesString);\r\n        var isHaveCaptured = this.isHaveCaptured(piecesString);\r\n        if (piece.isTypeKing) {\r\n            if (!isHaveCaptured && !isHasMoved) {\r\n                var p = this.convertMask(new Point_1.default(2, 1), index, piece.color);\r\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\r\n                    _poses.push(p);\r\n                }\r\n                p = this.convertMask(new Point_1.default(-2, 1), index, piece.color);\r\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\r\n                    _poses.push(p);\r\n                }\r\n            }\r\n        }\r\n        else if (piece.isTypeQueen) {\r\n            if (!isHaveCaptured && !isHasMoved) {\r\n                var p = this.convertMask(new Point_1.default(-0, 2), index, piece.color);\r\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\r\n                    _poses.push(p);\r\n                }\r\n            }\r\n        }\r\n        var n = _poses.length;\r\n        var points = [];\r\n        for (var i = 0; i < n; i++) {\r\n            var str = this.injectPiece(piecesString, index, _poses[i]);\r\n            if (str !== null && this.getKingInDanger(piece.color, str) === null) {\r\n                points.push(Point_1.default.fromIndex(_poses[i]));\r\n            }\r\n        }\r\n        return points;\r\n    };\r\n    BoardHelper.prototype.isCharPiecesInBoard = function (code, piecesString) {\r\n        return !!~piecesString.indexOf(code);\r\n    };\r\n    BoardHelper.prototype.getPiecesInBoard = function (piecesString) {\r\n        return piecesString.split('').filter(function (charCode) {\r\n            return Piece_1.default.isValidPiece(charCode);\r\n        });\r\n    };\r\n    BoardHelper.prototype.isHaveCaptured = function (piecesString) {\r\n        return this.getPiecesInBoard(piecesString).length < constant_1.ROW_NUMBER * 4;\r\n    };\r\n    BoardHelper.prototype.filterPieceInBoard = function (piecesString) {\r\n        var whitePieces = [];\r\n        var blackPieces = [];\r\n        for (var i = 0; i < piecesString.length; i++) {\r\n            var charCode = piecesString[i];\r\n            if (Piece_1.default.isValidPiece(charCode)) {\r\n                var pieceIndex = new ren_1.PieceIndex(Point_1.default.fromIndex(i), Piece_1.default.fromCharCode(charCode));\r\n                if (pieceIndex.piece !== null && pieceIndex.piece.isColorWhite) {\r\n                    whitePieces.push(pieceIndex);\r\n                }\r\n                else {\r\n                    blackPieces.push(pieceIndex);\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            whitePieces: whitePieces,\r\n            blackPieces: blackPieces,\r\n        };\r\n    };\r\n    BoardHelper.prototype.extractPiecesToArray = function (piecesString) {\r\n        var _a;\r\n        var piecesStringArr = piecesString.split('');\r\n        var pieceAll = (_a = {},\r\n            _a[constant_1.PIECE_COLOR_BLACK] = [],\r\n            _a[constant_1.PIECE_COLOR_WHITE] = [],\r\n            _a);\r\n        piecesStringArr.forEach(function (charCode) {\r\n            if (charCode === constant_1.EMPTY_PIECE) {\r\n                return;\r\n            }\r\n            var piece = Piece_1.default.fromCharCode(charCode);\r\n            if (piece) {\r\n                pieceAll[piece.color].push(piece.type);\r\n            }\r\n        });\r\n        return pieceAll;\r\n    };\r\n    BoardHelper.prototype.isStateCount = function (c, piecesString) {\r\n        var allPieces = this.extractPiecesToArray(piecesString);\r\n        return allPieces[c].length === 1;\r\n    };\r\n    BoardHelper.prototype.checkCountable = function (color, piecesString) {\r\n        var pieceAll = this.extractPiecesToArray(piecesString);\r\n        var weaker = pieceAll[color];\r\n        var stronger = pieceAll[Piece_1.default.oppositeColor(color)];\r\n        return weaker.length <= 2 && stronger.length >= 2;\r\n    };\r\n    BoardHelper.prototype.checkCount = function (color, piecesString, force) {\r\n        var countChar = function (str, c) {\r\n            return str.join('').split(c).length - 1;\r\n        };\r\n        var charExist = function (str, c) {\r\n            return !!~str.indexOf(c);\r\n        };\r\n        var pieceAll = this.extractPiecesToArray(piecesString);\r\n        var weaker = pieceAll[color];\r\n        var stronger = pieceAll[Piece_1.default.oppositeColor(color)];\r\n        if (weaker.length === 1 && stronger.length > 1) {\r\n            if (!charExist(stronger, constant_1.PIECE_TYPE_FISH)) {\r\n                var count = 64;\r\n                var toukCount = countChar(stronger, constant_1.PIECE_TYPE_BOAT);\r\n                if (toukCount) {\r\n                    count = toukCount > 1 ? 8 : 16;\r\n                }\r\n                else if (countChar(stronger, constant_1.PIECE_TYPE_GENERAL) > 1) {\r\n                    count = 22;\r\n                }\r\n                else if (countChar(stronger, constant_1.PIECE_TYPE_HORSE) > 1) {\r\n                    count = 32;\r\n                }\r\n                else if (countChar(stronger, constant_1.PIECE_TYPE_GENERAL)) {\r\n                    count = 44;\r\n                }\r\n                // FIXME: when touk 2 and stronger.length > 8 => start > count\r\n                var start = stronger.length;\r\n                if (start > 4) {\r\n                    start = 4;\r\n                }\r\n                return new CountUpState(start, count);\r\n            }\r\n            return new CountUpState(0, 64);\r\n        }\r\n        else if (force && this.checkCountable(color, piecesString)) {\r\n            return new CountUpState(0, 64);\r\n        }\r\n        return null;\r\n    };\r\n    BoardHelper.prototype.isUpgradable = function (piece, point) {\r\n        if (piece.isTypeFish) {\r\n            if (piece.isColorBlack && point.y <= 2) {\r\n                return true;\r\n            }\r\n            if (piece.isColorWhite && point.y >= 5) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return BoardHelper;\r\n}());\r\n;\r\nexports.default = new BoardHelper();\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=boardHelper.js.map","\"use strict\";\r\nvar _a, _b, _c, _d;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.VERTICAL_NOTE_LETTERS_ENGLISH = exports.HORIZONTAL_NOTE_LETTERS_ENGLISH = exports.VERTICAL_NOTE_LETTERS = exports.HORIZONTAL_NOTE_LETTERS = exports.HORIZONTAL_CODE_LETTERS = exports.CELL_COUNT = exports.ROW_LAST_INDEX = exports.ROW_FIRST_INDEX = exports.ROW_NUMBER = exports.BOARD_SEPARATOR = exports.PIECE_COLOR_EMPTY = exports.EMPTY_PIECE = exports.PIECE_NAMES_ENGLISH = exports.PIECE_NAMES = exports.PIECE_TYPE_TRANSFORM_FISH = exports.PIECE_TYPE_FISH = exports.PIECE_TYPE_QUEEN = exports.PIECE_TYPE_KING = exports.PIECE_TYPE_GENERAL = exports.PIECE_TYPE_HORSE = exports.PIECE_TYPE_BOAT = exports.COLOR_NAMES_ENGLISH = exports.COLOR_NAMES = exports.PIECE_COLOR_BLACK = exports.PIECE_COLOR_WHITE = void 0;\r\nexports.PIECE_COLOR_WHITE = 'w';\r\nexports.PIECE_COLOR_BLACK = 'b';\r\nexports.COLOR_NAMES = (_a = {},\r\n    _a[exports.PIECE_COLOR_BLACK] = 'ខ្មៅ',\r\n    _a[exports.PIECE_COLOR_WHITE] = 'ស',\r\n    _a);\r\nexports.COLOR_NAMES_ENGLISH = (_b = {},\r\n    _b[exports.PIECE_COLOR_BLACK] = 'black',\r\n    _b[exports.PIECE_COLOR_WHITE] = 'white',\r\n    _b);\r\nexports.PIECE_TYPE_BOAT = 'b'; // Boat\r\nexports.PIECE_TYPE_HORSE = 'h'; // Horse\r\nexports.PIECE_TYPE_GENERAL = 'g'; // General\r\nexports.PIECE_TYPE_KING = 'k'; // King\r\nexports.PIECE_TYPE_QUEEN = 'q'; // Queen\r\nexports.PIECE_TYPE_FISH = 'f'; // Fish\r\nexports.PIECE_TYPE_TRANSFORM_FISH = 't'; // Transform fish\r\nexports.PIECE_NAMES = (_c = {},\r\n    _c[exports.PIECE_TYPE_BOAT] = 'ទូក',\r\n    _c[exports.PIECE_TYPE_HORSE] = 'សេះ',\r\n    _c[exports.PIECE_TYPE_GENERAL] = 'គោល',\r\n    _c[exports.PIECE_TYPE_KING] = 'ស្តេច',\r\n    _c[exports.PIECE_TYPE_QUEEN] = 'នាង',\r\n    _c[exports.PIECE_TYPE_FISH] = 'ត្រី',\r\n    _c[exports.PIECE_TYPE_TRANSFORM_FISH] = 'ត្រីបក',\r\n    _c);\r\nexports.PIECE_NAMES_ENGLISH = (_d = {},\r\n    _d[exports.PIECE_TYPE_BOAT] = 'boat',\r\n    _d[exports.PIECE_TYPE_HORSE] = 'horse',\r\n    _d[exports.PIECE_TYPE_GENERAL] = 'general',\r\n    _d[exports.PIECE_TYPE_KING] = 'king',\r\n    _d[exports.PIECE_TYPE_QUEEN] = 'queen',\r\n    _d[exports.PIECE_TYPE_FISH] = 'fish',\r\n    _d[exports.PIECE_TYPE_TRANSFORM_FISH] = 'transformed-fish',\r\n    _d);\r\nexports.EMPTY_PIECE = '.';\r\nexports.PIECE_COLOR_EMPTY = '.';\r\nexports.BOARD_SEPARATOR = '/';\r\nexports.ROW_NUMBER = 8;\r\nexports.ROW_FIRST_INDEX = 0;\r\nexports.ROW_LAST_INDEX = 7;\r\nexports.CELL_COUNT = exports.ROW_NUMBER * exports.ROW_NUMBER;\r\nexports.HORIZONTAL_CODE_LETTERS = 'abcdefgh';\r\nexports.HORIZONTAL_NOTE_LETTERS = ['ក', 'ខ', 'គ', 'ឃ', 'ង', 'ច', 'ឆ', 'ជ'];\r\nexports.VERTICAL_NOTE_LETTERS = ['០', '១', '២', '៣', '៤', '៥', '៦', '៧', '៨', '៩'];\r\nexports.HORIZONTAL_NOTE_LETTERS_ENGLISH = 'abcdefgh';\r\nexports.VERTICAL_NOTE_LETTERS_ENGLISH = Array.from({ length: 10 }, function (_, i) { return \"\" + i; });\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=constant.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"./constant\");\r\nfunction genMask() {\r\n    var mask = {};\r\n    mask[constant_1.PIECE_TYPE_BOAT] = [\r\n        [0, 1], [0, 2], [0, 3], [0, 4], [0, 5], [0, 6], [0, 7], [0, 8],\r\n        [0, -1], [0, -2], [0, -3], [0, -4], [0, -5], [0, -6], [0, -7], [0, -8],\r\n        [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n        [-1, 0], [-2, 0], [-3, 0], [-4, 0], [-5, 0], [-6, 0], [-7, 0], [-8, 0],\r\n    ];\r\n    mask[constant_1.PIECE_TYPE_HORSE] = [\r\n        [-1, -2],\r\n        [1, -2],\r\n        [-2, -1],\r\n        [2, -1],\r\n        [-1, 2],\r\n        [1, 2],\r\n        [-2, 1],\r\n        [2, 1],\r\n    ];\r\n    mask[constant_1.PIECE_TYPE_QUEEN] = [\r\n        [-1, -1],\r\n        [1, -1],\r\n        [-1, 1],\r\n        [1, 1],\r\n    ];\r\n    mask[constant_1.PIECE_TYPE_GENERAL] = mask[constant_1.PIECE_TYPE_QUEEN].concat([\r\n        [0, 1],\r\n    ]);\r\n    mask[constant_1.PIECE_TYPE_KING] = mask[constant_1.PIECE_TYPE_GENERAL].concat([\r\n        [0, -1],\r\n        [1, 0],\r\n        [-1, 0],\r\n    ]);\r\n    mask[constant_1.PIECE_TYPE_FISH] = [\r\n        [0, 1],\r\n        [-1, 1],\r\n        [1, 1],\r\n    ];\r\n    mask[constant_1.PIECE_TYPE_TRANSFORM_FISH] = mask[constant_1.PIECE_TYPE_QUEEN];\r\n    return mask;\r\n}\r\nexports.default = genMask;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=genMask.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MoveHelper = exports.HVPont = exports.jsis = exports.genMask = exports.boardHelper = exports.Rectangle = void 0;\r\nvar Rectangle_1 = require(\"./Rectangle\");\r\nObject.defineProperty(exports, \"Rectangle\", { enumerable: true, get: function () { return __importDefault(Rectangle_1).default; } });\r\nvar boardHelper_1 = require(\"./boardHelper\");\r\nObject.defineProperty(exports, \"boardHelper\", { enumerable: true, get: function () { return __importDefault(boardHelper_1).default; } });\r\nvar genMask_1 = require(\"./genMask\");\r\nObject.defineProperty(exports, \"genMask\", { enumerable: true, get: function () { return __importDefault(genMask_1).default; } });\r\nvar jsis_1 = require(\"./jsis\");\r\nObject.defineProperty(exports, \"jsis\", { enumerable: true, get: function () { return __importDefault(jsis_1).default; } });\r\nvar HVPont_1 = require(\"./HVPont\");\r\nObject.defineProperty(exports, \"HVPont\", { enumerable: true, get: function () { return __importDefault(HVPont_1).default; } });\r\nvar MoveHelper_1 = require(\"./MoveHelper\");\r\nObject.defineProperty(exports, \"MoveHelper\", { enumerable: true, get: function () { return __importDefault(MoveHelper_1).default; } });\r\n__exportStar(require(\"./constant\"), exports);\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar jsis = {\r\n    isValid: function (v) {\r\n        return !this.isNull(v) && !this.isUndefined(v);\r\n    },\r\n    isNull: function (v) {\r\n        return v === null;\r\n    },\r\n    isUndefined: function (v) {\r\n        return typeof v === 'undefined';\r\n    },\r\n    isString: function (str) {\r\n        return this.isValid(str) && typeof str === 'string';\r\n    },\r\n    isNotEmpty: function (str) {\r\n        // eslint-disable-next-line eqeqeq\r\n        return this.isValidString(str) && str != '';\r\n    },\r\n    isNumber: function (n) {\r\n        return this.isValid(n) && typeof n === 'number';\r\n    },\r\n    isStringNumber: function (n) {\r\n        // eslint-disable-next-line eqeqeq\r\n        return this.isString(n) && n != '' && !isNaN(Number(n));\r\n    },\r\n    isArray: function (arr) {\r\n        return this.isValid(arr) && arr instanceof Array;\r\n    },\r\n    isFunction: function (f) {\r\n        return this.isValid(f) && typeof f === 'function';\r\n    },\r\n    isObject: function (o) {\r\n        return this.isValid(o) && o instanceof Object;\r\n    },\r\n    isBoolean: function (b) {\r\n        return this.isValid(b) && typeof b === 'boolean';\r\n    },\r\n    isTrue: function (b) {\r\n        return this.isValidBoolean(b) && b;\r\n    },\r\n    isFalse: function (b) {\r\n        return this.isValidBoolean(b) && !b;\r\n    },\r\n    isPoint: function (p) {\r\n        var isPoint = this.isValid(p) &&\r\n            this.isValidObject(p) &&\r\n            this.isValidNumber(p.x) &&\r\n            this.isValidNumber(p.y);\r\n        return isPoint;\r\n    },\r\n    isSize: function (size) {\r\n        var isSize = this.isValid(size) &&\r\n            this.isValidObject(size) &&\r\n            this.isValidNumber(size.width) &&\r\n            this.isValidNumber(size.height);\r\n        return isSize;\r\n    },\r\n    isOdd: function (n) {\r\n        return !!(n % 2);\r\n    },\r\n    isEven: function (n) {\r\n        return !this.isOdd(n);\r\n    },\r\n    isUpperCase: function (str) {\r\n        return str === str.toUpperCase();\r\n    },\r\n};\r\nexports.default = jsis;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=jsis.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.KhmerChess = void 0;\r\n__exportStar(require(\"./brain\"), exports);\r\n__exportStar(require(\"./kpgn\"), exports);\r\n__exportStar(require(\"./ren\"), exports);\r\n__exportStar(require(\"./other\"), exports);\r\nvar KhmerChess_1 = require(\"./KhmerChess\");\r\nObject.defineProperty(exports, \"KhmerChess\", { enumerable: true, get: function () { return __importDefault(KhmerChess_1).default; } });\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Captured = /** @class */ (function () {\r\n    function Captured(_a) {\r\n        var piece = _a.piece, fromBoardPoint = _a.fromBoardPoint, toGraveyardPoint = _a.toGraveyardPoint;\r\n        this.piece = piece;\r\n        this.fromBoardPoint = fromBoardPoint;\r\n        this.toGraveyardPoint = toGraveyardPoint;\r\n    }\r\n    return Captured;\r\n}());\r\nexports.default = Captured;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Captured.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar REN_1 = __importDefault(require(\"../ren/REN\"));\r\nvar Move_1 = __importDefault(require(\"./Move\"));\r\nvar Player_1 = __importDefault(require(\"./Player\"));\r\nvar Result_1 = __importDefault(require(\"./Result\"));\r\nvar Timer_1 = __importDefault(require(\"./Timer\"));\r\nvar base64Helper_1 = __importDefault(require(\"../other/base64Helper\"));\r\nvar KPGN = /** @class */ (function () {\r\n    function KPGN(ren) {\r\n        this.event = '';\r\n        this.date = null;\r\n        this.location = '';\r\n        this.players = {\r\n            white: new Player_1.default({}),\r\n            black: new Player_1.default({}),\r\n        };\r\n        this.result = {\r\n            last: {\r\n                whiteWin: false,\r\n                blackWin: false,\r\n            },\r\n            white: new Result_1.default({}),\r\n        };\r\n        this.timer = new Timer_1.default({});\r\n        this.ren = ren;\r\n        this.moves = [];\r\n    }\r\n    Object.defineProperty(KPGN.prototype, \"isCanMoveNext\", {\r\n        get: function () {\r\n            var _a;\r\n            return ((_a = this.latestMove) === null || _a === void 0 ? void 0 : _a.isCanMoveNext) && this.ren.isCanMoveNext;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(KPGN.prototype, \"latestMove\", {\r\n        get: function () {\r\n            return this.moves[this.moves.length - 1] || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    KPGN.prototype.addMove = function (move) {\r\n        if (move) {\r\n            this.moves.push(move);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    KPGN.prototype.getMove = function (index) {\r\n        return this.moves[index] || null;\r\n    };\r\n    KPGN.prototype.loadRENStr = function (renStr) {\r\n        this.ren = REN_1.default.fromString(renStr);\r\n        if (this.latestMove) {\r\n            this.ren.syncWithMove(this.latestMove);\r\n        }\r\n    };\r\n    KPGN.prototype.loadMovesStrings = function (moves) {\r\n        var currentRen = this.ren;\r\n        this.moves = moves.reverse().map(function (moveStr) {\r\n            var move = Move_1.default.fromString(moveStr, currentRen);\r\n            if (move === null) {\r\n                throw new Error('Invalid move string');\r\n            }\r\n            currentRen = currentRen.backRen(move);\r\n            return move;\r\n        }).reverse();\r\n        if (this.latestMove) {\r\n            this.ren.syncWithMove(this.latestMove);\r\n        }\r\n    };\r\n    KPGN.prototype.fromJson = function (option) {\r\n        try {\r\n            var ren = option.ren, moves = option.moves, timer = option.timer, result = option.result, players = option.players, location = option.location, date = option.date, event = option.event;\r\n            this.event = event || this.event;\r\n            this.date = date ? new Date(date) : this.date;\r\n            this.location = location || this.location;\r\n            if (players) {\r\n                this.players = {\r\n                    white: new Player_1.default(players.white),\r\n                    black: new Player_1.default(players.black),\r\n                };\r\n            }\r\n            if (result) {\r\n                this.result = {\r\n                    last: result.last,\r\n                    white: new Result_1.default(result.white),\r\n                };\r\n            }\r\n            this.ren = REN_1.default.fromString(ren || '');\r\n            this.loadMovesStrings(moves || []);\r\n            this.timer = new Timer_1.default(timer || {});\r\n            return true;\r\n        }\r\n        catch (error) {\r\n            console.log(error);\r\n            return false;\r\n        }\r\n    };\r\n    KPGN.prototype.toJson = function () {\r\n        var renStr = this.ren.toString();\r\n        if (this.latestMove) {\r\n            renStr = this.latestMove.renStr;\r\n        }\r\n        return {\r\n            event: this.event,\r\n            date: this.date ? this.date.toString() : '',\r\n            location: this.location,\r\n            players: {\r\n                white: this.players.white.toJson(),\r\n                black: this.players.black.toJson(),\r\n            },\r\n            result: {\r\n                last: {\r\n                    whiteWin: this.result.last.whiteWin,\r\n                    blackWin: this.result.last.blackWin,\r\n                },\r\n                white: this.result.white.toJson(),\r\n            },\r\n            timer: this.timer.toJson(),\r\n            moves: this.moves.map(function (m) { return m.toString(); }),\r\n            ren: renStr,\r\n        };\r\n    };\r\n    KPGN.prototype.fromBase64 = function (str) {\r\n        var json = JSON.parse(base64Helper_1.default.decode(str));\r\n        return this.fromJson(json);\r\n    };\r\n    KPGN.prototype.toBase64 = function () {\r\n        var jsStr = JSON.stringify(this.toJson());\r\n        return base64Helper_1.default.encode(jsStr);\r\n    };\r\n    return KPGN;\r\n}());\r\nexports.default = KPGN;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=KPGN.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar brain_1 = require(\"../brain\");\r\nvar ren_1 = require(\"../ren\");\r\nvar constant_1 = require(\"../ren/constant\");\r\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\r\nvar Point_1 = __importDefault(require(\"../ren/Point\"));\r\nvar Captured_1 = __importDefault(require(\"./Captured\"));\r\nvar Move = /** @class */ (function () {\r\n    function Move(_a) {\r\n        var piece = _a.piece, moveFrom = _a.moveFrom, moveTo = _a.moveTo, isUpgrading = _a.isUpgrading, captured = _a.captured;\r\n        this.boardStatus = {\r\n            attacker: null,\r\n            winColor: null,\r\n            stuckColor: null,\r\n            drawCountColor: null,\r\n        };\r\n        this.isStartCounting = false;\r\n        this.piece = piece;\r\n        this.moveFrom = moveFrom;\r\n        this.moveTo = moveTo;\r\n        this.isUpgrading = !!isUpgrading;\r\n        this.captured = captured || null;\r\n        if (brain_1.boardHelper.isUpgradable(piece, moveTo)) {\r\n            this.isUpgrading = true;\r\n            piece.upgrade();\r\n        }\r\n        this.kqJumping = new ren_1.KqJumped();\r\n    }\r\n    Move.prototype.setRen = function (ren) {\r\n        ren.checkBoardStatus(this);\r\n        ren.kqJumped.checkKQMoved(this);\r\n        ren.checkCountStatus(this);\r\n    };\r\n    Move.prototype.syncRen = function (ren) {\r\n        this.renStr = ren.toString();\r\n    };\r\n    Object.defineProperty(Move.prototype, \"isCanMoveNext\", {\r\n        get: function () {\r\n            return !(this.boardStatus.drawCountColor || this.boardStatus.winColor || this.boardStatus.stuckColor);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isWhiteKingJumping\", {\r\n        get: function () {\r\n            return !!this.kqJumping.whiteKing;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isWhiteQueenJumping\", {\r\n        get: function () {\r\n            return !!this.kqJumping.whiteQueen;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isBlackKingJumping\", {\r\n        get: function () {\r\n            return !!this.kqJumping.blackKing;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isBlackQueenJumping\", {\r\n        get: function () {\r\n            return !!this.kqJumping.blackQueen;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"attacker\", {\r\n        get: function () {\r\n            return this.boardStatus.attacker || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"winColor\", {\r\n        get: function () {\r\n            return this.boardStatus.winColor || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"stuckColor\", {\r\n        get: function () {\r\n            return this.boardStatus.stuckColor || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"drawCountColor\", {\r\n        get: function () {\r\n            return this.boardStatus.drawCountColor || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isDraw\", {\r\n        get: function () {\r\n            return this.stuckColor || this.drawCountColor;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isGameOver\", {\r\n        get: function () {\r\n            return this.winColor || this.isDraw;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Move.fromString = function (str, ren) {\r\n        var piece = Piece_1.default.fromCharCode(str[0]);\r\n        if (piece === null) {\r\n            return null;\r\n        }\r\n        var moveFrom = Point_1.default.fromIndexCode(str.substr(1, 2));\r\n        var moveTo = Point_1.default.fromIndexCode(str.substr(3, 2));\r\n        var move = new Move({\r\n            piece: piece,\r\n            moveFrom: moveFrom,\r\n            moveTo: moveTo,\r\n        });\r\n        var killIndex = str.indexOf(constant_1.PIECE_FLAG_KILL);\r\n        if (!!~killIndex) {\r\n            var match = str.substr(killIndex + 1).match(/^(\\d+)/);\r\n            if (match === null) {\r\n                return null;\r\n            }\r\n            var gyIndex = Number(match[1]);\r\n            var capturedPiece = ren.graveyard.get(gyIndex);\r\n            if (!capturedPiece) {\r\n                throw new Error('Invalid captured index');\r\n            }\r\n            move.captured = new Captured_1.default({\r\n                fromBoardPoint: moveTo,\r\n                toGraveyardPoint: Point_1.default.fromIndexGraveyardIndex(gyIndex),\r\n                piece: capturedPiece,\r\n            });\r\n        }\r\n        var jumpingIndex = str.indexOf(constant_1.PIECE_FLAG_JUMP);\r\n        if (!!~jumpingIndex) {\r\n            var match = str.substr(jumpingIndex + 1).match(/^(\\d+)/);\r\n            if (match === null) {\r\n                return null;\r\n            }\r\n            var n = Number(match[1]);\r\n            move.kqJumping = ren_1.KqJumped.fromNumber(n);\r\n        }\r\n        var startCountingIndex = str.indexOf(constant_1.PIECE_FLAG_START_COUNTING);\r\n        if (!!~startCountingIndex) {\r\n            move.isStartCounting = true;\r\n        }\r\n        move.setRen(ren);\r\n        return move;\r\n    };\r\n    Move.prototype.toString = function () {\r\n        var pCode = this.piece.pieceCharCode;\r\n        var fIndexCode = this.moveFrom.indexCode;\r\n        var tIndexCode = this.moveTo.indexCode;\r\n        var flags = '';\r\n        if (this.captured) {\r\n            flags += constant_1.PIECE_FLAG_KILL + this.captured.toGraveyardPoint.index;\r\n        }\r\n        if (this.kqJumping.isJumped) {\r\n            flags += constant_1.PIECE_FLAG_JUMP + this.kqJumping.toNumber();\r\n        }\r\n        if (this.isUpgrading) {\r\n            flags += constant_1.PIECE_FLAG_UPGRADE;\r\n        }\r\n        if (this.isStartCounting) {\r\n            flags += constant_1.PIECE_FLAG_START_COUNTING;\r\n        }\r\n        return \"\" + pCode + fIndexCode + tIndexCode + flags;\r\n    };\r\n    Move.prototype.getJumpingMessage = function (isEnglish) {\r\n        var jump = '';\r\n        if (isEnglish) {\r\n            if (this.isWhiteKingJumping) {\r\n                jump += ' white king jumping';\r\n            }\r\n            if (this.isWhiteQueenJumping) {\r\n                jump += ' white queen jumping';\r\n            }\r\n            if (this.isBlackKingJumping) {\r\n                jump += ' black king jumping';\r\n            }\r\n            if (this.isBlackQueenJumping) {\r\n                jump += ' black queen jumping';\r\n            }\r\n        }\r\n        else {\r\n            if (this.isWhiteKingJumping) {\r\n                jump += ' ស្តេច​ស​ភ្លោះ';\r\n            }\r\n            if (this.isWhiteQueenJumping) {\r\n                jump += ' នាង​ស​ភ្លោះ';\r\n            }\r\n            if (this.isBlackKingJumping) {\r\n                jump += ' ស្តេច​ខ្មៅ​ភ្លោះ';\r\n            }\r\n            if (this.isBlackQueenJumping) {\r\n                jump += ' នាង​ខ្មៅ​ភ្លោះ';\r\n            }\r\n        }\r\n        return jump;\r\n    };\r\n    Move.prototype.getMessage = function (isEnglish) {\r\n        if (isEnglish) {\r\n            var captured = '';\r\n            if (this.captured) {\r\n                captured = \" captures \" + this.captured.piece.titleEnglish;\r\n            }\r\n            var upgrade = this.isUpgrading ? ' transforms' : '';\r\n            var jump = this.getJumpingMessage(isEnglish);\r\n            return this.piece.titleEnglish + \" moved from \" + this.moveFrom.titleEnglish + \" to \" + this.moveTo.titleEnglish + upgrade + captured + \" \" + jump;\r\n        }\r\n        else {\r\n            var captured = '';\r\n            if (this.captured) {\r\n                captured = \" \\u179F\\u17CA\\u17B8\" + this.captured.piece.title;\r\n            }\r\n            var upgrade = this.isUpgrading ? ' បក' : '';\r\n            var jump = this.getJumpingMessage(isEnglish);\r\n            return this.piece.title + \" \\u178A\\u17BE\\u179A\\u200B\\u1796\\u17B8 \" + this.moveFrom.title + \" \\u1791\\u17C5 \" + this.moveTo.title + upgrade + captured + \" \" + jump;\r\n        }\r\n    };\r\n    return Move;\r\n}());\r\nexports.default = Move;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Move.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Player = /** @class */ (function () {\r\n    function Player(_a) {\r\n        var id = _a.id, name = _a.name;\r\n        this.id = id || '';\r\n        this.name = name || '';\r\n    }\r\n    Player.prototype.toJson = function () {\r\n        return {\r\n            id: this.id,\r\n            name: this.name,\r\n        };\r\n    };\r\n    return Player;\r\n}());\r\nexports.default = Player;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Player.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Result = /** @class */ (function () {\r\n    function Result(_a) {\r\n        var win = _a.win, draw = _a.draw, lost = _a.lost;\r\n        this.win = win || 0;\r\n        this.draw = draw || 0;\r\n        this.lost = lost || 0;\r\n    }\r\n    Result.prototype.toJson = function () {\r\n        return {\r\n            win: this.win,\r\n            draw: this.draw,\r\n            lost: this.lost,\r\n        };\r\n    };\r\n    return Result;\r\n}());\r\nexports.default = Result;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Result.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Timer = /** @class */ (function () {\r\n    function Timer(_a) {\r\n        var totalSecond = _a.totalSecond, bonusTime = _a.bonusTime, currentWhite = _a.currentWhite, currentBlack = _a.currentBlack;\r\n        this.bonusTime = bonusTime || 0;\r\n        this.totalSecond = totalSecond || 0;\r\n        this.currentWhite = currentWhite || 0;\r\n        this.currentBlack = currentBlack || 0;\r\n    }\r\n    Timer.prototype.fromJson = function () {\r\n    };\r\n    Timer.prototype.toJson = function () {\r\n        return {\r\n            totalSecond: this.totalSecond,\r\n            bonusTime: this.bonusTime,\r\n            currentWhite: this.currentWhite,\r\n            currentBlack: this.currentBlack,\r\n        };\r\n    };\r\n    return Timer;\r\n}());\r\nexports.default = Timer;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Timer.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Timer = exports.Result = exports.Player = exports.Captured = exports.Move = exports.KPGN = void 0;\r\nvar KPGN_1 = require(\"./KPGN\");\r\nObject.defineProperty(exports, \"KPGN\", { enumerable: true, get: function () { return __importDefault(KPGN_1).default; } });\r\nvar Move_1 = require(\"./Move\");\r\nObject.defineProperty(exports, \"Move\", { enumerable: true, get: function () { return __importDefault(Move_1).default; } });\r\nvar Captured_1 = require(\"./Captured\");\r\nObject.defineProperty(exports, \"Captured\", { enumerable: true, get: function () { return __importDefault(Captured_1).default; } });\r\nvar Player_1 = require(\"./Player\");\r\nObject.defineProperty(exports, \"Player\", { enumerable: true, get: function () { return __importDefault(Player_1).default; } });\r\nvar Result_1 = require(\"./Result\");\r\nObject.defineProperty(exports, \"Result\", { enumerable: true, get: function () { return __importDefault(Result_1).default; } });\r\nvar Timer_1 = require(\"./Timer\");\r\nObject.defineProperty(exports, \"Timer\", { enumerable: true, get: function () { return __importDefault(Timer_1).default; } });\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar EventHandler = /** @class */ (function () {\r\n    function EventHandler(options) {\r\n        this._onEventListeners = {};\r\n        this._propEvent = [];\r\n        this._onEventListeners = {};\r\n        this._propEvent = [];\r\n        this.events = options.events;\r\n    }\r\n    EventHandler.prototype._checkPropEvent = function () {\r\n        if (this._isLockProp) {\r\n            return;\r\n        }\r\n        while (this._propEvent.length) {\r\n            var event = this._propEvent.shift();\r\n            this._checkOnEvent(event.name, event.data);\r\n        }\r\n    };\r\n    EventHandler.prototype._addPropEvent = function (event, data) {\r\n        this._propEvent.push({\r\n            name: event,\r\n            data: data,\r\n        });\r\n        this._checkPropEvent();\r\n    };\r\n    EventHandler.prototype._guardEventName = function (eventName) {\r\n        if (!eventName) {\r\n            throw new Error('invalid event name');\r\n        }\r\n    };\r\n    EventHandler.prototype._checkOnEvent = function (eventName, data) {\r\n        this._guardEventName(eventName);\r\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\r\n        this._onEventListeners[eventName].forEach(function (listener) {\r\n            listener(data);\r\n        });\r\n    };\r\n    EventHandler.prototype._addOnEventListener = function (eventName, listener) {\r\n        this._guardEventName(eventName);\r\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\r\n        this._onEventListeners[eventName].push(listener);\r\n    };\r\n    EventHandler.prototype._removeOnEventListener = function (eventName, listener) {\r\n        this._guardEventName(eventName);\r\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\r\n        var index = this._onEventListeners[eventName].indexOf(listener);\r\n        ~index && this._onEventListeners[eventName].splice(index, 1);\r\n    };\r\n    return EventHandler;\r\n}());\r\nexports.default = EventHandler;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=EventHandler.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// https://stackoverflow.com/questions/246801/how-can-you-encode-a-string-to-base64-in-javascript\r\n/**\r\n*\r\n*  Base64 encode / decode\r\n*  http://www.webtoolkit.info/\r\n*\r\n**/\r\nvar Base64 = {\r\n    // private property\r\n    _keyStr: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\r\n    // public method for encoding\r\n    encode: function (input) {\r\n        var output = '';\r\n        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n        var i = 0;\r\n        input = Base64._utf8_encode(input);\r\n        while (i < input.length) {\r\n            chr1 = input.charCodeAt(i++);\r\n            chr2 = input.charCodeAt(i++);\r\n            chr3 = input.charCodeAt(i++);\r\n            enc1 = chr1 >> 2;\r\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n            enc4 = chr3 & 63;\r\n            if (isNaN(chr2)) {\r\n                enc3 = enc4 = 64;\r\n            }\r\n            else if (isNaN(chr3)) {\r\n                enc4 = 64;\r\n            }\r\n            output = output +\r\n                this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\r\n                this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\r\n        }\r\n        return output;\r\n    },\r\n    // public method for decoding\r\n    decode: function (input) {\r\n        var output = '';\r\n        var chr1, chr2, chr3;\r\n        var enc1, enc2, enc3, enc4;\r\n        var i = 0;\r\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\r\n        while (i < input.length) {\r\n            enc1 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc2 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc3 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc4 = this._keyStr.indexOf(input.charAt(i++));\r\n            chr1 = (enc1 << 2) | (enc2 >> 4);\r\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n            chr3 = ((enc3 & 3) << 6) | enc4;\r\n            output = output + String.fromCharCode(chr1);\r\n            if (enc3 != 64) {\r\n                output = output + String.fromCharCode(chr2);\r\n            }\r\n            if (enc4 != 64) {\r\n                output = output + String.fromCharCode(chr3);\r\n            }\r\n        }\r\n        output = Base64._utf8_decode(output);\r\n        return output;\r\n    },\r\n    // private method for UTF-8 encoding\r\n    _utf8_encode: function (string) {\r\n        string = string.replace(/\\r\\n/g, '\\n');\r\n        var utftext = '';\r\n        for (var n = 0; n < string.length; n++) {\r\n            var c = string.charCodeAt(n);\r\n            if (c < 128) {\r\n                utftext += String.fromCharCode(c);\r\n            }\r\n            else if ((c > 127) && (c < 2048)) {\r\n                utftext += String.fromCharCode((c >> 6) | 192);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n            else {\r\n                utftext += String.fromCharCode((c >> 12) | 224);\r\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n        }\r\n        return utftext;\r\n    },\r\n    // private method for UTF-8 decoding\r\n    _utf8_decode: function (utftext) {\r\n        var string = '';\r\n        var i = 0;\r\n        var c, c1, c2 = 0;\r\n        c = c1 = c2 = 0;\r\n        while (i < utftext.length) {\r\n            c = utftext.charCodeAt(i);\r\n            if (c < 128) {\r\n                string += String.fromCharCode(c);\r\n                i++;\r\n            }\r\n            else if ((c > 191) && (c < 224)) {\r\n                c1 = utftext.charCodeAt(i + 1);\r\n                string += String.fromCharCode(((c & 31) << 6) | (c1 & 63));\r\n                i += 2;\r\n            }\r\n            else {\r\n                c1 = utftext.charCodeAt(i + 1);\r\n                c2 = utftext.charCodeAt(i + 2);\r\n                string += String.fromCharCode(((c & 15) << 12) | ((c1 & 63) << 6) | (c2 & 63));\r\n                i += 3;\r\n            }\r\n        }\r\n        return string;\r\n    },\r\n};\r\nexports.default = Base64;\r\n//# sourceMappingURL=base64Helper.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.table = exports.EventHandler = void 0;\r\nvar EventHandler_1 = require(\"./EventHandler\");\r\nObject.defineProperty(exports, \"EventHandler\", { enumerable: true, get: function () { return __importDefault(EventHandler_1).default; } });\r\nvar table_1 = require(\"./table\");\r\nObject.defineProperty(exports, \"table\", { enumerable: true, get: function () { return __importDefault(table_1).default; } });\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction asciiTable(ren) {\r\n    var arr = ren.board.piecesMultiArray;\r\n    var str = '  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓';\r\n    var result = arr.reverse().reduce(function (s, subArr, i) {\r\n        var rs = subArr.map(function (p) { return \" \" + (p ? p.pieceCharCode : ' ') + \" \"; }).join('┃');\r\n        var bottom = i === arr.length - 1 ? '┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛' : '┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫';\r\n        s += \"\\n\" + (8 - i) + \" \\u2503\" + rs + \"\\u2503\\n  \" + bottom;\r\n        return s;\r\n    }, str);\r\n    var gyTStr = ren.graveyard.pieces.map(function () { return '━━━'; }).join('┳');\r\n    var gyStr = ren.graveyard.pieces.map(function (p) { return \" \" + (p ? p.pieceCharCode : ' ') + \" \"; }).join('┃');\r\n    var gyBStr = ren.graveyard.pieces.map(function () { return '━━━'; }).join('┻');\r\n    var graveyardStr = \"  \\u250F\" + gyTStr + \"\\u2513\\n  \\u2503\" + gyStr + \"\\u2503\\n  \\u2517\" + gyBStr + \"\\u251B\";\r\n    return result + \"\\n    a   b   c   d   e   f   g   h\\n\" + graveyardStr;\r\n}\r\nexports.default = asciiTable;\r\n/*\r\n  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓\r\n8 ┃   ┃   ┃   ┃   ┃ k ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n7 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n6 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n5 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n4 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n3 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n2 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n1 ┃   ┃   ┃   ┃ K ┃   ┃   ┃   ┃   ┃\r\n  ┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛\r\n    a   b   c   d   e   f   g   h\r\n  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓\r\n  ┃ b ┃ h ┃ g ┃ q ┃ g ┃ h ┃ b ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ B ┃ H ┃ G ┃ Q ┃ G ┃ H ┃ B ┃\r\n  ┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛\r\n */\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=table.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Piece_1 = __importDefault(require(\"./Piece\"));\r\nvar PieceIndex_1 = __importDefault(require(\"./PieceIndex\"));\r\nvar constant_1 = require(\"./constant\");\r\nvar constant_2 = require(\"../brain/constant\");\r\nvar Point_1 = __importDefault(require(\"./Point\"));\r\n/**\r\n * BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb => bhgqkghb/......../ffffffff/......../......../FFFFFFFF/......../BHGKQGHB\r\n */\r\nvar Board = /** @class */ (function () {\r\n    function Board(boardStr) {\r\n        this.pieceIndices = Array.from({\r\n            length: constant_2.CELL_COUNT,\r\n        }, function (_, i) {\r\n            var point = Point_1.default.fromIndex(i);\r\n            return new PieceIndex_1.default(point, null);\r\n        });\r\n        if (!boardStr) {\r\n            boardStr = constant_1.DEFAULT_BOARD_STR;\r\n        }\r\n        var newBoardStr = this.extract(boardStr).replace(/\\//g, '');\r\n        if (newBoardStr.length < constant_2.CELL_COUNT ||\r\n            !Piece_1.default.isValidPiecesString(newBoardStr)) {\r\n            throw new Error(\"Invalid board string \" + boardStr);\r\n        }\r\n        this.pieceIndices = newBoardStr.split('').map(function (charCode, i) {\r\n            var point = Point_1.default.fromIndex(i);\r\n            return new PieceIndex_1.default(point, charCode === constant_2.EMPTY_PIECE ? null : Piece_1.default.fromCharCode(charCode));\r\n        });\r\n    }\r\n    Object.defineProperty(Board.prototype, \"piecesMultiArray\", {\r\n        get: function () {\r\n            var arr = [[], [], [], [], [], [], [], []];\r\n            this.pieceIndices.forEach(function (pieceIndex) {\r\n                if (pieceIndex.piece !== null) {\r\n                    arr[pieceIndex.point.y][pieceIndex.point.x] = pieceIndex.piece;\r\n                }\r\n            });\r\n            return arr;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Board.prototype, \"pieces\", {\r\n        get: function () {\r\n            return this.pieceIndices.map(function (pieceIndex) {\r\n                return pieceIndex.piece;\r\n            });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Board.prototype, \"whiteKing\", {\r\n        get: function () {\r\n            return this.pieceIndices.find(function (pieceIndex) {\r\n                return pieceIndex.piece && pieceIndex.piece.isTypeKing && pieceIndex.piece.isColorWhite;\r\n            });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Board.prototype, \"blackKing\", {\r\n        get: function () {\r\n            return this.pieceIndices.find(function (pieceIndex) {\r\n                return pieceIndex.piece && pieceIndex.piece.isTypeKing && pieceIndex.piece.isColorBlack;\r\n            });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Board.prototype.getKing = function (color) {\r\n        return Piece_1.default.isWhiteColor(color) ? this.whiteKing : this.blackKing;\r\n    };\r\n    Board.prototype.compress = function (str) {\r\n        var reg = new RegExp(\"(\\\\\" + constant_2.EMPTY_PIECE + \"+)\", 'g');\r\n        return str.replace(reg, function ($1) { return $1.length; });\r\n    };\r\n    Board.prototype.extract = function (str) {\r\n        return str.replace(/(\\d+)/g, function ($1) {\r\n            // $1 == 3 => '...', bh6 => 'bh......'\r\n            return Array.from({\r\n                length: $1,\r\n            }, function () { return constant_2.EMPTY_PIECE; }).join('');\r\n        });\r\n    };\r\n    Board.prototype.toStringFull = function (pieceIndices) {\r\n        if (pieceIndices === void 0) { pieceIndices = this.pieceIndices; }\r\n        var str = pieceIndices.map(function (pieceIndex, i) {\r\n            var p = pieceIndex.toPieceCharCode();\r\n            if (i && i % constant_2.ROW_NUMBER === 0 && i !== constant_2.CELL_COUNT) {\r\n                return \"\" + constant_2.BOARD_SEPARATOR + p;\r\n            }\r\n            return p;\r\n        }).join('');\r\n        return str;\r\n    };\r\n    Board.prototype.toStringFullNoSeparate = function () {\r\n        var str = this.toStringFull();\r\n        str = str.replace(/\\//g, '');\r\n        return str;\r\n    };\r\n    Board.prototype.toString = function (pieceIndices) {\r\n        var str = this.toStringFull(pieceIndices);\r\n        str = this.compress(str);\r\n        return str;\r\n    };\r\n    Board.prototype.getPieceAtIndex = function (index) {\r\n        return this.pieceIndices[index].piece;\r\n    };\r\n    Board.prototype.setPieceAtIndex = function (index, piece) {\r\n        this.pieceIndices[index].piece = piece;\r\n    };\r\n    return Board;\r\n}());\r\nexports.default = Board;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Board.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar brain_1 = require(\"../brain\");\r\nvar constant_1 = require(\"./constant\");\r\n// 23.-\r\nvar CountUp = /** @class */ (function () {\r\n    function CountUp() {\r\n        this.countingToNumber = null;\r\n        this.countingNumber = null;\r\n        this.isCountingUp = false;\r\n        this.color = null;\r\n    }\r\n    Object.defineProperty(CountUp.prototype, \"isWhite\", {\r\n        get: function () {\r\n            return this.color === brain_1.PIECE_COLOR_WHITE;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CountUp.prototype, \"isBlack\", {\r\n        get: function () {\r\n            return this.color === brain_1.PIECE_COLOR_BLACK;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CountUp.prototype, \"isWhiteCounting\", {\r\n        get: function () {\r\n            return this.isCounting && this.isWhite;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CountUp.prototype, \"isBlackCounting\", {\r\n        get: function () {\r\n            return this.isCounting && !this.isWhite;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CountUp.prototype, \"isCounting\", {\r\n        get: function () {\r\n            return this.countingToNumber !== null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CountUp.prototype, \"isCountingOut\", {\r\n        get: function () {\r\n            if (!this.isCounting || this.countingNumber === null ||\r\n                this.countingToNumber === null) {\r\n                return false;\r\n            }\r\n            return this.countingNumber >= this.countingToNumber;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CountUp.prototype.set = function (color, countingToNumber, countingNumber) {\r\n        this.color = color;\r\n        this.countingToNumber = countingToNumber;\r\n        this.countingNumber = countingNumber;\r\n    };\r\n    CountUp.prototype.clear = function () {\r\n        this.color = null;\r\n        this.countingToNumber = null;\r\n        this.countingNumber = null;\r\n    };\r\n    CountUp.prototype.checkUp = function (color) {\r\n        if (this.countingNumber !== null && color === this.color) {\r\n            this.countingNumber++;\r\n            this.isCountingUp = true;\r\n        }\r\n        else {\r\n            this.isCountingUp = false;\r\n        }\r\n    };\r\n    CountUp.fromString = function (countUpStr) {\r\n        if (!countUpStr) {\r\n            countUpStr = constant_1.NOT_SET + \".\" + constant_1.NOT_SET + \"@\" + constant_1.NOT_SET;\r\n        }\r\n        var countUp = new CountUp();\r\n        var countingUp = countUpStr.split('@');\r\n        if (countingUp[1] !== constant_1.NOT_SET) {\r\n            countUp.countingToNumber = Number(countingUp[1]);\r\n        }\r\n        var countingUpWB = countingUp[0].split('.');\r\n        if (countingUpWB[0] !== constant_1.NOT_SET) {\r\n            countUp.color = brain_1.PIECE_COLOR_WHITE;\r\n            countUp.countingNumber = Number(countingUpWB[0]);\r\n        }\r\n        if (countingUpWB[1] !== constant_1.NOT_SET) {\r\n            countUp.color = brain_1.PIECE_COLOR_BLACK;\r\n            countUp.countingNumber = Number(countingUpWB[1]);\r\n        }\r\n        return countUp;\r\n    };\r\n    CountUp.prototype.toString = function () {\r\n        var whiteCountingDow = this.isCounting && this.isWhite ? this.countingNumber : constant_1.NOT_SET;\r\n        var blackCountingDow = this.isCounting && !this.isWhite ? this.countingNumber : constant_1.NOT_SET;\r\n        var str = \"\" + whiteCountingDow;\r\n        str += \".\" + blackCountingDow;\r\n        str += \"@\" + (this.isCounting ? this.countingToNumber : constant_1.NOT_SET);\r\n        return str;\r\n    };\r\n    return CountUp;\r\n}());\r\nexports.default = CountUp;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=CountUp.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Piece_1 = __importDefault(require(\"./Piece\"));\r\nvar Graveyard = /** @class */ (function () {\r\n    function Graveyard(graveyardStr) {\r\n        this.pieces = [];\r\n        if (graveyardStr) {\r\n            if (graveyardStr.length > 30 ||\r\n                !Piece_1.default.isValidPiecesString(graveyardStr, true)) {\r\n                throw new Error(\"Invalid graveyard string \" + graveyardStr);\r\n            }\r\n            this.pieces = graveyardStr.split('').map(function (charCode, i) {\r\n                var p = Piece_1.default.fromCharCode(charCode);\r\n                return p;\r\n            }).filter(function (piece) {\r\n                return piece !== null;\r\n            });\r\n        }\r\n    }\r\n    Object.defineProperty(Graveyard.prototype, \"lastIndex\", {\r\n        get: function () {\r\n            return this.pieces.length - 1;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Graveyard.prototype.get = function (index) {\r\n        return this.pieces[index];\r\n    };\r\n    Graveyard.prototype.removeAtIndex = function (index) {\r\n        if (!!this.get(index)) {\r\n            this.pieces.splice(index, 1);\r\n        }\r\n        return true;\r\n    };\r\n    Graveyard.prototype.toString = function () {\r\n        return this.pieces.map(function (p) {\r\n            return p.pieceCharCode;\r\n        }).join('');\r\n    };\r\n    return Graveyard;\r\n}());\r\nexports.default = Graveyard;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Graveyard.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"../brain/constant\");\r\nvar constant_2 = require(\"./constant\");\r\nvar Piece_1 = __importDefault(require(\"./Piece\"));\r\n/**\r\n * King has attacked, this will effect jumping\r\n */\r\nvar KAttacked = /** @class */ (function () {\r\n    function KAttacked(kAttackedStr) {\r\n        this.whiteKing = false;\r\n        this.blackKing = false;\r\n        if (kAttackedStr) {\r\n            this.whiteKing = !!~kAttackedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING));\r\n            this.blackKing = !!~kAttackedStr.indexOf(constant_1.PIECE_TYPE_KING);\r\n        }\r\n    }\r\n    KAttacked.prototype.toString = function () {\r\n        var str = \"\" + (this.whiteKing ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING) : constant_2.NOT_SET);\r\n        str += \"\" + (this.blackKing ? constant_1.PIECE_TYPE_KING : constant_2.NOT_SET);\r\n        return str;\r\n    };\r\n    return KAttacked;\r\n}());\r\nexports.default = KAttacked;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=KAttacked.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"../brain/constant\");\r\nvar constant_2 = require(\"./constant\");\r\nvar Piece_1 = __importDefault(require(\"./Piece\"));\r\n/**\r\n * King or Queen has jumped, the will effect jumping\r\n */\r\nvar KqJumped = /** @class */ (function () {\r\n    function KqJumped(kqJumpedStr) {\r\n        var _a;\r\n        this.whiteKing = false;\r\n        this.whiteQueen = false;\r\n        this.blackKing = false;\r\n        this.blackQueen = false;\r\n        this.keyCodes = {\r\n            blackKing: Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN),\r\n            whiteKing: Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING),\r\n            whiteQueen: constant_1.PIECE_TYPE_KING,\r\n            blackQueen: constant_1.PIECE_TYPE_QUEEN,\r\n        };\r\n        this.codeKeys = (_a = {},\r\n            _a[Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN)] = 'blackKing: ',\r\n            _a[Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING)] = 'whiteKing: ',\r\n            _a[constant_1.PIECE_TYPE_KING] = 'whiteQueen: ',\r\n            _a[constant_1.PIECE_TYPE_QUEEN] = 'blackQueen: ',\r\n            _a);\r\n        if (kqJumpedStr) {\r\n            this.whiteKing = !!~kqJumpedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING));\r\n            this.whiteQueen = !!~kqJumpedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN));\r\n            this.blackKing = !!~kqJumpedStr.indexOf(constant_1.PIECE_TYPE_KING);\r\n            this.blackQueen = !!~kqJumpedStr.indexOf(constant_1.PIECE_TYPE_QUEEN);\r\n        }\r\n    }\r\n    Object.defineProperty(KqJumped.prototype, \"isJumped\", {\r\n        get: function () {\r\n            return this.whiteKing || this.whiteQueen || this.blackKing || this.blackQueen;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    KqJumped.prototype.setProp = function (key, value) {\r\n        this[key] = value;\r\n    };\r\n    KqJumped.prototype.applyJumping = function (propKey, move) {\r\n        if (!this[propKey]) {\r\n            move.kqJumping.setProp(propKey, true);\r\n            this.setProp(propKey, true);\r\n        }\r\n    };\r\n    KqJumped.prototype.checkKQMoved = function (move) {\r\n        if (move.attacker || move.captured) {\r\n            this.applyJumping('whiteKing', move);\r\n            this.applyJumping('blackKing', move);\r\n            this.applyJumping('whiteQueen', move);\r\n            this.applyJumping('blackQueen', move);\r\n        }\r\n        var piece = move.piece;\r\n        if (piece.isTypeKing) {\r\n            if (piece.isColorWhite) {\r\n                this.applyJumping('whiteKing', move);\r\n            }\r\n            else {\r\n                this.applyJumping('blackKing', move);\r\n            }\r\n        }\r\n        else if (piece.isTypeQueen) {\r\n            if (piece.isColorWhite) {\r\n                this.applyJumping('whiteQueen', move);\r\n            }\r\n            else {\r\n                this.applyJumping('blackQueen', move);\r\n            }\r\n        }\r\n    };\r\n    KqJumped.prototype.toString = function () {\r\n        var str = \"\" + (this.whiteKing ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING) : constant_2.NOT_SET);\r\n        str += \"\" + (this.whiteQueen ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN) : constant_2.NOT_SET);\r\n        str += \"\" + (this.blackKing ? constant_1.PIECE_TYPE_KING : constant_2.NOT_SET);\r\n        str += \"\" + (this.blackQueen ? constant_1.PIECE_TYPE_QUEEN : constant_2.NOT_SET);\r\n        return str;\r\n    };\r\n    KqJumped.prototype.toNumber = function () {\r\n        var str = \"\" + (this.whiteKing ? 1 : 0);\r\n        str += \"\" + (this.whiteQueen ? 1 : 0);\r\n        str += \"\" + (this.blackKing ? 1 : 0);\r\n        str += \"\" + (this.blackQueen ? 1 : 0);\r\n        return parseInt(str, 2);\r\n    };\r\n    KqJumped.fromNumber = function (n) {\r\n        var b = ('0000' + Number(n).toString(2)).substr(-4);\r\n        var kqJumped = new KqJumped();\r\n        kqJumped.whiteKing = b[0] === '1';\r\n        kqJumped.whiteQueen = b[1] === '1';\r\n        kqJumped.blackKing = b[2] === '1';\r\n        kqJumped.blackQueen = b[3] === '1';\r\n        return kqJumped;\r\n    };\r\n    return KqJumped;\r\n}());\r\nexports.default = KqJumped;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=KqJumped.js.map","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"../brain/constant\");\r\nvar jsis_1 = __importDefault(require(\"../brain/jsis\"));\r\nvar Piece = /** @class */ (function () {\r\n    function Piece(type, color) {\r\n        this.type = Piece.toNormalCharCode(type);\r\n        this.color = color;\r\n    }\r\n    Object.defineProperty(Piece.prototype, \"colorOpponent\", {\r\n        get: function () {\r\n            return Piece.oppositeColor(this.color);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"pieceCharCode\", {\r\n        get: function () {\r\n            if (this.isColorWhite) {\r\n                return this.pieceCharCodeWhite;\r\n            }\r\n            return this.type;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"pieceCharCodeWhite\", {\r\n        get: function () {\r\n            return Piece.toWhiteCharCode(this.type);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"title\", {\r\n        get: function () {\r\n            return \"\" + constant_1.PIECE_NAMES[this.type] + constant_1.COLOR_NAMES[this.color];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"titleEnglish\", {\r\n        get: function () {\r\n            return constant_1.COLOR_NAMES_ENGLISH[this.color] + \"-\" + constant_1.PIECE_NAMES_ENGLISH[this.type];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Piece.prototype._isTypeEqual = function (type) {\r\n        return this.type === type;\r\n    };\r\n    Object.defineProperty(Piece.prototype, \"isTypeKing\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_KING);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeQueen\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_QUEEN);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeBoat\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_BOAT);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeHorse\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_HORSE);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeGeneral\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_GENERAL);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeFish\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_FISH);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeTransformedFish\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_TRANSFORM_FISH);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isColorBlack\", {\r\n        get: function () {\r\n            return Piece.isBlackColor(this.color);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isColorWhite\", {\r\n        get: function () {\r\n            return Piece.isWhiteColor(this.color);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Piece.fromCharCode = function (charCode) {\r\n        if (!Piece.isValidPiece(charCode)) {\r\n            return null;\r\n        }\r\n        var color = Piece.isWhiteCharCode(charCode) ? constant_1.PIECE_COLOR_WHITE : constant_1.PIECE_COLOR_BLACK;\r\n        var type = Piece.toNormalCharCode(charCode);\r\n        return new Piece(type, color);\r\n    };\r\n    Object.defineProperty(Piece.prototype, \"originPiece\", {\r\n        get: function () {\r\n            if (this.isTypeTransformedFish) {\r\n                return new Piece(constant_1.PIECE_TYPE_FISH, this.color);\r\n            }\r\n            return this;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece, \"pieceChars\", {\r\n        get: function () {\r\n            return [\r\n                constant_1.PIECE_TYPE_BOAT,\r\n                constant_1.PIECE_TYPE_HORSE,\r\n                constant_1.PIECE_TYPE_GENERAL,\r\n                constant_1.PIECE_TYPE_KING,\r\n                constant_1.PIECE_TYPE_QUEEN,\r\n                constant_1.PIECE_TYPE_FISH,\r\n                constant_1.PIECE_TYPE_TRANSFORM_FISH,\r\n            ];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece, \"colorChars\", {\r\n        get: function () {\r\n            return [\r\n                constant_1.PIECE_COLOR_WHITE,\r\n                constant_1.PIECE_COLOR_BLACK,\r\n            ];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Piece.toWhiteCharCode = function (charCode) {\r\n        return charCode.toUpperCase();\r\n    };\r\n    Piece.isWhiteCharCode = function (charCode) {\r\n        return jsis_1.default.isUpperCase(charCode);\r\n    };\r\n    Piece.toBlackCharCode = function (charCode) {\r\n        return charCode.toLowerCase();\r\n    };\r\n    Piece.toNormalCharCode = function (charCode) {\r\n        return Piece.toBlackCharCode(charCode);\r\n    };\r\n    Piece.isValidPiece = function (charCode) {\r\n        return charCode !== constant_1.EMPTY_PIECE;\r\n    };\r\n    Piece.isWhiteColor = function (color) {\r\n        return color === constant_1.PIECE_COLOR_WHITE;\r\n    };\r\n    Piece.isBlackColor = function (color) {\r\n        return color === constant_1.PIECE_COLOR_BLACK;\r\n    };\r\n    Piece.oppositeColor = function (color) {\r\n        return Piece.isWhiteColor(color) ? constant_1.PIECE_COLOR_BLACK : constant_1.PIECE_COLOR_WHITE;\r\n    };\r\n    Piece.isValidPiecesString = function (str, onlyPiece) {\r\n        var ruler = onlyPiece ? allPiecesString.filter(function (c) {\r\n            return !~[constant_1.EMPTY_PIECE, constant_1.BOARD_SEPARATOR].indexOf(c);\r\n        }) : allPiecesString;\r\n        return !str.split('').some(function (c) {\r\n            return !~ruler.indexOf(c);\r\n        });\r\n    };\r\n    Piece.prototype.upgrade = function () {\r\n        if (this.isTypeFish) {\r\n            this.type = constant_1.PIECE_TYPE_TRANSFORM_FISH;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Piece.prototype.downgrade = function () {\r\n        if (this.isTypeTransformedFish) {\r\n            this.type = constant_1.PIECE_TYPE_FISH;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Piece.prototype.clone = function () {\r\n        return Piece.fromCharCode(this.pieceCharCode);\r\n    };\r\n    return Piece;\r\n}());\r\nexports.default = Piece;\r\nvar allPiecesString = __spreadArray(__spreadArray(__spreadArray([], Piece.pieceChars, true), Piece.pieceChars.map(function (pieceChar) {\r\n    return Piece.toWhiteCharCode(pieceChar);\r\n}), true), [\r\n    constant_1.EMPTY_PIECE,\r\n    constant_1.BOARD_SEPARATOR,\r\n], false);\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Piece.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"../brain/constant\");\r\nvar PieceIndex = /** @class */ (function () {\r\n    function PieceIndex(point, piece) {\r\n        this.canMovePoints = [];\r\n        this.point = point;\r\n        this.piece = piece;\r\n    }\r\n    PieceIndex.prototype.toCode = function () {\r\n        return this.piece != null ? \"\" + this.piece.pieceCharCode + this.point.indexCode : null;\r\n    };\r\n    PieceIndex.prototype.toPieceCharCode = function () {\r\n        return this.piece !== null ? this.piece.pieceCharCode : constant_1.EMPTY_PIECE;\r\n    };\r\n    return PieceIndex;\r\n}());\r\nexports.default = PieceIndex;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=PieceIndex.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"../brain/constant\");\r\nvar Point = /** @class */ (function () {\r\n    function Point(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    Object.defineProperty(Point.prototype, \"index\", {\r\n        get: function () {\r\n            return Point.xyToIndex(this.x, this.y);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"graveyardIndex\", {\r\n        get: function () {\r\n            return this.x;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"indexCode\", {\r\n        get: function () {\r\n            return \"\" + this.h + this.v;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"title\", {\r\n        get: function () {\r\n            return \"\" + constant_1.HORIZONTAL_NOTE_LETTERS[this.x] + constant_1.VERTICAL_NOTE_LETTERS[this.y];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"titleEnglish\", {\r\n        get: function () {\r\n            return this.indexCode;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"h\", {\r\n        get: function () {\r\n            return constant_1.HORIZONTAL_CODE_LETTERS[this.x];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"v\", {\r\n        get: function () {\r\n            return this.y + 1;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Point.xyToIndex = function (x, y) {\r\n        return y * constant_1.ROW_NUMBER + x;\r\n    };\r\n    Point.indexCodeToXY = function (indexCode) {\r\n        var x = constant_1.HORIZONTAL_CODE_LETTERS.indexOf(indexCode[0]);\r\n        var y = Number(indexCode[1]) - 1;\r\n        return { x: x, y: y };\r\n    };\r\n    Point.indexCodeToIndex = function (indexCode) {\r\n        var _a = Point.indexCodeToXY(indexCode), x = _a.x, y = _a.y;\r\n        return Point.xyToIndex(x, y);\r\n    };\r\n    Point.fromIndexCode = function (indexCode) {\r\n        var _a = Point.indexCodeToXY(indexCode), x = _a.x, y = _a.y;\r\n        return new Point(x, y);\r\n    };\r\n    Point.indexToXY = function (index) {\r\n        var x = index % constant_1.ROW_NUMBER;\r\n        var y = Math.floor(index / constant_1.ROW_NUMBER);\r\n        return { x: x, y: y };\r\n    };\r\n    Point.fromIndex = function (index) {\r\n        var _a = Point.indexToXY(index), x = _a.x, y = _a.y;\r\n        return new Point(x, y);\r\n    };\r\n    Point.fromIndexGraveyardIndex = function (index) {\r\n        return new Point(index, 0);\r\n    };\r\n    Point.isIndexInBoard = function (index) {\r\n        return index >= 0 && index <= constant_1.CELL_COUNT - 1;\r\n    };\r\n    return Point;\r\n}());\r\nexports.default = Point;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Point.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Board_1 = __importDefault(require(\"./Board\"));\r\nvar KqJumped_1 = __importDefault(require(\"./KqJumped\"));\r\nvar KAttacked_1 = __importDefault(require(\"./KAttacked\"));\r\nvar CountUp_1 = __importDefault(require(\"./CountUp\"));\r\nvar Graveyard_1 = __importDefault(require(\"./Graveyard\"));\r\nvar constant_1 = require(\"./constant\");\r\nvar kpgn_1 = require(\"../kpgn\");\r\nvar Move_1 = __importDefault(require(\"../kpgn/Move\"));\r\nvar Point_1 = __importDefault(require(\"./Point\"));\r\nvar Piece_1 = __importDefault(require(\"./Piece\"));\r\nvar _1 = require(\".\");\r\nvar MoveHelper_1 = __importDefault(require(\"../brain/MoveHelper\"));\r\nvar constant_2 = require(\"../brain/constant\");\r\nvar REN = /** @class */ (function () {\r\n    function REN(renProps) {\r\n        this.moveHelper = new MoveHelper_1.default();\r\n        this.init(renProps);\r\n    }\r\n    REN.prototype.init = function (_a) {\r\n        var boardStr = _a.boardStr, turnStr = _a.turnStr, kqJumpedStr = _a.kqJumpedStr, kAttackedStr = _a.kAttackedStr, countUpStr = _a.countUpStr, graveyardStr = _a.graveyardStr;\r\n        // TODO: improve by moving to fromString()\r\n        this.board = new Board_1.default(boardStr);\r\n        this.turn = turnStr || constant_2.PIECE_COLOR_WHITE;\r\n        this.kqJumped = new KqJumped_1.default(kqJumpedStr);\r\n        this.kAttacked = new KAttacked_1.default(kAttackedStr);\r\n        this.countUp = CountUp_1.default.fromString(countUpStr);\r\n        this.graveyard = new Graveyard_1.default(graveyardStr);\r\n        var invalidPiecesString = this.isInvalidPieceCount();\r\n        if (invalidPiecesString) {\r\n            var msg = \"Invalid piece string board:\" + boardStr;\r\n            msg += \", graveyard:\" + graveyardStr + \", count:\" + invalidPiecesString;\r\n            throw new Error(msg);\r\n        }\r\n        this.moveHelper = new MoveHelper_1.default();\r\n    };\r\n    REN.prototype.isInvalidPieceCount = function () {\r\n        var pieces = this.board.pieceIndices.map(function (pos) {\r\n            return pos.piece;\r\n        }).filter(function (p) {\r\n            return p !== null;\r\n        }).concat(this.graveyard.pieces).map(function (p) {\r\n            return p.originPiece;\r\n        });\r\n        var piecesCount = pieces.reduce(function (obj, p) {\r\n            obj[p.pieceCharCode] = obj[p.pieceCharCode] || 0;\r\n            obj[p.pieceCharCode]++;\r\n            return obj;\r\n        }, {});\r\n        var str = Object.keys(piecesCount).map(function (k) {\r\n            return \"\" + k + piecesCount[k];\r\n        }).sort().join('');\r\n        if (str === constant_1.STRING_COUNT) {\r\n            return false;\r\n        }\r\n        return str;\r\n    };\r\n    REN.prototype.backRen = function (move) {\r\n        var ren = REN.fromString(this.toString());\r\n        ren.moveBack(move);\r\n        return ren;\r\n    };\r\n    Object.defineProperty(REN.prototype, \"isCanMoveNext\", {\r\n        get: function () {\r\n            return !this.countUp.isCountingOut;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    REN.prototype.move = function (moveFromIndex, moveToIndex) {\r\n        if (!this.isCanMoveNext) {\r\n            return null;\r\n        }\r\n        var piece = this.board.getPieceAtIndex(moveFromIndex);\r\n        if (!piece) {\r\n            return null;\r\n        }\r\n        this.board.setPieceAtIndex(moveFromIndex, null);\r\n        var move = new Move_1.default({\r\n            moveFrom: Point_1.default.fromIndex(moveFromIndex),\r\n            moveTo: Point_1.default.fromIndex(moveToIndex),\r\n            piece: piece.clone(),\r\n        });\r\n        if (move.isUpgrading) {\r\n            piece.upgrade();\r\n        }\r\n        var targetPiece = this.board.getPieceAtIndex(moveToIndex);\r\n        if (targetPiece) {\r\n            this.graveyard.pieces.push(targetPiece);\r\n            move.captured = new kpgn_1.Captured({\r\n                fromBoardPoint: Point_1.default.fromIndex(moveToIndex),\r\n                toGraveyardPoint: Point_1.default.fromIndex(this.graveyard.lastIndex),\r\n                piece: targetPiece,\r\n            });\r\n        }\r\n        this.board.setPieceAtIndex(moveToIndex, piece);\r\n        this.turn = Piece_1.default.oppositeColor(piece.color);\r\n        move.setRen(this);\r\n        return move;\r\n    };\r\n    REN.prototype.moveBack = function (move) {\r\n        var movedToIndex = move.moveTo.index;\r\n        var movedFromIndex = move.moveFrom.index;\r\n        var piece = this.board.getPieceAtIndex(movedToIndex);\r\n        this.board.setPieceAtIndex(movedToIndex, null);\r\n        if (!piece) {\r\n            return false;\r\n        }\r\n        this.board.setPieceAtIndex(movedFromIndex, piece);\r\n        if (move.captured) {\r\n            var movedToGYIndex = move.captured.toGraveyardPoint.index;\r\n            var capturedPiece = this.graveyard.get(movedToGYIndex);\r\n            this.board.setPieceAtIndex(movedToIndex, capturedPiece);\r\n            this.graveyard.removeAtIndex(movedToGYIndex);\r\n        }\r\n        if (move.kqJumping.whiteKing) {\r\n            this.kqJumped.whiteKing = false;\r\n        }\r\n        if (move.kqJumping.whiteQueen) {\r\n            this.kqJumped.whiteQueen = false;\r\n        }\r\n        if (move.kqJumping.blackKing) {\r\n            this.kqJumped.blackKing = false;\r\n        }\r\n        if (move.kqJumping.blackQueen) {\r\n            this.kqJumped.blackQueen = false;\r\n        }\r\n        if (this.countUp) {\r\n            this.countUp.clear();\r\n        }\r\n        this.turn = piece.color;\r\n        return true;\r\n    };\r\n    REN.fromString = function (renStr) {\r\n        if (!renStr) {\r\n            renStr = constant_1.DEFAULT_BOARD_STR;\r\n        }\r\n        var renArr = renStr.split(' ');\r\n        return new REN({\r\n            boardStr: renArr[0],\r\n            turnStr: renArr[1],\r\n            kqJumpedStr: renArr[2],\r\n            kAttackedStr: renArr[3],\r\n            countUpStr: renArr[4],\r\n            graveyardStr: renArr[5],\r\n        });\r\n    };\r\n    REN.prototype.toString = function () {\r\n        var str = this.board.toString();\r\n        str += \" \" + this.turn.toString();\r\n        str += \" \" + this.kqJumped.toString();\r\n        str += \" \" + this.kAttacked.toString();\r\n        str += \" \" + this.countUp.toString();\r\n        str += \" \" + this.graveyard.toString();\r\n        return str;\r\n    };\r\n    Object.defineProperty(REN.prototype, \"isQueenMoved\", {\r\n        get: function () {\r\n            var isQueenMoved = Piece_1.default.isWhiteColor(this.turn) && this.kqJumped.whiteQueen ||\r\n                Piece_1.default.isBlackColor(this.turn) && this.kqJumped.blackQueen;\r\n            return isQueenMoved;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(REN.prototype, \"isKingMoved\", {\r\n        get: function () {\r\n            var isKingMoved = Piece_1.default.isWhiteColor(this.turn) && this.kqJumped.whiteKing ||\r\n                Piece_1.default.isBlackColor(this.turn) && this.kqJumped.blackKing;\r\n            return isKingMoved;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    REN.prototype.genAllCanMoves = function () {\r\n        var canMoves = this.moveHelper.calcCanMove({\r\n            piecesString: this.board.toStringFullNoSeparate(),\r\n            currentTurn: this.turn,\r\n            isQueenMoved: this.isQueenMoved,\r\n            isKingMoved: this.isKingMoved,\r\n            genCanMove: true,\r\n            genCanMoveForAnother: false,\r\n        });\r\n        return canMoves.moves;\r\n    };\r\n    REN.prototype.isHasMoved = function (piece) {\r\n        var isHasMoved = false;\r\n        if ((this.kqJumped.blackKing && piece.isColorBlack && piece.isTypeKing) ||\r\n            (this.kqJumped.whiteKing && piece.isColorWhite && piece.isTypeKing) ||\r\n            (this.kqJumped.blackQueen && piece.isColorBlack && piece.isTypeQueen) ||\r\n            (this.kqJumped.whiteQueen && piece.isColorWhite && piece.isTypeQueen)) {\r\n            isHasMoved = true;\r\n        }\r\n        return isHasMoved;\r\n    };\r\n    REN.prototype.getCanMovePointsByPoint = function (point) {\r\n        var piece = this.board.getPieceAtIndex(point.index);\r\n        if (piece === null) {\r\n            return [];\r\n        }\r\n        return this.moveHelper.genCanMovePointsByPiecePoint(point, piece, this.board.toStringFullNoSeparate(), this.isHasMoved(piece));\r\n    };\r\n    REN.prototype.checkBoardStatus = function (move, force) {\r\n        var _this = this;\r\n        var piecesString = this.board.toStringFullNoSeparate();\r\n        // TODO: optimize by specific color\r\n        var state = this.moveHelper.calcState({\r\n            piecesString: piecesString,\r\n            currentTurn: this.turn,\r\n            isQueenMoved: this.isQueenMoved,\r\n            isKingMoved: this.isKingMoved,\r\n            genCanMove: false,\r\n            genCanMoveForAnother: false,\r\n        });\r\n        var kingInDanger = state.blackKingInDanger || state.whiteKingInDanger;\r\n        if (kingInDanger) {\r\n            var pieceIndex = kingInDanger.map(function (point) {\r\n                return new _1.PieceIndex(point, _this.board.getPieceAtIndex(point.index));\r\n            }).filter(function (pieceIndex) {\r\n                return pieceIndex.piece !== null && !pieceIndex.piece.isTypeKing;\r\n            })[0];\r\n            move.boardStatus.attacker = pieceIndex;\r\n        }\r\n        move.boardStatus.winColor = state.winColor;\r\n        move.boardStatus.stuckColor = state.stuckColor;\r\n    };\r\n    REN.prototype.checkCountStatus = function (move, force) {\r\n        if (move.isCanMoveNext) {\r\n            var piecesString = this.board.toStringFullNoSeparate();\r\n            if (this.countUp.isCounting) {\r\n                move.isStartCounting = false;\r\n                this.countUp.checkUp(move.piece.color);\r\n                if (this.countUp.isCountingOut) {\r\n                    move.boardStatus.drawCountColor = this.countUp.color;\r\n                }\r\n            }\r\n            else {\r\n                var color = Piece_1.default.oppositeColor(move.piece.color);\r\n                var countState = this.moveHelper.calCount({\r\n                    color: Piece_1.default.oppositeColor(move.piece.color),\r\n                    piecesString: piecesString,\r\n                    force: !!force,\r\n                });\r\n                if (countState) {\r\n                    this.countUp.set(color, countState.countingToNumber, countState.countingNumber);\r\n                    move.isStartCounting = true;\r\n                }\r\n            }\r\n        }\r\n        move.syncRen(this);\r\n    };\r\n    REN.prototype.getWinColor = function () {\r\n        var state = this.moveHelper.calcState({\r\n            piecesString: this.board.toStringFullNoSeparate(),\r\n            currentTurn: this.turn,\r\n            isQueenMoved: this.isQueenMoved,\r\n            isKingMoved: this.isKingMoved,\r\n            genCanMove: false,\r\n            genCanMoveForAnother: false,\r\n        });\r\n        return state.winColor;\r\n    };\r\n    REN.prototype.syncWithMove = function (move) {\r\n        if (move) {\r\n            var countUp = this.countUp;\r\n            if (countUp.isCounting && this.turn !== countUp.color && !move.isStartCounting) {\r\n                countUp.isCountingUp = true;\r\n            }\r\n        }\r\n    };\r\n    return REN;\r\n}());\r\nexports.default = REN;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=REN.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENT_FLAG_MOVING = exports.EVENT_FLAG_COUNT_UP_OUT = exports.EVENT_FLAG_COUNTING_UP = exports.EVENT_FLAG_START_COUNTING = exports.EVENT_FLAG_DRAW = exports.EVENT_FLAG_WIN = exports.EVENT_FLAG_ATTACK = exports.PIECE_FLAG_START_COUNTING = exports.PIECE_FLAG_UPGRADE = exports.PIECE_FLAG_JUMP = exports.PIECE_FLAG_KILL = exports.NOT_SET = exports.DEFAULT_BOARD_STR = exports.STRING_COUNT = void 0;\r\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\r\nexports.STRING_COUNT = 'B2F8G2H2K1Q1b2f8g2h2k1q1';\r\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\r\nexports.DEFAULT_BOARD_STR = 'BHGKQGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgqkghb';\r\nexports.NOT_SET = '-';\r\nexports.PIECE_FLAG_KILL = '<';\r\nexports.PIECE_FLAG_JUMP = '^';\r\nexports.PIECE_FLAG_UPGRADE = '*';\r\nexports.PIECE_FLAG_START_COUNTING = '#';\r\nexports.EVENT_FLAG_ATTACK = 'attack';\r\nexports.EVENT_FLAG_WIN = 'win';\r\nexports.EVENT_FLAG_DRAW = 'draw';\r\nexports.EVENT_FLAG_START_COUNTING = 'start-counting';\r\nexports.EVENT_FLAG_COUNTING_UP = 'counting-up';\r\nexports.EVENT_FLAG_COUNT_UP_OUT = 'count-up-out';\r\nexports.EVENT_FLAG_MOVING = 'moving';\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=constant.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Point = exports.REN = exports.PieceIndex = exports.Piece = exports.KqJumped = exports.KAttacked = exports.Graveyard = exports.CountUp = exports.Board = void 0;\r\nvar Board_1 = require(\"./Board\");\r\nObject.defineProperty(exports, \"Board\", { enumerable: true, get: function () { return __importDefault(Board_1).default; } });\r\nvar CountUp_1 = require(\"./CountUp\");\r\nObject.defineProperty(exports, \"CountUp\", { enumerable: true, get: function () { return __importDefault(CountUp_1).default; } });\r\nvar Graveyard_1 = require(\"./Graveyard\");\r\nObject.defineProperty(exports, \"Graveyard\", { enumerable: true, get: function () { return __importDefault(Graveyard_1).default; } });\r\nvar KAttacked_1 = require(\"./KAttacked\");\r\nObject.defineProperty(exports, \"KAttacked\", { enumerable: true, get: function () { return __importDefault(KAttacked_1).default; } });\r\nvar KqJumped_1 = require(\"./KqJumped\");\r\nObject.defineProperty(exports, \"KqJumped\", { enumerable: true, get: function () { return __importDefault(KqJumped_1).default; } });\r\nvar Piece_1 = require(\"./Piece\");\r\nObject.defineProperty(exports, \"Piece\", { enumerable: true, get: function () { return __importDefault(Piece_1).default; } });\r\nvar PieceIndex_1 = require(\"./PieceIndex\");\r\nObject.defineProperty(exports, \"PieceIndex\", { enumerable: true, get: function () { return __importDefault(PieceIndex_1).default; } });\r\nvar REN_1 = require(\"./REN\");\r\nObject.defineProperty(exports, \"REN\", { enumerable: true, get: function () { return __importDefault(REN_1).default; } });\r\nvar Point_1 = require(\"./Point\");\r\nObject.defineProperty(exports, \"Point\", { enumerable: true, get: function () { return __importDefault(Point_1).default; } });\r\n__exportStar(require(\"./constant\"), exports);\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(138);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","__importDefault","this","mod","__esModule","Object","defineProperty","value","khmer_chess_1","package_json_1","KhmerChessAI","_a","khmerChess","turn","KhmerChess","prototype","get","enumerable","configurable","pickRandomItem","arr","length","Math","floor","random","attemptMove","pieceIndices","getCanMoves","pickIndex","pick","canMovePoints","fromIndex","point","index","toIndex","turnColors","black","PIECE_COLOR_BLACK","white","PIECE_COLOR_WHITE","title","default","name","version","console","log","KhmerChessAI_1","constant_1","KPGN_1","table_1","REN_1","renStr","ren","fromString","kpgn","loadKpng","option","fromJson","resetBoard","genAllCanMoves","getCanMovePointsByPoint","validateRENStr","valid","error_number","error","message","getRENStr","toString","board","piecesMultiArray","pieces","graveyard","getKPGN","toJson","loadKpgn","kpgnJosn","options","drawAscii","set","move","moveFromIndex","moveToIndex","addMove","clearBoard","getHistories","moves","toKhmerNum","englishNum","split","map","c","VERTICAL_NOTE_LETTERS","VERTICAL_NOTE_LETTERS_ENGLISH","indexOf","join","jsis_1","HVPont","h","v","isUndefined","Number","HORIZONTAL_CODE_LETTERS","Piece_1","boardHelper_1","MoveHelper","isWhiteColor","currentTurn","init","piecesString","isQueenMoved","isKingMoved","genCanMove","genCanMoveForAnother","whiteMoves","blackMoves","whiteKingInDanger","whiteKingWillInDanger","blackKingInDanger","blackKingWillInDanger","winColor","stuckColor","generateCanMoves","_this","filter","filterPieceInBoard","whitePieces","blackPieces","genMoves","forEach","pieceIndex","isHaveMoved","piece","isTypeKing","isTypeQueen","genCanMovePointsByPiecePoint","cleanPieceNoMove","cleanMoves","isTrue","splice","checkIfKingInDanger","getKingInDanger","getKingWillInDanger","genWinLost","getStuck","isWhiteTurn","calcCanMove","anotherMoves","calcState","calCount","color","force","checkCount","isHasMoved","Rectangle","x","y","width","height","isContainsPoint","isValidPoint","ROW_LAST_INDEX","CountUpState","genMask_1","Point_1","Rectangle_1","ren_1","mask","countingNumber","countingToNumber","BoardHelper","convertMask","point1","sign","point2","getCharPieceFromString","isIndexInBoard","CELL_COUNT","EMPTY_PIECE","getCharPieceInPos","getPieceByIndex","charCode","isValidPiece","fromCharCode","getPieceCanMovePoses","type","_pos","newIndex","push","getPieceCanMovePosesValid","_poses","n","thisPos","p","distPiece","isTypeFish","isTypeBoat","_x","_y","_n","abs","_s","xyToIndex","isNull","replacePiecesStringAtIndex","substring","injectPiece","index1","index2","isCharPiecesInBoard","kingPos","PIECE_TYPE_KING","pieceCharCode","j","isHaveCaptured","points","str","code","getPiecesInBoard","ROW_NUMBER","PieceIndex","isColorWhite","extractPiecesToArray","piecesStringArr","pieceAll","isStateCount","checkCountable","weaker","stronger","oppositeColor","countChar","PIECE_TYPE_FISH","count","toukCount","PIECE_TYPE_BOAT","PIECE_TYPE_GENERAL","PIECE_TYPE_HORSE","start","isUpgradable","isColorBlack","_b","_c","_d","HORIZONTAL_NOTE_LETTERS_ENGLISH","HORIZONTAL_NOTE_LETTERS","ROW_FIRST_INDEX","BOARD_SEPARATOR","PIECE_COLOR_EMPTY","PIECE_NAMES_ENGLISH","PIECE_NAMES","PIECE_TYPE_TRANSFORM_FISH","PIECE_TYPE_QUEEN","COLOR_NAMES_ENGLISH","COLOR_NAMES","Array","from","_","concat","__createBinding","create","o","m","k","k2","undefined","__exportStar","hasOwnProperty","call","jsis","genMask","boardHelper","HVPont_1","MoveHelper_1","isValid","isString","isNotEmpty","isValidString","isNumber","isStringNumber","isNaN","isArray","isFunction","f","isObject","isBoolean","b","isValidBoolean","isFalse","isPoint","isValidObject","isValidNumber","isSize","size","isOdd","isEven","isUpperCase","toUpperCase","KhmerChess_1","fromBoardPoint","toGraveyardPoint","Move_1","Player_1","Result_1","Timer_1","base64Helper_1","KPGN","event","date","location","players","result","last","whiteWin","blackWin","timer","latestMove","isCanMoveNext","getMove","loadRENStr","syncWithMove","loadMovesStrings","currentRen","reverse","moveStr","Error","backRen","Date","fromBase64","json","JSON","parse","decode","toBase64","jsStr","stringify","encode","brain_1","Captured_1","Move","moveFrom","moveTo","isUpgrading","captured","boardStatus","attacker","drawCountColor","isStartCounting","upgrade","kqJumping","KqJumped","setRen","checkBoardStatus","kqJumped","checkKQMoved","checkCountStatus","syncRen","whiteKing","whiteQueen","blackKing","blackQueen","isDraw","fromIndexCode","substr","killIndex","PIECE_FLAG_KILL","match","gyIndex","capturedPiece","fromIndexGraveyardIndex","jumpingIndex","PIECE_FLAG_JUMP","fromNumber","PIECE_FLAG_START_COUNTING","pCode","fIndexCode","indexCode","tIndexCode","flags","isJumped","toNumber","PIECE_FLAG_UPGRADE","getJumpingMessage","isEnglish","jump","isWhiteKingJumping","isWhiteQueenJumping","isBlackKingJumping","isBlackQueenJumping","getMessage","titleEnglish","Player","id","Result","win","draw","lost","Timer","totalSecond","bonusTime","currentWhite","currentBlack","Captured","EventHandler","_onEventListeners","_propEvent","events","_checkPropEvent","_isLockProp","shift","_checkOnEvent","data","_addPropEvent","_guardEventName","eventName","listener","_addOnEventListener","_removeOnEventListener","Base64","_keyStr","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","_utf8_encode","charCodeAt","charAt","replace","String","_utf8_decode","string","utftext","c1","c2","table","EventHandler_1","reduce","s","subArr","PieceIndex_1","constant_2","Board","boardStr","DEFAULT_BOARD_STR","newBoardStr","extract","isValidPiecesString","find","getKing","compress","reg","RegExp","$1","toStringFull","toPieceCharCode","toStringFullNoSeparate","getPieceAtIndex","setPieceAtIndex","CountUp","isCountingUp","isCounting","isWhite","clear","checkUp","countUpStr","NOT_SET","countUp","countingUp","countingUpWB","Graveyard","graveyardStr","removeAtIndex","KAttacked","kAttackedStr","toWhiteCharCode","kqJumpedStr","keyCodes","codeKeys","setProp","key","applyJumping","propKey","parseInt","__spreadArray","to","pack","arguments","ar","l","slice","Piece","toNormalCharCode","pieceCharCodeWhite","_isTypeEqual","isBlackColor","isWhiteCharCode","isTypeTransformedFish","toBlackCharCode","toLowerCase","onlyPiece","ruler","allPiecesString","some","downgrade","clone","pieceChars","pieceChar","toCode","Point","indexCodeToXY","indexCodeToIndex","indexToXY","Board_1","KqJumped_1","KAttacked_1","CountUp_1","Graveyard_1","kpgn_1","_1","REN","renProps","moveHelper","turnStr","kAttacked","invalidPiecesString","isInvalidPieceCount","msg","piecesCount","pos","originPiece","obj","keys","sort","STRING_COUNT","moveBack","isCountingOut","targetPiece","lastIndex","movedToIndex","movedFromIndex","movedToGYIndex","renArr","state","kingInDanger","countState","getWinColor","EVENT_FLAG_MOVING","EVENT_FLAG_COUNT_UP_OUT","EVENT_FLAG_COUNTING_UP","EVENT_FLAG_START_COUNTING","EVENT_FLAG_DRAW","EVENT_FLAG_WIN","EVENT_FLAG_ATTACK","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}