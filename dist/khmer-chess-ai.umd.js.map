{"version":3,"file":"khmer-chess-ai.umd.js","mappings":"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","sources":["webpack://khmer-chess-ai/webpack/universalModuleDefinition","webpack://khmer-chess-ai/./src/KhmerChessAI.js","webpack://khmer-chess-ai/./src/index.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/KhmerChess.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/HVPont.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/MoveHelper.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/Rectangle.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/boardHelper.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/constant.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/genMask.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/brain/index.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/index.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/Captured.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/KPGN.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/Move.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/Player.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/Result.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/Timer.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/kpgn/index.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/other/EventHandler.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/other/base64Helper.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/other/index.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/other/table.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/Board.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/CountUp.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/Graveyard.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/KAttacked.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/KqJumped.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/Piece.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/PieceIndex.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/Point.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/REN.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/constant.js","webpack://khmer-chess-ai/../node_modules/khmer-chess/dist/src/ren/index.js","webpack://khmer-chess-ai/webpack/bootstrap","webpack://khmer-chess-ai/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar khmer_chess_1 = require(\"khmer-chess\");\nvar package_json_1 = __importDefault(require(\"../package.json\"));\nvar KhmerChessAI = /** @class */ (function () {\n    function KhmerChessAI(_a) {\n        var khmerChess = _a.khmerChess, turn = _a.turn;\n        this.khmerChess = khmerChess ? khmerChess : new khmer_chess_1.KhmerChess();\n        this.turn = turn;\n    }\n    Object.defineProperty(KhmerChessAI.prototype, \"isAITurn\", {\n        get: function () {\n            return this.khmerChess.turn === this.turn;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KhmerChessAI.prototype.pickRandomItem = function (arr) {\n        if (!arr.length) {\n            return null;\n        }\n        var rand = Math.floor(Math.random() * arr.length);\n        return arr[rand];\n    };\n    KhmerChessAI.prototype.attemptMove = function () {\n        if (this.khmerChess.turn === this.turn) {\n            var pieceIndices = this.khmerChess.getCanMoves();\n            var pickIndex = this.pickRandomItem(pieceIndices);\n            if (pickIndex) {\n                var pick = this.pickRandomItem(pickIndex.canMovePoints);\n                if (!pick) {\n                    return null;\n                }\n                return {\n                    fromIndex: pickIndex.point.index,\n                    toIndex: pick.index,\n                };\n            }\n        }\n        return null;\n    };\n    KhmerChessAI.turnColors = {\n        black: khmer_chess_1.PIECE_COLOR_BLACK,\n        white: khmer_chess_1.PIECE_COLOR_WHITE,\n    };\n    KhmerChessAI.title = package_json_1.default.name;\n    KhmerChessAI.version = package_json_1.default.version;\n    return KhmerChessAI;\n}());\nexports.default = KhmerChessAI;\nconsole.log(khmer_chess_1.KhmerChess.title + \":\" + khmer_chess_1.KhmerChess.version + \" + \" + KhmerChessAI.title + \":\" + KhmerChessAI.version);\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net k4us.net@gmail.com\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */ \n//# sourceMappingURL=KhmerChessAI.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KhmerChessAI = void 0;\nvar KhmerChessAI_1 = require(\"./KhmerChessAI\");\nObject.defineProperty(exports, \"KhmerChessAI\", { enumerable: true, get: function () { return __importDefault(KhmerChessAI_1).default; } });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net k4us.net@gmail.com\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */ \n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar package_json_1 = __importDefault(require(\"../package.json\"));\nvar constant_1 = require(\"./brain/constant\");\nvar KPGN_1 = __importDefault(require(\"./kpgn/KPGN\"));\nvar table_1 = __importDefault(require(\"./other/table\"));\nvar REN_1 = __importDefault(require(\"./ren/REN\"));\nvar KhmerChess = /** @class */ (function () {\n    function KhmerChess(renStr) {\n        var ren = REN_1.default.fromString(renStr);\n        this.kpgn = new KPGN_1.default(ren);\n    }\n    KhmerChess.prototype.loadKpng = function (option) {\n        this.kpgn.fromJson(option);\n    };\n    KhmerChess.prototype.resetBoard = function () {\n        this.kpgn.ren = REN_1.default.fromString();\n    };\n    KhmerChess.prototype.getCanMoves = function () {\n        var pieceIndices = this.kpgn.ren.genAllCanMoves();\n        return pieceIndices;\n    };\n    KhmerChess.prototype.getCanMovePointsByPoint = function (point) {\n        var canMovePoints = this.kpgn.ren.getCanMovePointsByPoint(point);\n        return canMovePoints;\n    };\n    KhmerChess.prototype.validateRENStr = function (renStr) {\n        try {\n            REN_1.default.fromString(renStr);\n            return { valid: true, error_number: 0, error: 'No errors.' };\n        }\n        catch (error) {\n            return {\n                valid: false,\n                error_number: 1,\n                error: error.message,\n            };\n        }\n    };\n    KhmerChess.prototype.getRENStr = function () {\n        return this.kpgn.ren.toString();\n    };\n    Object.defineProperty(KhmerChess.prototype, \"piecesInBoardMultiArray\", {\n        get: function () {\n            return this.kpgn.ren.board.piecesMultiArray;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KhmerChess.prototype, \"piecesInBoard\", {\n        get: function () {\n            return this.kpgn.ren.board.pieces;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KhmerChess.prototype, \"piecesInGraveyard\", {\n        get: function () {\n            return this.kpgn.ren.graveyard.pieces;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Khmer Portable Game Notation <file-name>.kpgn.json\n    KhmerChess.prototype.getKPGN = function () {\n        return this.kpgn.toJson();\n    };\n    KhmerChess.prototype.loadKpgn = function (kpgnJosn, options) {\n        this.kpgn = new KPGN_1.default(this.kpgn.ren);\n    };\n    KhmerChess.prototype.drawAscii = function () {\n        return (0, table_1.default)(this.kpgn.ren);\n    };\n    Object.defineProperty(KhmerChess.prototype, \"turn\", {\n        get: function () {\n            return this.kpgn.ren.turn;\n        },\n        set: function (turn) {\n            this.kpgn.ren.turn = turn;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KhmerChess.prototype.move = function (moveFromIndex, moveToIndex) {\n        var move = this.kpgn.ren.move(moveFromIndex, moveToIndex);\n        this.kpgn.addMove(move);\n        return move;\n    };\n    /**\n     * Move all pieces to graveyard except kings\n     * -> 4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB\n     */\n    KhmerChess.prototype.clearBoard = function () {\n        this.kpgn.ren = REN_1.default.fromString('4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB');\n    };\n    KhmerChess.prototype.getHistories = function () {\n        return this.kpgn.moves;\n    };\n    KhmerChess.toKhmerNum = function (englishNum) {\n        var str = \"\" + englishNum;\n        var result = str.split('').map(function (c) {\n            return constant_1.VERTICAL_NOTE_LETTERS[constant_1.VERTICAL_NOTE_LETTERS_ENGLISH.indexOf(c)];\n        }).join('');\n        return result;\n    };\n    KhmerChess.title = package_json_1.default.name;\n    KhmerChess.version = package_json_1.default.version;\n    return KhmerChess;\n}());\nexports.default = KhmerChess;\n//# sourceMappingURL=KhmerChess.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"./constant\");\nvar HVPont = /** @class */ (function () {\n    function HVPont(h, v) {\n        if (!v) {\n            h = h[0];\n            v = h[1];\n        }\n        this.h = h;\n        this.v = Number(v);\n    }\n    Object.defineProperty(HVPont.prototype, \"x\", {\n        get: function () {\n            return constant_1.HORIZONTAL_CODE_LETTERS.indexOf(this.h);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HVPont.prototype, \"y\", {\n        get: function () {\n            return this.v - 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HVPont.prototype, \"indexCode\", {\n        get: function () {\n            return \"\" + this.h + this.v;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return HVPont;\n}());\nexports.default = HVPont;\n//# sourceMappingURL=HVPont.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\nvar boardHelper_1 = __importDefault(require(\"./boardHelper\"));\nvar constant_1 = require(\"./constant\");\nvar MoveHelper = /** @class */ (function () {\n    function MoveHelper() {\n        this.piecesString = '';\n        this.currentTurn = '';\n        this.isQueenMoved = false;\n        this.isKingMoved = false;\n        this.genCanMove = false;\n        this.genCanMoveForAnother = false;\n        this.whiteMoves = [];\n        this.blackMoves = [];\n        this.whiteKingInDanger = null;\n        this.whiteKingWillInDanger = null;\n        this.blackKingInDanger = null;\n        this.blackKingWillInDanger = null;\n        this.winColor = null;\n        this.stuckColor = null;\n    }\n    Object.defineProperty(MoveHelper.prototype, \"isWhiteTurn\", {\n        get: function () {\n            return Piece_1.default.isWhiteColor(this.currentTurn);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MoveHelper.prototype.init = function (option) {\n        this.piecesString = option.piecesString;\n        this.currentTurn = option.currentTurn;\n        this.isQueenMoved = option.isQueenMoved;\n        this.isKingMoved = option.isKingMoved;\n        this.genCanMove = option.genCanMove;\n        this.genCanMoveForAnother = option.genCanMoveForAnother;\n        this.whiteMoves = [];\n        this.blackMoves = [];\n        this.whiteKingInDanger = null;\n        this.whiteKingWillInDanger = null;\n        this.blackKingInDanger = null;\n        this.blackKingWillInDanger = null;\n        this.winColor = null;\n        this.stuckColor = null;\n    };\n    MoveHelper.prototype.generateCanMoves = function () {\n        var _this = this;\n        var filter = boardHelper_1.default.filterPieceInBoard(this.piecesString);\n        this.whiteMoves = filter.whitePieces;\n        this.blackMoves = filter.blackPieces;\n        var genMoves = function (pieceIndices) {\n            pieceIndices.forEach(function (pieceIndex) {\n                var isHaveMoved = _this.isKingMoved;\n                if (pieceIndex.piece !== null) {\n                    if (pieceIndex.piece !== null && !pieceIndex.piece.isTypeKing) {\n                        isHaveMoved = pieceIndex.piece.isTypeQueen ? _this.isQueenMoved : false;\n                    }\n                    var canMovePoints = _this.genCanMovePointsByPiecePoint(pieceIndex.point, pieceIndex.piece, _this.piecesString, isHaveMoved);\n                    pieceIndex.canMovePoints = canMovePoints;\n                }\n            });\n        };\n        genMoves(this.whiteMoves);\n        genMoves(this.blackMoves);\n    };\n    MoveHelper.prototype.cleanPieceNoMove = function () {\n        var cleanMoves = function (pieces) {\n            var isTrue = true;\n            while (isTrue) {\n                isTrue = false;\n                for (var i = 0; i < pieces.length; i++) {\n                    var piece = pieces[i];\n                    if (!piece.canMovePoints.length) {\n                        pieces.splice(i, 1);\n                        isTrue = true;\n                        break;\n                    }\n                }\n            }\n        };\n        cleanMoves(this.whiteMoves);\n        cleanMoves(this.blackMoves);\n    };\n    MoveHelper.prototype.checkIfKingInDanger = function () {\n        this.whiteKingInDanger = boardHelper_1.default.getKingInDanger(constant_1.PIECE_COLOR_WHITE, this.piecesString);\n        this.whiteKingWillInDanger = boardHelper_1.default.getKingWillInDanger(constant_1.PIECE_COLOR_WHITE, this.piecesString);\n        this.blackKingInDanger = boardHelper_1.default.getKingInDanger(constant_1.PIECE_COLOR_BLACK, this.piecesString);\n        this.blackKingWillInDanger = boardHelper_1.default.getKingWillInDanger(constant_1.PIECE_COLOR_BLACK, this.piecesString);\n    };\n    MoveHelper.prototype.genWinLost = function () {\n        if (this.whiteKingInDanger && !this.whiteMoves.length) {\n            this.winColor = constant_1.PIECE_COLOR_BLACK;\n        }\n        else if (this.blackKingInDanger && !this.blackMoves.length) {\n            this.winColor = constant_1.PIECE_COLOR_WHITE;\n        }\n    };\n    MoveHelper.prototype.getStuck = function () {\n        if (this.winColor) {\n            return;\n        }\n        if (this.isWhiteTurn && !this.whiteMoves.length) {\n            this.stuckColor = constant_1.PIECE_COLOR_WHITE;\n        }\n        else if (!this.isWhiteTurn && !this.blackMoves.length) {\n            this.stuckColor = constant_1.PIECE_COLOR_BLACK;\n        }\n    };\n    MoveHelper.prototype.calcCanMove = function (option) {\n        this.init(option);\n        this.generateCanMoves();\n        this.cleanPieceNoMove();\n        var moves = [];\n        if (this.genCanMove) {\n            moves = this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\n        }\n        var anotherMoves = [];\n        if (this.genCanMoveForAnother) {\n            anotherMoves = !this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\n        }\n        return {\n            moves: moves,\n            anotherMoves: anotherMoves,\n        };\n    };\n    MoveHelper.prototype.calcState = function (option) {\n        this.init(option);\n        this.generateCanMoves();\n        this.cleanPieceNoMove();\n        this.checkIfKingInDanger();\n        this.genWinLost();\n        this.getStuck();\n        return {\n            blackKingInDanger: this.blackKingInDanger,\n            whiteKingInDanger: this.whiteKingInDanger,\n            blackKingWillInDanger: this.blackKingWillInDanger,\n            whiteKingWillInDanger: this.whiteKingWillInDanger,\n            winColor: this.winColor,\n            stuckColor: this.stuckColor,\n        };\n    };\n    MoveHelper.prototype.calCount = function (_a) {\n        var color = _a.color, piecesString = _a.piecesString, force = _a.force;\n        return boardHelper_1.default.checkCount(color, piecesString, force);\n    };\n    MoveHelper.prototype.genCanMovePointsByPiecePoint = function (point, piece, piecesString, isHasMoved) {\n        return boardHelper_1.default.genCanMovePointsByPiecePoint(point.index, piece, piecesString, isHasMoved);\n    };\n    return MoveHelper;\n}());\nexports.default = MoveHelper;\n//# sourceMappingURL=MoveHelper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar constant_1 = require(\"./constant\");\nvar Rectangle = /** @class */ (function () {\n    function Rectangle(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    Rectangle.prototype.isContainsPoint = function (point) {\n        var x = point.x, y = point.y;\n        var isContainsPoint = this.x <= x &&\n            (this.x + this.width) >= x &&\n            this.y <= y &&\n            (this.y + this.height) >= y;\n        return isContainsPoint;\n    };\n    Rectangle.isValidPoint = function (point) {\n        return new Rectangle(0, 0, constant_1.ROW_LAST_INDEX, constant_1.ROW_LAST_INDEX).isContainsPoint(point);\n    };\n    return Rectangle;\n}());\nexports.default = Rectangle;\n//# sourceMappingURL=Rectangle.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CountUpState = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar genMask_1 = __importDefault(require(\"./genMask\"));\nvar constant_1 = require(\"./constant\");\nvar Point_1 = __importDefault(require(\"../ren/Point\"));\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\nvar Rectangle_1 = __importDefault(require(\"./Rectangle\"));\nvar ren_1 = require(\"../ren\");\nvar mask = (0, genMask_1.default)();\nvar CountUpState = /** @class */ (function () {\n    function CountUpState(countingNumber, countingToNumber) {\n        this.countingNumber = countingNumber;\n        this.countingToNumber = countingToNumber;\n    }\n    return CountUpState;\n}());\nexports.CountUpState = CountUpState;\nvar BoardHelper = /** @class */ (function () {\n    function BoardHelper() {\n        this.convertMask = function (point1, index, color) {\n            var sign = Piece_1.default.isWhiteColor(color) ? 1 : -1;\n            var point2 = Point_1.default.fromIndex(index);\n            point1.x = point1.x * sign + point2.x;\n            point1.y = point1.y * sign + point2.y;\n            return Rectangle_1.default.isValidPoint(point1) ? point1.index : null;\n        };\n    }\n    BoardHelper.prototype.getCharPieceFromString = function (piecesString, index) {\n        if (Point_1.default.isIndexInBoard(index) && piecesString.length === constant_1.CELL_COUNT) {\n            return piecesString[index];\n        }\n        return constant_1.EMPTY_PIECE;\n    };\n    BoardHelper.prototype.getCharPieceInPos = function (index, piecesString) {\n        return this.getCharPieceFromString(piecesString, index);\n    };\n    BoardHelper.prototype.getPieceByIndex = function (index, piecesString) {\n        var charCode = this.getCharPieceInPos(index, piecesString);\n        return {\n            isValidPiece: Piece_1.default.isValidPiece(charCode),\n            piece: Piece_1.default.fromCharCode(charCode),\n        };\n    };\n    BoardHelper.prototype.getPieceCanMovePoses = function (index, piece) {\n        var _this = this;\n        var pieceIndices = [];\n        mask[piece.type].forEach(function (_pos) {\n            var newIndex = _this.convertMask(new Point_1.default(_pos[0], _pos[1]), index, piece.color);\n            if (newIndex !== null) {\n                pieceIndices.push(newIndex);\n            }\n        });\n        return pieceIndices;\n    };\n    BoardHelper.prototype.getPieceCanMovePosesValid = function (index, piece, piecesString) {\n        var _poses = this.getPieceCanMovePoses(index, piece);\n        var pieceIndices = [];\n        var n = _poses.length;\n        var thisPos = Point_1.default.fromIndex(index);\n        for (var i = 0; i < n; i++) {\n            var p = Point_1.default.fromIndex(_poses[i]);\n            var distPiece = this.getPieceByIndex(p.index, piecesString);\n            if (distPiece.isValidPiece) {\n                if (distPiece.piece && piece.color === distPiece.piece.color ||\n                    (piece.isTypeFish && p.x === thisPos.x)) {\n                    p = null;\n                }\n            }\n            else {\n                if (piece.isTypeFish && p.x !== thisPos.x) {\n                    p = null;\n                }\n            }\n            if (p !== null && piece.isTypeBoat) {\n                var _x = thisPos.x;\n                var _y = thisPos.y;\n                if (p.x === thisPos.x) {\n                    var _n = Math.abs(p.y - thisPos.y);\n                    var _s = thisPos.y < p.y ? 1 : -1;\n                    while (--_n > 0) {\n                        if (this.getPieceByIndex(Point_1.default.xyToIndex(_x, _y + _s * _n), piecesString).isValidPiece) {\n                            p = null;\n                            break;\n                        }\n                    }\n                }\n                else if (p.y === thisPos.y) {\n                    var _n = Math.abs(p.x - thisPos.x);\n                    var _s = thisPos.x < p.x ? 1 : -1;\n                    while (--_n > 0) {\n                        if (this.getPieceByIndex(Point_1.default.xyToIndex(_x + _s * _n, _y), piecesString).isValidPiece) {\n                            p = null;\n                            break;\n                        }\n                    }\n                }\n            }\n            if (p !== null) {\n                pieceIndices.push(_poses[i]);\n            }\n        }\n        return pieceIndices;\n    };\n    BoardHelper.prototype.replacePiecesStringAtIndex = function (piecesString, charCode, index) {\n        return piecesString.substring(0, index) + charCode + piecesString.substring(index + 1);\n    };\n    BoardHelper.prototype.injectPiece = function (piecesString, index1, index2) {\n        var c = piecesString[index1];\n        if (!this.isCharPiecesInBoard(c, piecesString)) {\n            return null;\n        }\n        piecesString = this.replacePiecesStringAtIndex(piecesString, constant_1.EMPTY_PIECE, index1);\n        piecesString = this.replacePiecesStringAtIndex(piecesString, c, index2);\n        return piecesString;\n    };\n    BoardHelper.prototype.getKingWillInDanger = function (color, piecesString) {\n        var kingPos = piecesString.indexOf(new Piece_1.default(constant_1.PIECE_TYPE_KING, color).pieceCharCode);\n        var n = piecesString.length;\n        for (var i = 0; i < n; i++) {\n            var p = this.getPieceByIndex(i, piecesString);\n            if (p.piece !== null && p.isValidPiece && p.piece.color !== color &&\n                p.piece.isTypeBoat) {\n                var _poses = this.getPieceCanMovePoses(i, p.piece);\n                for (var j = 0; j < _poses.length; j++) {\n                    if (_poses[j] === kingPos) {\n                        return [Point_1.default.fromIndex(i), Point_1.default.fromIndex(kingPos)];\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    BoardHelper.prototype.getKingInDanger = function (color, piecesString) {\n        var kingPos = piecesString.indexOf(new Piece_1.default(constant_1.PIECE_TYPE_KING, color).pieceCharCode);\n        var n = piecesString.length;\n        for (var i = 0; i < n; i++) {\n            var p = this.getPieceByIndex(i, piecesString);\n            if (p.piece !== null && p.isValidPiece && p.piece.color !== color) {\n                var _poses = this.getPieceCanMovePosesValid(i, p.piece, piecesString);\n                for (var j = 0; j < _poses.length; j++) {\n                    if (_poses[j] === kingPos) {\n                        return [Point_1.default.fromIndex(i), Point_1.default.fromIndex(kingPos)];\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    BoardHelper.prototype.genCanMovePointsByPiecePoint = function (index, piece, piecesString, isHasMoved) {\n        var _poses = this.getPieceCanMovePosesValid(index, piece, piecesString);\n        var isHaveCaptured = this.isHaveCaptured(piecesString);\n        if (piece.isTypeKing) {\n            if (!isHaveCaptured && !isHasMoved) {\n                var p = this.convertMask(new Point_1.default(2, 1), index, piece.color);\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n                p = this.convertMask(new Point_1.default(-2, 1), index, piece.color);\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n            }\n        }\n        else if (piece.isTypeQueen) {\n            if (!isHaveCaptured && !isHasMoved) {\n                var p = this.convertMask(new Point_1.default(-0, 2), index, piece.color);\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n            }\n        }\n        var n = _poses.length;\n        var points = [];\n        for (var i = 0; i < n; i++) {\n            var str = this.injectPiece(piecesString, index, _poses[i]);\n            if (str !== null && this.getKingInDanger(piece.color, str) === null) {\n                points.push(Point_1.default.fromIndex(_poses[i]));\n            }\n        }\n        return points;\n    };\n    BoardHelper.prototype.isCharPiecesInBoard = function (code, piecesString) {\n        return !!~piecesString.indexOf(code);\n    };\n    BoardHelper.prototype.getPiecesInBoard = function (piecesString) {\n        return piecesString.split('').filter(function (charCode) {\n            return Piece_1.default.isValidPiece(charCode);\n        });\n    };\n    BoardHelper.prototype.isHaveCaptured = function (piecesString) {\n        return this.getPiecesInBoard(piecesString).length < constant_1.ROW_NUMBER * 4;\n    };\n    BoardHelper.prototype.filterPieceInBoard = function (piecesString) {\n        var whitePieces = [];\n        var blackPieces = [];\n        for (var i = 0; i < piecesString.length; i++) {\n            var charCode = piecesString[i];\n            if (Piece_1.default.isValidPiece(charCode)) {\n                var pieceIndex = new ren_1.PieceIndex(Point_1.default.fromIndex(i), Piece_1.default.fromCharCode(charCode));\n                if (pieceIndex.piece !== null && pieceIndex.piece.isColorWhite) {\n                    whitePieces.push(pieceIndex);\n                }\n                else {\n                    blackPieces.push(pieceIndex);\n                }\n            }\n        }\n        return {\n            whitePieces: whitePieces,\n            blackPieces: blackPieces,\n        };\n    };\n    BoardHelper.prototype.extractPiecesToArray = function (piecesString) {\n        var _a;\n        var piecesStringArr = piecesString.split('');\n        var pieceAll = (_a = {},\n            _a[constant_1.PIECE_COLOR_BLACK] = [],\n            _a[constant_1.PIECE_COLOR_WHITE] = [],\n            _a);\n        piecesStringArr.forEach(function (charCode) {\n            if (charCode === constant_1.EMPTY_PIECE) {\n                return;\n            }\n            var piece = Piece_1.default.fromCharCode(charCode);\n            if (piece) {\n                pieceAll[piece.color].push(piece.type);\n            }\n        });\n        return pieceAll;\n    };\n    BoardHelper.prototype.isStateCount = function (c, piecesString) {\n        var allPieces = this.extractPiecesToArray(piecesString);\n        return allPieces[c].length === 1;\n    };\n    BoardHelper.prototype.checkCountable = function (color, piecesString) {\n        var pieceAll = this.extractPiecesToArray(piecesString);\n        var weaker = pieceAll[color];\n        var stronger = pieceAll[Piece_1.default.oppositeColor(color)];\n        return weaker.length <= 2 && stronger.length >= 2;\n    };\n    BoardHelper.prototype.checkCount = function (color, piecesString, force) {\n        var countChar = function (str, c) {\n            return str.join('').split(c).length - 1;\n        };\n        var charExist = function (str, c) {\n            return !!~str.indexOf(c);\n        };\n        var pieceAll = this.extractPiecesToArray(piecesString);\n        var weaker = pieceAll[color];\n        var stronger = pieceAll[Piece_1.default.oppositeColor(color)];\n        if (weaker.length === 1 && stronger.length > 1) {\n            if (!charExist(stronger, constant_1.PIECE_TYPE_FISH)) {\n                var count = 64;\n                var toukCount = countChar(stronger, constant_1.PIECE_TYPE_BOAT);\n                if (toukCount) {\n                    count = toukCount > 1 ? 8 : 16;\n                }\n                else if (countChar(stronger, constant_1.PIECE_TYPE_GENERAL) > 1) {\n                    count = 22;\n                }\n                else if (countChar(stronger, constant_1.PIECE_TYPE_HORSE) > 1) {\n                    count = 32;\n                }\n                else if (countChar(stronger, constant_1.PIECE_TYPE_GENERAL)) {\n                    count = 44;\n                }\n                // FIXME: when touk 2 and stronger.length > 8 => start > count\n                var start = stronger.length;\n                if (start > 4) {\n                    start = 4;\n                }\n                return new CountUpState(start, count);\n            }\n            return new CountUpState(0, 64);\n        }\n        else if (force && this.checkCountable(color, piecesString)) {\n            return new CountUpState(0, 64);\n        }\n        return null;\n    };\n    BoardHelper.prototype.isUpgradable = function (piece, point) {\n        if (piece.isTypeFish) {\n            if (piece.isColorBlack && point.y <= 2) {\n                return true;\n            }\n            if (piece.isColorWhite && point.y >= 5) {\n                return true;\n            }\n        }\n        return false;\n    };\n    return BoardHelper;\n}());\n;\nexports.default = new BoardHelper();\n//# sourceMappingURL=boardHelper.js.map","\"use strict\";\nvar _a, _b, _c, _d;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VERTICAL_NOTE_LETTERS_ENGLISH = exports.HORIZONTAL_NOTE_LETTERS_ENGLISH = exports.VERTICAL_NOTE_LETTERS = exports.HORIZONTAL_NOTE_LETTERS = exports.HORIZONTAL_CODE_LETTERS = exports.CELL_COUNT = exports.ROW_LAST_INDEX = exports.ROW_FIRST_INDEX = exports.ROW_NUMBER = exports.BOARD_SEPARATOR = exports.PIECE_COLOR_EMPTY = exports.EMPTY_PIECE = exports.PIECE_NAMES_ENGLISH = exports.PIECE_NAMES = exports.PIECE_TYPE_TRANSFORM_FISH = exports.PIECE_TYPE_FISH = exports.PIECE_TYPE_QUEEN = exports.PIECE_TYPE_KING = exports.PIECE_TYPE_GENERAL = exports.PIECE_TYPE_HORSE = exports.PIECE_TYPE_BOAT = exports.COLOR_NAMES_ENGLISH = exports.COLOR_NAMES = exports.PIECE_COLOR_BLACK = exports.PIECE_COLOR_WHITE = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nexports.PIECE_COLOR_WHITE = 'w';\nexports.PIECE_COLOR_BLACK = 'b';\nexports.COLOR_NAMES = (_a = {},\n    _a[exports.PIECE_COLOR_BLACK] = 'ខ្មៅ',\n    _a[exports.PIECE_COLOR_WHITE] = 'ស',\n    _a);\nexports.COLOR_NAMES_ENGLISH = (_b = {},\n    _b[exports.PIECE_COLOR_BLACK] = 'black',\n    _b[exports.PIECE_COLOR_WHITE] = 'white',\n    _b);\nexports.PIECE_TYPE_BOAT = 'b'; // Boat\nexports.PIECE_TYPE_HORSE = 'h'; // Horse\nexports.PIECE_TYPE_GENERAL = 'g'; // General\nexports.PIECE_TYPE_KING = 'k'; // King\nexports.PIECE_TYPE_QUEEN = 'q'; // Queen\nexports.PIECE_TYPE_FISH = 'f'; // Fish\nexports.PIECE_TYPE_TRANSFORM_FISH = 't'; // Transform fish\nexports.PIECE_NAMES = (_c = {},\n    _c[exports.PIECE_TYPE_BOAT] = 'ទូក',\n    _c[exports.PIECE_TYPE_HORSE] = 'សេះ',\n    _c[exports.PIECE_TYPE_GENERAL] = 'គោល',\n    _c[exports.PIECE_TYPE_KING] = 'ស្តេច',\n    _c[exports.PIECE_TYPE_QUEEN] = 'នាង',\n    _c[exports.PIECE_TYPE_FISH] = 'ត្រី',\n    _c[exports.PIECE_TYPE_TRANSFORM_FISH] = 'ត្រីបក',\n    _c);\nexports.PIECE_NAMES_ENGLISH = (_d = {},\n    _d[exports.PIECE_TYPE_BOAT] = 'boat',\n    _d[exports.PIECE_TYPE_HORSE] = 'horse',\n    _d[exports.PIECE_TYPE_GENERAL] = 'general',\n    _d[exports.PIECE_TYPE_KING] = 'king',\n    _d[exports.PIECE_TYPE_QUEEN] = 'queen',\n    _d[exports.PIECE_TYPE_FISH] = 'fish',\n    _d[exports.PIECE_TYPE_TRANSFORM_FISH] = 'transformed-fish',\n    _d);\nexports.EMPTY_PIECE = '.';\nexports.PIECE_COLOR_EMPTY = '.';\nexports.BOARD_SEPARATOR = '/';\nexports.ROW_NUMBER = 8;\nexports.ROW_FIRST_INDEX = 0;\nexports.ROW_LAST_INDEX = 7;\nexports.CELL_COUNT = exports.ROW_NUMBER * exports.ROW_NUMBER;\nexports.HORIZONTAL_CODE_LETTERS = 'abcdefgh';\nexports.HORIZONTAL_NOTE_LETTERS = ['ក', 'ខ', 'គ', 'ឃ', 'ង', 'ច', 'ឆ', 'ជ'];\nexports.VERTICAL_NOTE_LETTERS = ['០', '១', '២', '៣', '៤', '៥', '៦', '៧', '៨', '៩'];\nexports.HORIZONTAL_NOTE_LETTERS_ENGLISH = 'abcdefgh';\nexports.VERTICAL_NOTE_LETTERS_ENGLISH = Array.from({ length: 10 }, function (_, i) { return \"\" + i; });\n//# sourceMappingURL=constant.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"./constant\");\nfunction genMask() {\n    var mask = {};\n    mask[constant_1.PIECE_TYPE_BOAT] = [\n        [0, 1], [0, 2], [0, 3], [0, 4], [0, 5], [0, 6], [0, 7], [0, 8],\n        [0, -1], [0, -2], [0, -3], [0, -4], [0, -5], [0, -6], [0, -7], [0, -8],\n        [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\n        [-1, 0], [-2, 0], [-3, 0], [-4, 0], [-5, 0], [-6, 0], [-7, 0], [-8, 0],\n    ];\n    mask[constant_1.PIECE_TYPE_HORSE] = [\n        [-1, -2],\n        [1, -2],\n        [-2, -1],\n        [2, -1],\n        [-1, 2],\n        [1, 2],\n        [-2, 1],\n        [2, 1],\n    ];\n    mask[constant_1.PIECE_TYPE_QUEEN] = [\n        [-1, -1],\n        [1, -1],\n        [-1, 1],\n        [1, 1],\n    ];\n    mask[constant_1.PIECE_TYPE_GENERAL] = mask[constant_1.PIECE_TYPE_QUEEN].concat([\n        [0, 1],\n    ]);\n    mask[constant_1.PIECE_TYPE_KING] = mask[constant_1.PIECE_TYPE_GENERAL].concat([\n        [0, -1],\n        [1, 0],\n        [-1, 0],\n    ]);\n    mask[constant_1.PIECE_TYPE_FISH] = [\n        [0, 1],\n        [-1, 1],\n        [1, 1],\n    ];\n    mask[constant_1.PIECE_TYPE_TRANSFORM_FISH] = mask[constant_1.PIECE_TYPE_QUEEN];\n    return mask;\n}\nexports.default = genMask;\n//# sourceMappingURL=genMask.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MoveHelper = exports.HVPont = exports.genMask = exports.boardHelper = exports.Rectangle = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Rectangle_1 = require(\"./Rectangle\");\nObject.defineProperty(exports, \"Rectangle\", { enumerable: true, get: function () { return __importDefault(Rectangle_1).default; } });\nvar boardHelper_1 = require(\"./boardHelper\");\nObject.defineProperty(exports, \"boardHelper\", { enumerable: true, get: function () { return __importDefault(boardHelper_1).default; } });\nvar genMask_1 = require(\"./genMask\");\nObject.defineProperty(exports, \"genMask\", { enumerable: true, get: function () { return __importDefault(genMask_1).default; } });\nvar HVPont_1 = require(\"./HVPont\");\nObject.defineProperty(exports, \"HVPont\", { enumerable: true, get: function () { return __importDefault(HVPont_1).default; } });\nvar MoveHelper_1 = require(\"./MoveHelper\");\nObject.defineProperty(exports, \"MoveHelper\", { enumerable: true, get: function () { return __importDefault(MoveHelper_1).default; } });\n__exportStar(require(\"./constant\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KhmerChess = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\n__exportStar(require(\"./brain\"), exports);\n__exportStar(require(\"./kpgn\"), exports);\n__exportStar(require(\"./ren\"), exports);\n__exportStar(require(\"./other\"), exports);\nvar KhmerChess_1 = require(\"./KhmerChess\");\nObject.defineProperty(exports, \"KhmerChess\", { enumerable: true, get: function () { return __importDefault(KhmerChess_1).default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Captured = /** @class */ (function () {\n    function Captured(_a) {\n        var piece = _a.piece, fromBoardPoint = _a.fromBoardPoint, toGraveyardPoint = _a.toGraveyardPoint;\n        this.piece = piece;\n        this.fromBoardPoint = fromBoardPoint;\n        this.toGraveyardPoint = toGraveyardPoint;\n    }\n    return Captured;\n}());\nexports.default = Captured;\n//# sourceMappingURL=Captured.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar REN_1 = __importDefault(require(\"../ren/REN\"));\nvar Move_1 = __importDefault(require(\"./Move\"));\nvar Player_1 = __importDefault(require(\"./Player\"));\nvar Result_1 = __importDefault(require(\"./Result\"));\nvar Timer_1 = __importDefault(require(\"./Timer\"));\nvar base64Helper_1 = __importDefault(require(\"../other/base64Helper\"));\nvar KPGN = /** @class */ (function () {\n    function KPGN(ren) {\n        this.event = '';\n        this.date = null;\n        this.location = '';\n        this.players = {\n            white: new Player_1.default({}),\n            black: new Player_1.default({}),\n        };\n        this.result = {\n            last: {\n                whiteWin: false,\n                blackWin: false,\n            },\n            white: new Result_1.default({}),\n        };\n        this.timer = new Timer_1.default({});\n        this.ren = ren;\n        this.moves = [];\n    }\n    Object.defineProperty(KPGN.prototype, \"isCanMoveNext\", {\n        get: function () {\n            var _a;\n            return ((_a = this.latestMove) === null || _a === void 0 ? void 0 : _a.isCanMoveNext) && this.ren.isCanMoveNext;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KPGN.prototype, \"latestMove\", {\n        get: function () {\n            return this.moves[this.moves.length - 1] || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KPGN.prototype.addMove = function (move) {\n        if (move) {\n            this.moves.push(move);\n            return true;\n        }\n        return false;\n    };\n    KPGN.prototype.getMove = function (index) {\n        return this.moves[index] || null;\n    };\n    KPGN.prototype.loadRENStr = function (renStr) {\n        this.ren = REN_1.default.fromString(renStr);\n        if (this.latestMove) {\n            this.ren.syncWithMove(this.latestMove);\n        }\n    };\n    KPGN.prototype.loadMovesStrings = function (moves) {\n        var currentRen = this.ren;\n        this.moves = moves.reverse().map(function (moveStr) {\n            var move = Move_1.default.fromString(moveStr, currentRen);\n            if (move === null) {\n                throw new Error('Invalid move string');\n            }\n            currentRen = currentRen.backRen(move);\n            return move;\n        }).reverse();\n        if (this.latestMove) {\n            this.ren.syncWithMove(this.latestMove);\n        }\n    };\n    KPGN.prototype.fromJson = function (option) {\n        try {\n            var ren = option.ren, moves = option.moves, timer = option.timer, result = option.result, players = option.players, location = option.location, date = option.date, event = option.event;\n            this.event = event || this.event;\n            this.date = date ? new Date(date) : this.date;\n            this.location = location || this.location;\n            if (players) {\n                this.players = {\n                    white: new Player_1.default(players.white),\n                    black: new Player_1.default(players.black),\n                };\n            }\n            if (result) {\n                this.result = {\n                    last: result.last,\n                    white: new Result_1.default(result.white),\n                };\n            }\n            this.ren = REN_1.default.fromString(ren || '');\n            this.loadMovesStrings(moves || []);\n            this.timer = new Timer_1.default(timer || {});\n            return true;\n        }\n        catch (error) {\n            console.log(error);\n            return false;\n        }\n    };\n    KPGN.prototype.toJson = function () {\n        var renStr = this.ren.toString();\n        if (this.latestMove) {\n            renStr = this.latestMove.renStr;\n        }\n        return {\n            event: this.event,\n            date: this.date ? this.date.toString() : '',\n            location: this.location,\n            players: {\n                white: this.players.white.toJson(),\n                black: this.players.black.toJson(),\n            },\n            result: {\n                last: {\n                    whiteWin: this.result.last.whiteWin,\n                    blackWin: this.result.last.blackWin,\n                },\n                white: this.result.white.toJson(),\n            },\n            timer: this.timer.toJson(),\n            moves: this.moves.map(function (m) { return m.toString(); }),\n            ren: renStr,\n        };\n    };\n    KPGN.prototype.fromBase64 = function (str) {\n        var json = JSON.parse(base64Helper_1.default.decode(str));\n        return this.fromJson(json);\n    };\n    KPGN.prototype.toBase64 = function () {\n        var jsStr = JSON.stringify(this.toJson());\n        return base64Helper_1.default.encode(jsStr);\n    };\n    return KPGN;\n}());\nexports.default = KPGN;\n//# sourceMappingURL=KPGN.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar brain_1 = require(\"../brain\");\nvar ren_1 = require(\"../ren\");\nvar constant_1 = require(\"../ren/constant\");\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\nvar Point_1 = __importDefault(require(\"../ren/Point\"));\nvar Captured_1 = __importDefault(require(\"./Captured\"));\nvar Move = /** @class */ (function () {\n    function Move(_a) {\n        var piece = _a.piece, moveFrom = _a.moveFrom, moveTo = _a.moveTo, isUpgrading = _a.isUpgrading, captured = _a.captured;\n        this.renStr = null;\n        this.boardStatus = {\n            attacker: null,\n            winColor: null,\n            stuckColor: null,\n            drawCountColor: null,\n        };\n        this.isStartCounting = false;\n        this.piece = piece;\n        this.moveFrom = moveFrom;\n        this.moveTo = moveTo;\n        this.isUpgrading = !!isUpgrading;\n        this.captured = captured || null;\n        if (brain_1.boardHelper.isUpgradable(piece, moveTo)) {\n            this.isUpgrading = true;\n            piece.upgrade();\n        }\n        this.kqJumping = new ren_1.KqJumped();\n    }\n    Move.prototype.setRen = function (ren) {\n        ren.checkBoardStatus(this);\n        ren.kqJumped.checkKQMoved(this);\n        ren.checkCountStatus(this);\n    };\n    Move.prototype.syncRen = function (ren) {\n        this.renStr = ren.toString();\n    };\n    Object.defineProperty(Move.prototype, \"isCanMoveNext\", {\n        get: function () {\n            return !(this.boardStatus.drawCountColor || this.boardStatus.winColor || this.boardStatus.stuckColor);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isWhiteKingJumping\", {\n        get: function () {\n            return !!this.kqJumping.whiteKing;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isWhiteQueenJumping\", {\n        get: function () {\n            return !!this.kqJumping.whiteQueen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isBlackKingJumping\", {\n        get: function () {\n            return !!this.kqJumping.blackKing;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isBlackQueenJumping\", {\n        get: function () {\n            return !!this.kqJumping.blackQueen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"attacker\", {\n        get: function () {\n            return this.boardStatus.attacker || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"winColor\", {\n        get: function () {\n            return this.boardStatus.winColor || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"stuckColor\", {\n        get: function () {\n            return this.boardStatus.stuckColor || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"drawCountColor\", {\n        get: function () {\n            return this.boardStatus.drawCountColor || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isDraw\", {\n        get: function () {\n            return this.stuckColor || this.drawCountColor;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isGameOver\", {\n        get: function () {\n            return this.winColor || this.isDraw;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Move.fromString = function (str, ren) {\n        var piece = Piece_1.default.fromCharCode(str[0]);\n        if (piece === null) {\n            return null;\n        }\n        var moveFrom = Point_1.default.fromIndexCode(str.substr(1, 2));\n        var moveTo = Point_1.default.fromIndexCode(str.substr(3, 2));\n        var move = new Move({\n            piece: piece,\n            moveFrom: moveFrom,\n            moveTo: moveTo,\n        });\n        var killIndex = str.indexOf(constant_1.PIECE_FLAG_KILL);\n        if (!!~killIndex) {\n            var match = str.substr(killIndex + 1).match(/^(\\d+)/);\n            if (match === null) {\n                return null;\n            }\n            var gyIndex = Number(match[1]);\n            var capturedPiece = ren.graveyard.get(gyIndex);\n            if (!capturedPiece) {\n                throw new Error('Invalid captured index');\n            }\n            move.captured = new Captured_1.default({\n                fromBoardPoint: moveTo,\n                toGraveyardPoint: Point_1.default.fromIndexGraveyardIndex(gyIndex),\n                piece: capturedPiece,\n            });\n        }\n        var jumpingIndex = str.indexOf(constant_1.PIECE_FLAG_JUMP);\n        if (!!~jumpingIndex) {\n            var match = str.substr(jumpingIndex + 1).match(/^(\\d+)/);\n            if (match === null) {\n                return null;\n            }\n            var n = Number(match[1]);\n            move.kqJumping = ren_1.KqJumped.fromNumber(n);\n        }\n        var startCountingIndex = str.indexOf(constant_1.PIECE_FLAG_START_COUNTING);\n        if (!!~startCountingIndex) {\n            move.isStartCounting = true;\n        }\n        move.setRen(ren);\n        return move;\n    };\n    Move.prototype.toString = function () {\n        var pCode = this.piece.pieceCharCode;\n        var fIndexCode = this.moveFrom.indexCode;\n        var tIndexCode = this.moveTo.indexCode;\n        var flags = '';\n        if (this.captured) {\n            flags += constant_1.PIECE_FLAG_KILL + this.captured.toGraveyardPoint.index;\n        }\n        if (this.kqJumping.isJumped) {\n            flags += constant_1.PIECE_FLAG_JUMP + this.kqJumping.toNumber();\n        }\n        if (this.isUpgrading) {\n            flags += constant_1.PIECE_FLAG_UPGRADE;\n        }\n        if (this.isStartCounting) {\n            flags += constant_1.PIECE_FLAG_START_COUNTING;\n        }\n        return \"\" + pCode + fIndexCode + tIndexCode + flags;\n    };\n    Move.prototype.getJumpingMessage = function (isEnglish) {\n        var jump = '';\n        if (isEnglish) {\n            if (this.isWhiteKingJumping) {\n                jump += ' white king jumping';\n            }\n            if (this.isWhiteQueenJumping) {\n                jump += ' white queen jumping';\n            }\n            if (this.isBlackKingJumping) {\n                jump += ' black king jumping';\n            }\n            if (this.isBlackQueenJumping) {\n                jump += ' black queen jumping';\n            }\n        }\n        else {\n            if (this.isWhiteKingJumping) {\n                jump += ' ស្តេច​ស​ភ្លោះ';\n            }\n            if (this.isWhiteQueenJumping) {\n                jump += ' នាង​ស​ភ្លោះ';\n            }\n            if (this.isBlackKingJumping) {\n                jump += ' ស្តេច​ខ្មៅ​ភ្លោះ';\n            }\n            if (this.isBlackQueenJumping) {\n                jump += ' នាង​ខ្មៅ​ភ្លោះ';\n            }\n        }\n        return jump;\n    };\n    Move.prototype.getMessage = function (isEnglish) {\n        if (isEnglish) {\n            var captured = '';\n            if (this.captured) {\n                captured = \" captures \" + this.captured.piece.titleEnglish;\n            }\n            var upgrade = this.isUpgrading ? ' transforms' : '';\n            var jump = this.getJumpingMessage(isEnglish);\n            return \"[\" + this.toString() + \"] \" + this.piece.titleEnglish + \" moved from \" + this.moveFrom.titleEnglish + \" to \" + this.moveTo.titleEnglish + upgrade + captured + \" \" + jump;\n        }\n        else {\n            var captured = '';\n            if (this.captured) {\n                captured = \" \\u179F\\u17CA\\u17B8\" + this.captured.piece.title;\n            }\n            var upgrade = this.isUpgrading ? ' បក' : '';\n            var jump = this.getJumpingMessage(isEnglish);\n            return \"[\" + this.toString() + \"] \" + this.piece.title + \" \\u178A\\u17BE\\u179A\\u200B\\u1796\\u17B8 \" + this.moveFrom.title + \" \\u1791\\u17C5 \" + this.moveTo.title + upgrade + captured + \" \" + jump;\n        }\n    };\n    return Move;\n}());\nexports.default = Move;\n//# sourceMappingURL=Move.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Player = /** @class */ (function () {\n    function Player(_a) {\n        var id = _a.id, name = _a.name;\n        this.id = id || '';\n        this.name = name || '';\n    }\n    Player.prototype.toJson = function () {\n        return {\n            id: this.id,\n            name: this.name,\n        };\n    };\n    return Player;\n}());\nexports.default = Player;\n//# sourceMappingURL=Player.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Result = /** @class */ (function () {\n    function Result(_a) {\n        var win = _a.win, draw = _a.draw, lost = _a.lost;\n        this.win = win || 0;\n        this.draw = draw || 0;\n        this.lost = lost || 0;\n    }\n    Result.prototype.toJson = function () {\n        return {\n            win: this.win,\n            draw: this.draw,\n            lost: this.lost,\n        };\n    };\n    return Result;\n}());\nexports.default = Result;\n//# sourceMappingURL=Result.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Timer = /** @class */ (function () {\n    function Timer(_a) {\n        var totalSecond = _a.totalSecond, bonusTime = _a.bonusTime, currentWhite = _a.currentWhite, currentBlack = _a.currentBlack;\n        this.bonusTime = bonusTime || 0;\n        this.totalSecond = totalSecond || 0;\n        this.currentWhite = currentWhite || 0;\n        this.currentBlack = currentBlack || 0;\n    }\n    Timer.prototype.toJson = function () {\n        return {\n            totalSecond: this.totalSecond,\n            bonusTime: this.bonusTime,\n            currentWhite: this.currentWhite,\n            currentBlack: this.currentBlack,\n        };\n    };\n    return Timer;\n}());\nexports.default = Timer;\n//# sourceMappingURL=Timer.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Timer = exports.Result = exports.Player = exports.Captured = exports.Move = exports.KPGN = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar KPGN_1 = require(\"./KPGN\");\nObject.defineProperty(exports, \"KPGN\", { enumerable: true, get: function () { return __importDefault(KPGN_1).default; } });\nvar Move_1 = require(\"./Move\");\nObject.defineProperty(exports, \"Move\", { enumerable: true, get: function () { return __importDefault(Move_1).default; } });\nvar Captured_1 = require(\"./Captured\");\nObject.defineProperty(exports, \"Captured\", { enumerable: true, get: function () { return __importDefault(Captured_1).default; } });\nvar Player_1 = require(\"./Player\");\nObject.defineProperty(exports, \"Player\", { enumerable: true, get: function () { return __importDefault(Player_1).default; } });\nvar Result_1 = require(\"./Result\");\nObject.defineProperty(exports, \"Result\", { enumerable: true, get: function () { return __importDefault(Result_1).default; } });\nvar Timer_1 = require(\"./Timer\");\nObject.defineProperty(exports, \"Timer\", { enumerable: true, get: function () { return __importDefault(Timer_1).default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventHandler = /** @class */ (function () {\n    function EventHandler(options) {\n        this._onEventListeners = {};\n        this._propEvent = [];\n        this._isLockProp = false;\n        this._onEventListeners = {};\n        this._propEvent = [];\n        this.events = options.events;\n    }\n    EventHandler.prototype.destroy = function () {\n        this._onEventListeners = {};\n        this._propEvent = [];\n    };\n    EventHandler.prototype._checkPropEvent = function () {\n        if (this._isLockProp) {\n            return;\n        }\n        while (this._propEvent.length) {\n            var event = this._propEvent.shift();\n            this._checkOnEvent(event.name, event.data);\n        }\n    };\n    EventHandler.prototype._addPropEvent = function (event, data) {\n        this._propEvent.push({\n            name: event,\n            data: data,\n        });\n        this._checkPropEvent();\n    };\n    EventHandler.prototype._guardEventName = function (eventName) {\n        if (!eventName) {\n            throw new Error('invalid event name');\n        }\n    };\n    EventHandler.prototype._checkOnEvent = function (eventName, data) {\n        this._guardEventName(eventName);\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\n        this._onEventListeners[eventName].forEach(function (listener) {\n            listener(data);\n        });\n    };\n    EventHandler.prototype._addOnEventListener = function (eventName, listener) {\n        this._guardEventName(eventName);\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\n        this._onEventListeners[eventName].push(listener);\n    };\n    EventHandler.prototype._removeOnEventListener = function (eventName, listener) {\n        this._guardEventName(eventName);\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\n        var index = this._onEventListeners[eventName].indexOf(listener);\n        ~index && this._onEventListeners[eventName].splice(index, 1);\n    };\n    return EventHandler;\n}());\nexports.default = EventHandler;\n//# sourceMappingURL=EventHandler.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://stackoverflow.com/questions/246801/how-can-you-encode-a-string-to-base64-in-javascript\n/**\n*\n*  Base64 encode / decode\n*  http://www.webtoolkit.info/\n*\n**/\nvar Base64 = {\n    // private property\n    _keyStr: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n    // public method for encoding\n    encode: function (input) {\n        var output = '';\n        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n        var i = 0;\n        input = Base64._utf8_encode(input);\n        while (i < input.length) {\n            chr1 = input.charCodeAt(i++);\n            chr2 = input.charCodeAt(i++);\n            chr3 = input.charCodeAt(i++);\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n            if (isNaN(chr2)) {\n                enc3 = enc4 = 64;\n            }\n            else if (isNaN(chr3)) {\n                enc4 = 64;\n            }\n            output = output +\n                this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\n                this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\n        }\n        return output;\n    },\n    // public method for decoding\n    decode: function (input) {\n        var output = '';\n        var chr1, chr2, chr3;\n        var enc1, enc2, enc3, enc4;\n        var i = 0;\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n        while (i < input.length) {\n            enc1 = this._keyStr.indexOf(input.charAt(i++));\n            enc2 = this._keyStr.indexOf(input.charAt(i++));\n            enc3 = this._keyStr.indexOf(input.charAt(i++));\n            enc4 = this._keyStr.indexOf(input.charAt(i++));\n            chr1 = (enc1 << 2) | (enc2 >> 4);\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            chr3 = ((enc3 & 3) << 6) | enc4;\n            output = output + String.fromCharCode(chr1);\n            if (enc3 != 64) {\n                output = output + String.fromCharCode(chr2);\n            }\n            if (enc4 != 64) {\n                output = output + String.fromCharCode(chr3);\n            }\n        }\n        output = Base64._utf8_decode(output);\n        return output;\n    },\n    // private method for UTF-8 encoding\n    _utf8_encode: function (string) {\n        string = string.replace(/\\r\\n/g, '\\n');\n        var utftext = '';\n        for (var n = 0; n < string.length; n++) {\n            var c = string.charCodeAt(n);\n            if (c < 128) {\n                utftext += String.fromCharCode(c);\n            }\n            else if ((c > 127) && (c < 2048)) {\n                utftext += String.fromCharCode((c >> 6) | 192);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n            else {\n                utftext += String.fromCharCode((c >> 12) | 224);\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n        }\n        return utftext;\n    },\n    // private method for UTF-8 decoding\n    _utf8_decode: function (utftext) {\n        var string = '';\n        var i = 0;\n        var c, c1, c2 = 0;\n        c = c1 = c2 = 0;\n        while (i < utftext.length) {\n            c = utftext.charCodeAt(i);\n            if (c < 128) {\n                string += String.fromCharCode(c);\n                i++;\n            }\n            else if ((c > 191) && (c < 224)) {\n                c1 = utftext.charCodeAt(i + 1);\n                string += String.fromCharCode(((c & 31) << 6) | (c1 & 63));\n                i += 2;\n            }\n            else {\n                c1 = utftext.charCodeAt(i + 1);\n                c2 = utftext.charCodeAt(i + 2);\n                string += String.fromCharCode(((c & 15) << 12) | ((c1 & 63) << 6) | (c2 & 63));\n                i += 3;\n            }\n        }\n        return string;\n    },\n};\nexports.default = Base64;\n//# sourceMappingURL=base64Helper.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.table = exports.EventHandler = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar EventHandler_1 = require(\"./EventHandler\");\nObject.defineProperty(exports, \"EventHandler\", { enumerable: true, get: function () { return __importDefault(EventHandler_1).default; } });\nvar table_1 = require(\"./table\");\nObject.defineProperty(exports, \"table\", { enumerable: true, get: function () { return __importDefault(table_1).default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction renderLine(pieces) {\n    return pieces.map(function (piece) {\n        return \" \" + (piece === null ? ' ' : piece.pieceCharCode) + \" \";\n    }).join('┃');\n}\nfunction asciiTable(ren) {\n    var piecesMultiArray = ren.board.piecesMultiArray;\n    var str = '  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓';\n    var result = __spreadArray([], piecesMultiArray, true).reverse().reduce(function (s, subArr, i) {\n        var rs = renderLine(subArr);\n        var bottom = i === piecesMultiArray.length - 1 ?\n            '┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛' :\n            '┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫';\n        s += \"\\n\" + (8 - i) + \" \\u2503\" + rs + \"\\u2503\\n  \" + bottom;\n        return s;\n    }, str);\n    var gyTStr = ren.graveyard.pieces.map(function () { return '━━━'; }).join('┳');\n    var gyStr = renderLine(ren.graveyard.pieces);\n    var gyBStr = ren.graveyard.pieces.map(function () { return '━━━'; }).join('┻');\n    var graveyardStr = \"  \\u250F\" + gyTStr + \"\\u2513\\n  \\u2503\" + gyStr + \"\\u2503\\n  \\u2517\" + gyBStr + \"\\u251B\";\n    return result + \"\\n    a   b   c   d   e   f   g   h\\n\" + graveyardStr;\n}\nexports.default = asciiTable;\n/*\n  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓\n8 ┃   ┃   ┃   ┃   ┃ k ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n7 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n6 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n5 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n4 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n3 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n2 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n1 ┃   ┃   ┃   ┃ K ┃   ┃   ┃   ┃   ┃\n  ┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛\n    a   b   c   d   e   f   g   h\n  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓\n  ┃ b ┃ h ┃ g ┃ q ┃ g ┃ h ┃ b ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ B ┃ H ┃ G ┃ Q ┃ G ┃ H ┃ B ┃\n  ┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛\n */\n//# sourceMappingURL=table.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Piece_1 = __importDefault(require(\"./Piece\"));\nvar PieceIndex_1 = __importDefault(require(\"./PieceIndex\"));\nvar constant_1 = require(\"./constant\");\nvar constant_2 = require(\"../brain/constant\");\nvar Point_1 = __importDefault(require(\"./Point\"));\n/**\n * BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb => bhgqkghb/......../ffffffff/......../......../FFFFFFFF/......../BHGKQGHB\n */\nvar Board = /** @class */ (function () {\n    function Board(boardStr) {\n        this.pieceIndices = Array.from({\n            length: constant_2.CELL_COUNT,\n        }, function (_, i) {\n            var point = Point_1.default.fromIndex(i);\n            return new PieceIndex_1.default(point, null);\n        });\n        if (!boardStr) {\n            boardStr = constant_1.DEFAULT_BOARD_STR;\n        }\n        var newBoardStr = this.extract(boardStr).replace(/\\//g, '');\n        if (newBoardStr.length < constant_2.CELL_COUNT ||\n            !Piece_1.default.isValidPiecesString(newBoardStr)) {\n            throw new Error(\"Invalid board string \" + boardStr);\n        }\n        this.pieceIndices = newBoardStr.split('').map(function (charCode, i) {\n            var point = Point_1.default.fromIndex(i);\n            return new PieceIndex_1.default(point, charCode === constant_2.EMPTY_PIECE ? null : Piece_1.default.fromCharCode(charCode));\n        });\n    }\n    Object.defineProperty(Board.prototype, \"piecesMultiArray\", {\n        get: function () {\n            var arr = [[], [], [], [], [], [], [], []];\n            this.pieceIndices.forEach(function (pieceIndex) {\n                arr[pieceIndex.point.y][pieceIndex.point.x] = pieceIndex.piece;\n            });\n            return arr;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Board.prototype, \"pieces\", {\n        get: function () {\n            return this.pieceIndices.map(function (pieceIndex) {\n                return pieceIndex.piece;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Board.prototype, \"whiteKing\", {\n        get: function () {\n            return this.pieceIndices.find(function (pieceIndex) {\n                return pieceIndex.piece && pieceIndex.piece.isTypeKing && pieceIndex.piece.isColorWhite;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Board.prototype, \"blackKing\", {\n        get: function () {\n            return this.pieceIndices.find(function (pieceIndex) {\n                return pieceIndex.piece && pieceIndex.piece.isTypeKing && pieceIndex.piece.isColorBlack;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Board.prototype.getKing = function (color) {\n        return Piece_1.default.isWhiteColor(color) ? this.whiteKing : this.blackKing;\n    };\n    Board.prototype.compress = function (str) {\n        var reg = new RegExp(\"(\\\\\" + constant_2.EMPTY_PIECE + \"+)\", 'g');\n        return str.replace(reg, function ($1) { return $1.length; });\n    };\n    Board.prototype.extract = function (str) {\n        return str.replace(/(\\d+)/g, function ($1) {\n            // $1 == 3 => '...', bh6 => 'bh......'\n            return Array.from({\n                length: $1,\n            }, function () { return constant_2.EMPTY_PIECE; }).join('');\n        });\n    };\n    Board.prototype.toStringFull = function (pieceIndices) {\n        if (pieceIndices === void 0) { pieceIndices = this.pieceIndices; }\n        var str = pieceIndices.map(function (pieceIndex, i) {\n            var p = pieceIndex.toPieceCharCode();\n            if (i && i % constant_2.ROW_NUMBER === 0 && i !== constant_2.CELL_COUNT) {\n                return \"\" + constant_2.BOARD_SEPARATOR + p;\n            }\n            return p;\n        }).join('');\n        return str;\n    };\n    Board.prototype.toStringFullNoSeparate = function () {\n        var str = this.toStringFull();\n        str = str.replace(/\\//g, '');\n        return str;\n    };\n    Board.prototype.toString = function (pieceIndices) {\n        var str = this.toStringFull(pieceIndices);\n        str = this.compress(str);\n        return str;\n    };\n    Board.prototype.getPieceAtIndex = function (index) {\n        return this.pieceIndices[index].piece;\n    };\n    Board.prototype.setPieceAtIndex = function (index, piece) {\n        this.pieceIndices[index].piece = piece;\n    };\n    return Board;\n}());\nexports.default = Board;\n//# sourceMappingURL=Board.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar brain_1 = require(\"../brain\");\nvar constant_1 = require(\"./constant\");\n// 23.-\nvar CountUp = /** @class */ (function () {\n    function CountUp() {\n        this.countingToNumber = null;\n        this.countingNumber = null;\n        this.isCountingUp = false;\n        this.color = null;\n    }\n    Object.defineProperty(CountUp.prototype, \"isWhite\", {\n        get: function () {\n            return this.color === brain_1.PIECE_COLOR_WHITE;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CountUp.prototype, \"isBlack\", {\n        get: function () {\n            return this.color === brain_1.PIECE_COLOR_BLACK;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CountUp.prototype, \"isWhiteCounting\", {\n        get: function () {\n            return this.isCounting && this.isWhite;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CountUp.prototype, \"isBlackCounting\", {\n        get: function () {\n            return this.isCounting && !this.isWhite;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CountUp.prototype, \"isCounting\", {\n        get: function () {\n            return this.countingToNumber !== null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CountUp.prototype, \"isCountingOut\", {\n        get: function () {\n            if (!this.isCounting || this.countingNumber === null ||\n                this.countingToNumber === null) {\n                return false;\n            }\n            return this.countingNumber >= this.countingToNumber;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CountUp.prototype.set = function (color, countingToNumber, countingNumber) {\n        this.color = color;\n        this.countingToNumber = countingToNumber;\n        this.countingNumber = countingNumber;\n    };\n    CountUp.prototype.clear = function () {\n        this.color = null;\n        this.countingToNumber = null;\n        this.countingNumber = null;\n    };\n    CountUp.prototype.checkUp = function (color) {\n        if (this.countingNumber !== null && color === this.color) {\n            this.countingNumber++;\n            this.isCountingUp = true;\n        }\n        else {\n            this.isCountingUp = false;\n        }\n    };\n    CountUp.fromString = function (countUpStr) {\n        if (!countUpStr) {\n            countUpStr = constant_1.NOT_SET + \".\" + constant_1.NOT_SET + \"@\" + constant_1.NOT_SET;\n        }\n        var countUp = new CountUp();\n        var countingUp = countUpStr.split('@');\n        if (countingUp[1] !== constant_1.NOT_SET) {\n            countUp.countingToNumber = Number(countingUp[1]);\n        }\n        var countingUpWB = countingUp[0].split('.');\n        if (countingUpWB[0] !== constant_1.NOT_SET) {\n            countUp.color = brain_1.PIECE_COLOR_WHITE;\n            countUp.countingNumber = Number(countingUpWB[0]);\n        }\n        if (countingUpWB[1] !== constant_1.NOT_SET) {\n            countUp.color = brain_1.PIECE_COLOR_BLACK;\n            countUp.countingNumber = Number(countingUpWB[1]);\n        }\n        return countUp;\n    };\n    CountUp.prototype.toString = function () {\n        var whiteCountingDow = this.isCounting && this.isWhite ? this.countingNumber : constant_1.NOT_SET;\n        var blackCountingDow = this.isCounting && !this.isWhite ? this.countingNumber : constant_1.NOT_SET;\n        var str = \"\" + whiteCountingDow;\n        str += \".\" + blackCountingDow;\n        str += \"@\" + (this.isCounting ? this.countingToNumber : constant_1.NOT_SET);\n        return str;\n    };\n    return CountUp;\n}());\nexports.default = CountUp;\n//# sourceMappingURL=CountUp.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Piece_1 = __importDefault(require(\"./Piece\"));\nvar Graveyard = /** @class */ (function () {\n    function Graveyard(graveyardStr) {\n        this.pieces = [];\n        if (graveyardStr) {\n            if (graveyardStr.length > 30 ||\n                !Piece_1.default.isValidPiecesString(graveyardStr, true)) {\n                throw new Error(\"Invalid graveyard string \" + graveyardStr);\n            }\n            this.pieces = graveyardStr.split('').map(function (charCode, i) {\n                var p = Piece_1.default.fromCharCode(charCode);\n                return p;\n            }).filter(function (piece) {\n                return piece !== null;\n            });\n        }\n    }\n    Object.defineProperty(Graveyard.prototype, \"lastIndex\", {\n        get: function () {\n            return this.pieces.length - 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Graveyard.prototype.get = function (index) {\n        return this.pieces[index];\n    };\n    Graveyard.prototype.removeAtIndex = function (index) {\n        if (!!this.get(index)) {\n            this.pieces.splice(index, 1);\n        }\n        return true;\n    };\n    Graveyard.prototype.toString = function () {\n        return this.pieces.map(function (p) {\n            return p.pieceCharCode;\n        }).join('');\n    };\n    return Graveyard;\n}());\nexports.default = Graveyard;\n//# sourceMappingURL=Graveyard.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar constant_2 = require(\"./constant\");\nvar Piece_1 = __importDefault(require(\"./Piece\"));\n/**\n * King has attacked, this will effect jumping\n */\nvar KAttacked = /** @class */ (function () {\n    function KAttacked(kAttackedStr) {\n        this.whiteKing = false;\n        this.blackKing = false;\n        if (kAttackedStr) {\n            this.whiteKing = !!~kAttackedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING));\n            this.blackKing = !!~kAttackedStr.indexOf(constant_1.PIECE_TYPE_KING);\n        }\n    }\n    KAttacked.prototype.toString = function () {\n        var str = \"\" + (this.whiteKing ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING) : constant_2.NOT_SET);\n        str += \"\" + (this.blackKing ? constant_1.PIECE_TYPE_KING : constant_2.NOT_SET);\n        return str;\n    };\n    return KAttacked;\n}());\nexports.default = KAttacked;\n//# sourceMappingURL=KAttacked.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar constant_2 = require(\"./constant\");\nvar Piece_1 = __importDefault(require(\"./Piece\"));\n/**\n * King or Queen has jumped, the will effect jumping\n */\nvar KqJumped = /** @class */ (function () {\n    function KqJumped(kqJumpedStr) {\n        var _a;\n        this.whiteKing = false;\n        this.whiteQueen = false;\n        this.blackKing = false;\n        this.blackQueen = false;\n        this.keyCodes = {\n            blackKing: Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN),\n            whiteKing: Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING),\n            whiteQueen: constant_1.PIECE_TYPE_KING,\n            blackQueen: constant_1.PIECE_TYPE_QUEEN,\n        };\n        this.codeKeys = (_a = {},\n            _a[Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN)] = 'blackKing: ',\n            _a[Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING)] = 'whiteKing: ',\n            _a[constant_1.PIECE_TYPE_KING] = 'whiteQueen: ',\n            _a[constant_1.PIECE_TYPE_QUEEN] = 'blackQueen: ',\n            _a);\n        if (kqJumpedStr) {\n            this.whiteKing = !!~kqJumpedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING));\n            this.whiteQueen = !!~kqJumpedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN));\n            this.blackKing = !!~kqJumpedStr.indexOf(constant_1.PIECE_TYPE_KING);\n            this.blackQueen = !!~kqJumpedStr.indexOf(constant_1.PIECE_TYPE_QUEEN);\n        }\n    }\n    Object.defineProperty(KqJumped.prototype, \"isJumped\", {\n        get: function () {\n            return this.whiteKing || this.whiteQueen || this.blackKing || this.blackQueen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KqJumped.prototype.setProp = function (key, value) {\n        this[key] = value;\n    };\n    KqJumped.prototype.applyJumping = function (propKey, move) {\n        if (!this[propKey]) {\n            move.kqJumping.setProp(propKey, true);\n            this.setProp(propKey, true);\n        }\n    };\n    KqJumped.prototype.checkKQMoved = function (move) {\n        if (move.attacker || move.captured) {\n            this.applyJumping('whiteKing', move);\n            this.applyJumping('blackKing', move);\n            this.applyJumping('whiteQueen', move);\n            this.applyJumping('blackQueen', move);\n        }\n        var piece = move.piece;\n        if (piece.isTypeKing) {\n            if (piece.isColorWhite) {\n                this.applyJumping('whiteKing', move);\n            }\n            else {\n                this.applyJumping('blackKing', move);\n            }\n        }\n        else if (piece.isTypeQueen) {\n            if (piece.isColorWhite) {\n                this.applyJumping('whiteQueen', move);\n            }\n            else {\n                this.applyJumping('blackQueen', move);\n            }\n        }\n    };\n    KqJumped.prototype.toString = function () {\n        var str = \"\" + (this.whiteKing ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING) : constant_2.NOT_SET);\n        str += \"\" + (this.whiteQueen ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN) : constant_2.NOT_SET);\n        str += \"\" + (this.blackKing ? constant_1.PIECE_TYPE_KING : constant_2.NOT_SET);\n        str += \"\" + (this.blackQueen ? constant_1.PIECE_TYPE_QUEEN : constant_2.NOT_SET);\n        return str;\n    };\n    KqJumped.prototype.toNumber = function () {\n        var str = \"\" + (this.whiteKing ? 1 : 0);\n        str += \"\" + (this.whiteQueen ? 1 : 0);\n        str += \"\" + (this.blackKing ? 1 : 0);\n        str += \"\" + (this.blackQueen ? 1 : 0);\n        return parseInt(str, 2);\n    };\n    KqJumped.fromNumber = function (n) {\n        var b = ('0000' + Number(n).toString(2)).substr(-4);\n        var kqJumped = new KqJumped();\n        kqJumped.whiteKing = b[0] === '1';\n        kqJumped.whiteQueen = b[1] === '1';\n        kqJumped.blackKing = b[2] === '1';\n        kqJumped.blackQueen = b[3] === '1';\n        return kqJumped;\n    };\n    return KqJumped;\n}());\nexports.default = KqJumped;\n//# sourceMappingURL=KqJumped.js.map","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar Piece = /** @class */ (function () {\n    function Piece(type, color) {\n        this.type = Piece.toNormalCharCode(type);\n        this.color = color;\n    }\n    Object.defineProperty(Piece.prototype, \"colorOpponent\", {\n        get: function () {\n            return Piece.oppositeColor(this.color);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"pieceCharCode\", {\n        get: function () {\n            if (this.isColorWhite) {\n                return this.pieceCharCodeWhite;\n            }\n            return this.type;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"pieceCharCodeWhite\", {\n        get: function () {\n            return Piece.toWhiteCharCode(this.type);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"title\", {\n        get: function () {\n            return \"\" + constant_1.PIECE_NAMES[this.type] + constant_1.COLOR_NAMES[this.color];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"titleEnglish\", {\n        get: function () {\n            return constant_1.COLOR_NAMES_ENGLISH[this.color] + \"-\" + constant_1.PIECE_NAMES_ENGLISH[this.type];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Piece.prototype._isTypeEqual = function (type) {\n        return this.type === type;\n    };\n    Object.defineProperty(Piece.prototype, \"isTypeKing\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_KING);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeQueen\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_QUEEN);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeBoat\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_BOAT);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeHorse\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_HORSE);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeGeneral\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_GENERAL);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeFish\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_FISH);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeTransformedFish\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_TRANSFORM_FISH);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isColorBlack\", {\n        get: function () {\n            return Piece.isBlackColor(this.color);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isColorWhite\", {\n        get: function () {\n            return Piece.isWhiteColor(this.color);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Piece.fromCharCode = function (charCode) {\n        if (!Piece.isValidPiece(charCode)) {\n            return null;\n        }\n        var color = Piece.isWhiteCharCode(charCode) ? constant_1.PIECE_COLOR_WHITE : constant_1.PIECE_COLOR_BLACK;\n        var type = Piece.toNormalCharCode(charCode);\n        return new Piece(type, color);\n    };\n    Object.defineProperty(Piece.prototype, \"originPiece\", {\n        get: function () {\n            if (this.isTypeTransformedFish) {\n                return new Piece(constant_1.PIECE_TYPE_FISH, this.color);\n            }\n            return this;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece, \"pieceChars\", {\n        get: function () {\n            return [\n                constant_1.PIECE_TYPE_BOAT,\n                constant_1.PIECE_TYPE_HORSE,\n                constant_1.PIECE_TYPE_GENERAL,\n                constant_1.PIECE_TYPE_KING,\n                constant_1.PIECE_TYPE_QUEEN,\n                constant_1.PIECE_TYPE_FISH,\n                constant_1.PIECE_TYPE_TRANSFORM_FISH,\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece, \"colorChars\", {\n        get: function () {\n            return [\n                constant_1.PIECE_COLOR_WHITE,\n                constant_1.PIECE_COLOR_BLACK,\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Piece.toWhiteCharCode = function (charCode) {\n        return charCode.toUpperCase();\n    };\n    Piece.isWhiteCharCode = function (charCode) {\n        return charCode === charCode.toUpperCase();\n    };\n    Piece.toBlackCharCode = function (charCode) {\n        return charCode.toLowerCase();\n    };\n    Piece.toNormalCharCode = function (charCode) {\n        return Piece.toBlackCharCode(charCode);\n    };\n    Piece.isValidPiece = function (charCode) {\n        return charCode !== constant_1.EMPTY_PIECE;\n    };\n    Piece.isWhiteColor = function (color) {\n        return color === constant_1.PIECE_COLOR_WHITE;\n    };\n    Piece.isBlackColor = function (color) {\n        return color === constant_1.PIECE_COLOR_BLACK;\n    };\n    Piece.oppositeColor = function (color) {\n        return Piece.isWhiteColor(color) ? constant_1.PIECE_COLOR_BLACK : constant_1.PIECE_COLOR_WHITE;\n    };\n    Piece.isValidPiecesString = function (str, onlyPiece) {\n        var ruler = onlyPiece ? allPiecesString.filter(function (c) {\n            return !~[constant_1.EMPTY_PIECE, constant_1.BOARD_SEPARATOR].indexOf(c);\n        }) : allPiecesString;\n        return !str.split('').some(function (c) {\n            return !~ruler.indexOf(c);\n        });\n    };\n    Piece.prototype.upgrade = function () {\n        if (this.isTypeFish) {\n            this.type = constant_1.PIECE_TYPE_TRANSFORM_FISH;\n            return true;\n        }\n        return false;\n    };\n    Piece.prototype.downgrade = function () {\n        if (this.isTypeTransformedFish) {\n            this.type = constant_1.PIECE_TYPE_FISH;\n            return true;\n        }\n        return false;\n    };\n    Piece.prototype.clone = function () {\n        return Piece.fromCharCode(this.pieceCharCode);\n    };\n    return Piece;\n}());\nexports.default = Piece;\nvar allPiecesString = __spreadArray(__spreadArray(__spreadArray([], Piece.pieceChars, true), Piece.pieceChars.map(function (pieceChar) {\n    return Piece.toWhiteCharCode(pieceChar);\n}), true), [\n    constant_1.EMPTY_PIECE,\n    constant_1.BOARD_SEPARATOR,\n], false);\n//# sourceMappingURL=Piece.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar PieceIndex = /** @class */ (function () {\n    function PieceIndex(point, piece) {\n        this.canMovePoints = [];\n        this.point = point;\n        this.piece = piece;\n    }\n    PieceIndex.prototype.toCode = function () {\n        if (this.piece === null) {\n            return null;\n        }\n        return \"\" + this.piece.pieceCharCode + this.point.indexCode;\n    };\n    PieceIndex.prototype.toPieceCharCode = function () {\n        if (this.piece === null) {\n            return constant_1.EMPTY_PIECE;\n        }\n        return this.piece.pieceCharCode;\n    };\n    return PieceIndex;\n}());\nexports.default = PieceIndex;\n//# sourceMappingURL=PieceIndex.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar Point = /** @class */ (function () {\n    function Point(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    Object.defineProperty(Point.prototype, \"index\", {\n        get: function () {\n            return Point.xyToIndex(this.x, this.y);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"graveyardIndex\", {\n        get: function () {\n            return this.x;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"indexCode\", {\n        get: function () {\n            return \"\" + this.h + this.v;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"title\", {\n        get: function () {\n            return \"\" + constant_1.HORIZONTAL_NOTE_LETTERS[this.x] + constant_1.VERTICAL_NOTE_LETTERS[this.y];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"titleEnglish\", {\n        get: function () {\n            return this.indexCode;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"h\", {\n        get: function () {\n            return constant_1.HORIZONTAL_CODE_LETTERS[this.x];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"v\", {\n        get: function () {\n            return this.y + 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Point.xyToIndex = function (x, y) {\n        return y * constant_1.ROW_NUMBER + x;\n    };\n    Point.indexCodeToXY = function (indexCode) {\n        var x = constant_1.HORIZONTAL_CODE_LETTERS.indexOf(indexCode[0]);\n        var y = Number(indexCode[1]) - 1;\n        return { x: x, y: y };\n    };\n    Point.indexCodeToIndex = function (indexCode) {\n        var _a = Point.indexCodeToXY(indexCode), x = _a.x, y = _a.y;\n        return Point.xyToIndex(x, y);\n    };\n    Point.fromIndexCode = function (indexCode) {\n        var _a = Point.indexCodeToXY(indexCode), x = _a.x, y = _a.y;\n        return new Point(x, y);\n    };\n    Point.indexToXY = function (index) {\n        var x = index % constant_1.ROW_NUMBER;\n        var y = Math.floor(index / constant_1.ROW_NUMBER);\n        return { x: x, y: y };\n    };\n    Point.fromIndex = function (index) {\n        var _a = Point.indexToXY(index), x = _a.x, y = _a.y;\n        return new Point(x, y);\n    };\n    Point.fromIndexGraveyardIndex = function (index) {\n        return new Point(index, 0);\n    };\n    Point.isIndexInBoard = function (index) {\n        return index >= 0 && index <= constant_1.CELL_COUNT - 1;\n    };\n    return Point;\n}());\nexports.default = Point;\n//# sourceMappingURL=Point.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Board_1 = __importDefault(require(\"./Board\"));\nvar KqJumped_1 = __importDefault(require(\"./KqJumped\"));\nvar KAttacked_1 = __importDefault(require(\"./KAttacked\"));\nvar CountUp_1 = __importDefault(require(\"./CountUp\"));\nvar Graveyard_1 = __importDefault(require(\"./Graveyard\"));\nvar constant_1 = require(\"./constant\");\nvar kpgn_1 = require(\"../kpgn\");\nvar Move_1 = __importDefault(require(\"../kpgn/Move\"));\nvar Point_1 = __importDefault(require(\"./Point\"));\nvar Piece_1 = __importDefault(require(\"./Piece\"));\nvar _1 = require(\".\");\nvar MoveHelper_1 = __importDefault(require(\"../brain/MoveHelper\"));\nvar constant_2 = require(\"../brain/constant\");\nvar REN = /** @class */ (function () {\n    function REN(renProps) {\n        this.moveHelper = new MoveHelper_1.default();\n        var boardStr = renProps.boardStr, turnStr = renProps.turnStr, kqJumpedStr = renProps.kqJumpedStr, kAttackedStr = renProps.kAttackedStr, countUpStr = renProps.countUpStr, graveyardStr = renProps.graveyardStr;\n        // TODO: improve by moving to fromString()\n        this.board = new Board_1.default(boardStr);\n        this.turn = turnStr || constant_2.PIECE_COLOR_WHITE;\n        this.kqJumped = new KqJumped_1.default(kqJumpedStr);\n        this.kAttacked = new KAttacked_1.default(kAttackedStr);\n        this.countUp = CountUp_1.default.fromString(countUpStr);\n        this.graveyard = new Graveyard_1.default(graveyardStr);\n        var invalidPiecesString = this.isInvalidPieceCount();\n        if (invalidPiecesString) {\n            var msg = \"Invalid piece string board:\" + boardStr;\n            msg += \", graveyard:\" + graveyardStr + \", count:\" + invalidPiecesString;\n            throw new Error(msg);\n        }\n        this.moveHelper = new MoveHelper_1.default();\n    }\n    REN.prototype.isInvalidPieceCount = function () {\n        var pieces = this.board.pieceIndices.map(function (pos) {\n            return pos.piece;\n        }).filter(function (p) {\n            return p !== null;\n        }).concat(this.graveyard.pieces).map(function (p) {\n            return p.originPiece;\n        });\n        var piecesCount = pieces.reduce(function (obj, p) {\n            obj[p.pieceCharCode] = obj[p.pieceCharCode] || 0;\n            obj[p.pieceCharCode]++;\n            return obj;\n        }, {});\n        var str = Object.keys(piecesCount).map(function (k) {\n            return \"\" + k + piecesCount[k];\n        }).sort().join('');\n        if (str === constant_1.STRING_COUNT) {\n            return false;\n        }\n        return str;\n    };\n    REN.prototype.backRen = function (move) {\n        var ren = REN.fromString(this.toString());\n        ren.moveBack(move);\n        return ren;\n    };\n    Object.defineProperty(REN.prototype, \"isCanMoveNext\", {\n        get: function () {\n            return !this.countUp.isCountingOut;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    REN.prototype.move = function (moveFromIndex, moveToIndex) {\n        if (!this.isCanMoveNext) {\n            return null;\n        }\n        var piece = this.board.getPieceAtIndex(moveFromIndex);\n        if (!piece) {\n            return null;\n        }\n        this.board.setPieceAtIndex(moveFromIndex, null);\n        var move = new Move_1.default({\n            moveFrom: Point_1.default.fromIndex(moveFromIndex),\n            moveTo: Point_1.default.fromIndex(moveToIndex),\n            piece: piece.clone(),\n        });\n        if (move.isUpgrading) {\n            piece.upgrade();\n        }\n        var targetPiece = this.board.getPieceAtIndex(moveToIndex);\n        if (targetPiece) {\n            this.graveyard.pieces.push(targetPiece);\n            move.captured = new kpgn_1.Captured({\n                fromBoardPoint: Point_1.default.fromIndex(moveToIndex),\n                toGraveyardPoint: Point_1.default.fromIndex(this.graveyard.lastIndex),\n                piece: targetPiece,\n            });\n        }\n        this.board.setPieceAtIndex(moveToIndex, piece);\n        this.turn = Piece_1.default.oppositeColor(piece.color);\n        move.setRen(this);\n        return move;\n    };\n    REN.prototype.moveBack = function (move) {\n        var movedToIndex = move.moveTo.index;\n        var movedFromIndex = move.moveFrom.index;\n        var piece = this.board.getPieceAtIndex(movedToIndex);\n        this.board.setPieceAtIndex(movedToIndex, null);\n        if (!piece) {\n            return false;\n        }\n        this.board.setPieceAtIndex(movedFromIndex, piece);\n        if (move.captured) {\n            var movedToGYIndex = move.captured.toGraveyardPoint.index;\n            var capturedPiece = this.graveyard.get(movedToGYIndex);\n            this.board.setPieceAtIndex(movedToIndex, capturedPiece);\n            this.graveyard.removeAtIndex(movedToGYIndex);\n        }\n        if (move.kqJumping.whiteKing) {\n            this.kqJumped.whiteKing = false;\n        }\n        if (move.kqJumping.whiteQueen) {\n            this.kqJumped.whiteQueen = false;\n        }\n        if (move.kqJumping.blackKing) {\n            this.kqJumped.blackKing = false;\n        }\n        if (move.kqJumping.blackQueen) {\n            this.kqJumped.blackQueen = false;\n        }\n        if (this.countUp) {\n            this.countUp.clear();\n        }\n        this.turn = piece.color;\n        return true;\n    };\n    REN.fromString = function (renStr) {\n        if (!renStr) {\n            renStr = constant_1.DEFAULT_BOARD_STR;\n        }\n        var renArr = renStr.split(' ');\n        return new REN({\n            boardStr: renArr[0],\n            turnStr: renArr[1],\n            kqJumpedStr: renArr[2],\n            kAttackedStr: renArr[3],\n            countUpStr: renArr[4],\n            graveyardStr: renArr[5],\n        });\n    };\n    REN.prototype.toString = function () {\n        var str = this.board.toString();\n        str += \" \" + this.turn.toString();\n        str += \" \" + this.kqJumped.toString();\n        str += \" \" + this.kAttacked.toString();\n        str += \" \" + this.countUp.toString();\n        str += \" \" + this.graveyard.toString();\n        return str;\n    };\n    Object.defineProperty(REN.prototype, \"isQueenMoved\", {\n        get: function () {\n            var isQueenMoved = Piece_1.default.isWhiteColor(this.turn) && this.kqJumped.whiteQueen ||\n                Piece_1.default.isBlackColor(this.turn) && this.kqJumped.blackQueen;\n            return isQueenMoved;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(REN.prototype, \"isKingMoved\", {\n        get: function () {\n            var isKingMoved = Piece_1.default.isWhiteColor(this.turn) && this.kqJumped.whiteKing ||\n                Piece_1.default.isBlackColor(this.turn) && this.kqJumped.blackKing;\n            return isKingMoved;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    REN.prototype.genAllCanMoves = function () {\n        var canMoves = this.moveHelper.calcCanMove({\n            piecesString: this.board.toStringFullNoSeparate(),\n            currentTurn: this.turn,\n            isQueenMoved: this.isQueenMoved,\n            isKingMoved: this.isKingMoved,\n            genCanMove: true,\n            genCanMoveForAnother: false,\n        });\n        return canMoves.moves;\n    };\n    REN.prototype.isHasMoved = function (piece) {\n        var isHasMoved = false;\n        if ((this.kqJumped.blackKing && piece.isColorBlack && piece.isTypeKing) ||\n            (this.kqJumped.whiteKing && piece.isColorWhite && piece.isTypeKing) ||\n            (this.kqJumped.blackQueen && piece.isColorBlack && piece.isTypeQueen) ||\n            (this.kqJumped.whiteQueen && piece.isColorWhite && piece.isTypeQueen)) {\n            isHasMoved = true;\n        }\n        return isHasMoved;\n    };\n    REN.prototype.getCanMovePointsByPoint = function (point) {\n        var piece = this.board.getPieceAtIndex(point.index);\n        if (piece === null) {\n            return [];\n        }\n        return this.moveHelper.genCanMovePointsByPiecePoint(point, piece, this.board.toStringFullNoSeparate(), this.isHasMoved(piece));\n    };\n    REN.prototype.checkBoardStatus = function (move, force) {\n        var _this = this;\n        var piecesString = this.board.toStringFullNoSeparate();\n        // TODO: optimize by specific color\n        var state = this.moveHelper.calcState({\n            piecesString: piecesString,\n            currentTurn: this.turn,\n            isQueenMoved: this.isQueenMoved,\n            isKingMoved: this.isKingMoved,\n            genCanMove: false,\n            genCanMoveForAnother: false,\n        });\n        var kingInDanger = state.blackKingInDanger || state.whiteKingInDanger;\n        if (kingInDanger) {\n            var pieceIndex = kingInDanger.map(function (point) {\n                return new _1.PieceIndex(point, _this.board.getPieceAtIndex(point.index));\n            }).filter(function (pieceIndex) {\n                return pieceIndex.piece !== null && !pieceIndex.piece.isTypeKing;\n            })[0];\n            move.boardStatus.attacker = pieceIndex;\n        }\n        move.boardStatus.winColor = state.winColor;\n        move.boardStatus.stuckColor = state.stuckColor;\n    };\n    REN.prototype.checkCountStatus = function (move, force) {\n        if (move.isCanMoveNext) {\n            var piecesString = this.board.toStringFullNoSeparate();\n            if (this.countUp.isCounting) {\n                move.isStartCounting = false;\n                this.countUp.checkUp(move.piece.color);\n                if (this.countUp.isCountingOut) {\n                    move.boardStatus.drawCountColor = this.countUp.color;\n                }\n            }\n            else {\n                var color = Piece_1.default.oppositeColor(move.piece.color);\n                var countState = this.moveHelper.calCount({\n                    color: Piece_1.default.oppositeColor(move.piece.color),\n                    piecesString: piecesString,\n                    force: !!force,\n                });\n                if (countState) {\n                    this.countUp.set(color, countState.countingToNumber, countState.countingNumber);\n                    move.isStartCounting = true;\n                }\n            }\n        }\n        move.syncRen(this);\n    };\n    REN.prototype.getWinColor = function () {\n        var state = this.moveHelper.calcState({\n            piecesString: this.board.toStringFullNoSeparate(),\n            currentTurn: this.turn,\n            isQueenMoved: this.isQueenMoved,\n            isKingMoved: this.isKingMoved,\n            genCanMove: false,\n            genCanMoveForAnother: false,\n        });\n        return state.winColor;\n    };\n    REN.prototype.syncWithMove = function (move) {\n        if (move) {\n            var countUp = this.countUp;\n            if (countUp.isCounting && this.turn !== countUp.color && !move.isStartCounting) {\n                countUp.isCountingUp = true;\n            }\n        }\n    };\n    return REN;\n}());\nexports.default = REN;\n//# sourceMappingURL=REN.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EVENT_FLAG_MOVING = exports.EVENT_FLAG_COUNT_UP_OUT = exports.EVENT_FLAG_COUNTING_UP = exports.EVENT_FLAG_START_COUNTING = exports.EVENT_FLAG_DRAW = exports.EVENT_FLAG_WIN = exports.EVENT_FLAG_ATTACK = exports.PIECE_FLAG_START_COUNTING = exports.PIECE_FLAG_UPGRADE = exports.PIECE_FLAG_JUMP = exports.PIECE_FLAG_KILL = exports.NOT_SET = exports.DEFAULT_BOARD_STR = exports.STRING_COUNT = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\nexports.STRING_COUNT = 'B2F8G2H2K1Q1b2f8g2h2k1q1';\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\nexports.DEFAULT_BOARD_STR = 'BHGKQGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgqkghb';\nexports.NOT_SET = '-';\nexports.PIECE_FLAG_KILL = '<';\nexports.PIECE_FLAG_JUMP = '^';\nexports.PIECE_FLAG_UPGRADE = '*';\nexports.PIECE_FLAG_START_COUNTING = '#';\nexports.EVENT_FLAG_ATTACK = 'attack';\nexports.EVENT_FLAG_WIN = 'win';\nexports.EVENT_FLAG_DRAW = 'draw';\nexports.EVENT_FLAG_START_COUNTING = 'start-counting';\nexports.EVENT_FLAG_COUNTING_UP = 'counting-up';\nexports.EVENT_FLAG_COUNT_UP_OUT = 'count-up-out';\nexports.EVENT_FLAG_MOVING = 'moving';\n//# sourceMappingURL=constant.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Point = exports.REN = exports.PieceIndex = exports.Piece = exports.KqJumped = exports.KAttacked = exports.Graveyard = exports.CountUp = exports.Board = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Board_1 = require(\"./Board\");\nObject.defineProperty(exports, \"Board\", { enumerable: true, get: function () { return __importDefault(Board_1).default; } });\nvar CountUp_1 = require(\"./CountUp\");\nObject.defineProperty(exports, \"CountUp\", { enumerable: true, get: function () { return __importDefault(CountUp_1).default; } });\nvar Graveyard_1 = require(\"./Graveyard\");\nObject.defineProperty(exports, \"Graveyard\", { enumerable: true, get: function () { return __importDefault(Graveyard_1).default; } });\nvar KAttacked_1 = require(\"./KAttacked\");\nObject.defineProperty(exports, \"KAttacked\", { enumerable: true, get: function () { return __importDefault(KAttacked_1).default; } });\nvar KqJumped_1 = require(\"./KqJumped\");\nObject.defineProperty(exports, \"KqJumped\", { enumerable: true, get: function () { return __importDefault(KqJumped_1).default; } });\nvar Piece_1 = require(\"./Piece\");\nObject.defineProperty(exports, \"Piece\", { enumerable: true, get: function () { return __importDefault(Piece_1).default; } });\nvar PieceIndex_1 = require(\"./PieceIndex\");\nObject.defineProperty(exports, \"PieceIndex\", { enumerable: true, get: function () { return __importDefault(PieceIndex_1).default; } });\nvar REN_1 = require(\"./REN\");\nObject.defineProperty(exports, \"REN\", { enumerable: true, get: function () { return __importDefault(REN_1).default; } });\nvar Point_1 = require(\"./Point\");\nObject.defineProperty(exports, \"Point\", { enumerable: true, get: function () { return __importDefault(Point_1).default; } });\n__exportStar(require(\"./constant\"), exports);\n//# sourceMappingURL=index.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(138);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","__importDefault","this","mod","__esModule","Object","defineProperty","value","khmer_chess_1","package_json_1","KhmerChessAI","_a","khmerChess","turn","KhmerChess","prototype","get","enumerable","configurable","pickRandomItem","arr","length","Math","floor","random","attemptMove","pieceIndices","getCanMoves","pickIndex","pick","canMovePoints","fromIndex","point","index","toIndex","turnColors","black","PIECE_COLOR_BLACK","white","PIECE_COLOR_WHITE","title","default","name","version","console","log","KhmerChessAI_1","constant_1","KPGN_1","table_1","REN_1","renStr","ren","fromString","kpgn","loadKpng","option","fromJson","resetBoard","genAllCanMoves","getCanMovePointsByPoint","validateRENStr","valid","error_number","error","message","getRENStr","toString","board","piecesMultiArray","pieces","graveyard","getKPGN","toJson","loadKpgn","kpgnJosn","options","drawAscii","set","move","moveFromIndex","moveToIndex","addMove","clearBoard","getHistories","moves","toKhmerNum","englishNum","split","map","c","VERTICAL_NOTE_LETTERS","VERTICAL_NOTE_LETTERS_ENGLISH","indexOf","join","HVPont","h","v","Number","HORIZONTAL_CODE_LETTERS","Piece_1","boardHelper_1","MoveHelper","piecesString","currentTurn","isQueenMoved","isKingMoved","genCanMove","genCanMoveForAnother","whiteMoves","blackMoves","whiteKingInDanger","whiteKingWillInDanger","blackKingInDanger","blackKingWillInDanger","winColor","stuckColor","isWhiteColor","init","generateCanMoves","_this","filter","filterPieceInBoard","whitePieces","blackPieces","genMoves","forEach","pieceIndex","isHaveMoved","piece","isTypeKing","isTypeQueen","genCanMovePointsByPiecePoint","cleanPieceNoMove","cleanMoves","isTrue","splice","checkIfKingInDanger","getKingInDanger","getKingWillInDanger","genWinLost","getStuck","isWhiteTurn","calcCanMove","anotherMoves","calcState","calCount","color","force","checkCount","isHasMoved","Rectangle","x","y","width","height","isContainsPoint","isValidPoint","ROW_LAST_INDEX","CountUpState","genMask_1","Point_1","Rectangle_1","ren_1","mask","countingNumber","countingToNumber","BoardHelper","convertMask","point1","sign","point2","getCharPieceFromString","isIndexInBoard","CELL_COUNT","EMPTY_PIECE","getCharPieceInPos","getPieceByIndex","charCode","isValidPiece","fromCharCode","getPieceCanMovePoses","type","_pos","newIndex","push","getPieceCanMovePosesValid","_poses","n","thisPos","p","distPiece","isTypeFish","isTypeBoat","_x","_y","_n","abs","_s","xyToIndex","replacePiecesStringAtIndex","substring","injectPiece","index1","index2","isCharPiecesInBoard","kingPos","PIECE_TYPE_KING","pieceCharCode","j","isHaveCaptured","points","str","code","getPiecesInBoard","ROW_NUMBER","PieceIndex","isColorWhite","extractPiecesToArray","piecesStringArr","pieceAll","isStateCount","checkCountable","weaker","stronger","oppositeColor","countChar","PIECE_TYPE_FISH","count","toukCount","PIECE_TYPE_BOAT","PIECE_TYPE_GENERAL","PIECE_TYPE_HORSE","start","isUpgradable","isColorBlack","_b","_c","_d","HORIZONTAL_NOTE_LETTERS_ENGLISH","HORIZONTAL_NOTE_LETTERS","ROW_FIRST_INDEX","BOARD_SEPARATOR","PIECE_COLOR_EMPTY","PIECE_NAMES_ENGLISH","PIECE_NAMES","PIECE_TYPE_TRANSFORM_FISH","PIECE_TYPE_QUEEN","COLOR_NAMES_ENGLISH","COLOR_NAMES","Array","from","_","concat","__createBinding","create","o","m","k","k2","undefined","__exportStar","hasOwnProperty","call","genMask","boardHelper","HVPont_1","MoveHelper_1","KhmerChess_1","fromBoardPoint","toGraveyardPoint","Move_1","Player_1","Result_1","Timer_1","base64Helper_1","KPGN","event","date","location","players","result","last","whiteWin","blackWin","timer","latestMove","isCanMoveNext","getMove","loadRENStr","syncWithMove","loadMovesStrings","currentRen","reverse","moveStr","Error","backRen","Date","fromBase64","json","JSON","parse","decode","toBase64","jsStr","stringify","encode","brain_1","Captured_1","Move","moveFrom","moveTo","isUpgrading","captured","boardStatus","attacker","drawCountColor","isStartCounting","upgrade","kqJumping","KqJumped","setRen","checkBoardStatus","kqJumped","checkKQMoved","checkCountStatus","syncRen","whiteKing","whiteQueen","blackKing","blackQueen","isDraw","fromIndexCode","substr","killIndex","PIECE_FLAG_KILL","match","gyIndex","capturedPiece","fromIndexGraveyardIndex","jumpingIndex","PIECE_FLAG_JUMP","fromNumber","PIECE_FLAG_START_COUNTING","pCode","fIndexCode","indexCode","tIndexCode","flags","isJumped","toNumber","PIECE_FLAG_UPGRADE","getJumpingMessage","isEnglish","jump","isWhiteKingJumping","isWhiteQueenJumping","isBlackKingJumping","isBlackQueenJumping","getMessage","titleEnglish","Player","id","Result","win","draw","lost","Timer","totalSecond","bonusTime","currentWhite","currentBlack","Captured","EventHandler","_onEventListeners","_propEvent","_isLockProp","events","destroy","_checkPropEvent","shift","_checkOnEvent","data","_addPropEvent","_guardEventName","eventName","listener","_addOnEventListener","_removeOnEventListener","Base64","_keyStr","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","_utf8_encode","charCodeAt","isNaN","charAt","replace","String","_utf8_decode","string","utftext","c1","c2","table","EventHandler_1","__spreadArray","to","pack","arguments","ar","l","slice","renderLine","reduce","s","subArr","PieceIndex_1","constant_2","Board","boardStr","DEFAULT_BOARD_STR","newBoardStr","extract","isValidPiecesString","find","getKing","compress","reg","RegExp","$1","toStringFull","toPieceCharCode","toStringFullNoSeparate","getPieceAtIndex","setPieceAtIndex","CountUp","isCountingUp","isCounting","isWhite","clear","checkUp","countUpStr","NOT_SET","countUp","countingUp","countingUpWB","Graveyard","graveyardStr","removeAtIndex","KAttacked","kAttackedStr","toWhiteCharCode","kqJumpedStr","keyCodes","codeKeys","setProp","key","applyJumping","propKey","parseInt","b","Piece","toNormalCharCode","pieceCharCodeWhite","_isTypeEqual","isBlackColor","isWhiteCharCode","isTypeTransformedFish","toUpperCase","toBlackCharCode","toLowerCase","onlyPiece","ruler","allPiecesString","some","downgrade","clone","pieceChars","pieceChar","toCode","Point","indexCodeToXY","indexCodeToIndex","indexToXY","Board_1","KqJumped_1","KAttacked_1","CountUp_1","Graveyard_1","kpgn_1","_1","REN","renProps","moveHelper","turnStr","kAttacked","invalidPiecesString","isInvalidPieceCount","msg","piecesCount","pos","originPiece","obj","keys","sort","STRING_COUNT","moveBack","isCountingOut","targetPiece","lastIndex","movedToIndex","movedFromIndex","movedToGYIndex","renArr","state","kingInDanger","countState","getWinColor","EVENT_FLAG_MOVING","EVENT_FLAG_COUNT_UP_OUT","EVENT_FLAG_COUNTING_UP","EVENT_FLAG_START_COUNTING","EVENT_FLAG_DRAW","EVENT_FLAG_WIN","EVENT_FLAG_ATTACK","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}